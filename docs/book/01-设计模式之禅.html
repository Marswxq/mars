<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.15" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/images/mars_header.png"><title>è®¾è®¡æ¨¡å¼ä¹‹ç¦… | Marsâ€˜s doc</title><meta name="description" content="ä¸°ç¢‘æ— è¯­ï¼Œè¡Œèƒœäºè¨€">
    <link rel="preload" href="/mars/assets/style-nxCXSMLD.css" as="style"><link rel="stylesheet" href="/mars/assets/style-nxCXSMLD.css">
    <link rel="modulepreload" href="/mars/assets/app-CKtXyHQO.js"><link rel="modulepreload" href="/mars/assets/01-è®¾è®¡æ¨¡å¼ä¹‹ç¦….html-Cv0D-YYo.js">
    <link rel="prefetch" href="/mars/assets/index.html-IMwkrBa8.js" as="script"><link rel="prefetch" href="/mars/assets/01-Mysql.html-BQMjEIAg.js" as="script"><link rel="prefetch" href="/mars/assets/02-Clickhouse.html-qfZDrNbu.js" as="script"><link rel="prefetch" href="/mars/assets/03-Doris.html-D1C-weSu.js" as="script"><link rel="prefetch" href="/mars/assets/04-DRDS.html-DHXcak3U.js" as="script"><link rel="prefetch" href="/mars/assets/02-é¢†åŸŸé©±åŠ¨è®¾è®¡.html-DDO_CTCi.js" as="script"><link rel="prefetch" href="/mars/assets/03-JavaScripté«˜çº§ç¨‹åºè®¾è®¡.html-BtYZvi7F.js" as="script"><link rel="prefetch" href="/mars/assets/01-Dockerå¸¸ç”¨å‘½ä»¤.html-CDUNSjGw.js" as="script"><link rel="prefetch" href="/mars/assets/02-Dockerfile.html-CZDe-qJW.js" as="script"><link rel="prefetch" href="/mars/assets/03-Swarm.html-eFRVH1Ym.js" as="script"><link rel="prefetch" href="/mars/assets/04-Stack.html-CWuhU3GH.js" as="script"><link rel="prefetch" href="/mars/assets/05-Dockerå¸¸è§é—®é¢˜.html-gjtvs6g8.js" as="script"><link rel="prefetch" href="/mars/assets/06-DockerCompose.html-WAj1R7Fe.js" as="script"><link rel="prefetch" href="/mars/assets/07-Dockeråº”ç”¨ç”¨æ±‡æ€».html-C_0wGp2w.js" as="script"><link rel="prefetch" href="/mars/assets/08-Kasm.html-UgTlTx74.js" as="script"><link rel="prefetch" href="/mars/assets/09-Rustdesk.html-CsMzEJaj.js" as="script"><link rel="prefetch" href="/mars/assets/01-æ ¸å¿ƒAPI.html-CR-Irt72.js" as="script"><link rel="prefetch" href="/mars/assets/02-ç›‘å¬.html-DS8K4cVE.js" as="script"><link rel="prefetch" href="/mars/assets/03-æ•°æ®åº“è¡¨ä»‹ç».html-DHH7AqDK.js" as="script"><link rel="prefetch" href="/mars/assets/04-å¸¸è§é—®é¢˜.html-CQFv8cWc.js" as="script"><link rel="prefetch" href="/mars/assets/01-Gitä½¿ç”¨.html-Dadg8tK5.js" as="script"><link rel="prefetch" href="/mars/assets/01-JaspersoftStudioå·¥å…·ä½¿ç”¨.html-DJFLHJJr.js" as="script"><link rel="prefetch" href="/mars/assets/02-JasperReporté›†æˆ.html-CVTYPZVj.js" as="script"><link rel="prefetch" href="/mars/assets/03-JasperReportå¸¸è§é—®é¢˜.html-3zSioQZt.js" as="script"><link rel="prefetch" href="/mars/assets/01-Java8ç‰¹æ€§.html-BIJIFWY6.js" as="script"><link rel="prefetch" href="/mars/assets/02-å¤šçº¿ç¨‹.html-C6P3Dnqm.js" as="script"><link rel="prefetch" href="/mars/assets/03-JaråŒ….html-DmoMxyZZ.js" as="script"><link rel="prefetch" href="/mars/assets/04-Util.html-BDEgLTdb.js" as="script"><link rel="prefetch" href="/mars/assets/05-validationæ³¨è§£.html-VRM32HUO.js" as="script"><link rel="prefetch" href="/mars/assets/06-åç¼–è¯‘.html-oKOLQBev.js" as="script"><link rel="prefetch" href="/mars/assets/07-try-with-resource.html-CHaxipo-.js" as="script"><link rel="prefetch" href="/mars/assets/08-ThreadLocalå†…å­˜æ³„æ¼.html-okiC3WLe.js" as="script"><link rel="prefetch" href="/mars/assets/09-Jvm.html-BjI7kSRi.js" as="script"><link rel="prefetch" href="/mars/assets/10-Excel.html-sBInkqkU.js" as="script"><link rel="prefetch" href="/mars/assets/11-Lombook.html-CJuzJAMt.js" as="script"><link rel="prefetch" href="/mars/assets/12-æ¡ä»¶æ³¨è§£.html-C44aGw0F.js" as="script"><link rel="prefetch" href="/mars/assets/13-WebMvcConfigurationSupport.html-ZTTIiFCr.js" as="script"><link rel="prefetch" href="/mars/assets/14-WebMvcConfigurer.html-lfK31Evf.js" as="script"><link rel="prefetch" href="/mars/assets/15-åˆ†å¸ƒå¼é”.html-CWHeKUtF.js" as="script"><link rel="prefetch" href="/mars/assets/16-Caffeine.html-zPXxaaVv.js" as="script"><link rel="prefetch" href="/mars/assets/17-DynamicDatasource.html-CaXmXC4c.js" as="script"><link rel="prefetch" href="/mars/assets/18-MybatisPlus.html-D5ijptoD.js" as="script"><link rel="prefetch" href="/mars/assets/19-Swagger.html-D_hHSl9h.js" as="script"><link rel="prefetch" href="/mars/assets/20-BeanPostProcessor.html-DE8815hX.js" as="script"><link rel="prefetch" href="/mars/assets/21-Beanåˆå§‹åŒ–.html-DJqnf512.js" as="script"><link rel="prefetch" href="/mars/assets/22-ConfigurableApplicationContext.html-twXSNfNB.js" as="script"><link rel="prefetch" href="/mars/assets/23-å¸¸ç”¨æ³¨è§£.html-BqHSEmxg.js" as="script"><link rel="prefetch" href="/mars/assets/24-ApplicationListener.html-DTWDKsbv.js" as="script"><link rel="prefetch" href="/mars/assets/25-JavaDoc.html-Cc0bAuKz.js" as="script"><link rel="prefetch" href="/mars/assets/26-Spring-Cache.html-CLiuTLR-.js" as="script"><link rel="prefetch" href="/mars/assets/27-StopWatchè€—æ—¶ç»Ÿè®¡.html-R0QvTNTa.js" as="script"><link rel="prefetch" href="/mars/assets/28-Word.html-BD6eE7i-.js" as="script"><link rel="prefetch" href="/mars/assets/29-Druid.html-DG2BYG8s.js" as="script"><link rel="prefetch" href="/mars/assets/30-OpenFeign.html-BLLGQaYE.js" as="script"><link rel="prefetch" href="/mars/assets/31-åå°„ç›¸å…³.html-B--5Dpdn.js" as="script"><link rel="prefetch" href="/mars/assets/32-Fastjson.html-C-Y7D5Zu.js" as="script"><link rel="prefetch" href="/mars/assets/33-Yaml.html-C7xhPukH.js" as="script"><link rel="prefetch" href="/mars/assets/01-Node.html-D5lSIS0h.js" as="script"><link rel="prefetch" href="/mars/assets/02-VuePress.html-79fOS1sz.js" as="script"><link rel="prefetch" href="/mars/assets/03-Vueç»„ä»¶é«˜åº¦å®½åº¦.html-j3_VvU3n.js" as="script"><link rel="prefetch" href="/mars/assets/04-æ˜¾ç¤ºå™¨å’Œå±å¹•é«˜åº¦.html-D0GYp6X3.js" as="script"><link rel="prefetch" href="/mars/assets/05-é¡µé¢åœ°å€.html-CzZU2h-0.js" as="script"><link rel="prefetch" href="/mars/assets/06-å½’çº³æ€»ç»“.html-XiOJgIvK.js" as="script"><link rel="prefetch" href="/mars/assets/01-Jenkinséƒ¨ç½².html-CURgid1N.js" as="script"><link rel="prefetch" href="/mars/assets/02-Jenkisnå¸¸è§é—®é¢˜.html-B6EGqVtG.js" as="script"><link rel="prefetch" href="/mars/assets/01-å…¥é—¨.html-B5ET36Rx.js" as="script"><link rel="prefetch" href="/mars/assets/02-jsè„šæœ¬.html-CXHULC-I.js" as="script"><link rel="prefetch" href="/mars/assets/03-ä¼˜åŒ–.html-DHCKKQSJ.js" as="script"><link rel="prefetch" href="/mars/assets/04-è¿æ¥ç»„ä»¶.html-PfhBapfI.js" as="script"><link rel="prefetch" href="/mars/assets/05-å‚æ•°.html-DNjqaT2g.js" as="script"><link rel="prefetch" href="/mars/assets/06-å·¥å…·.html-PSFViK5F.js" as="script"><link rel="prefetch" href="/mars/assets/07-æ—¥å¿—.html-CF_oM_3e.js" as="script"><link rel="prefetch" href="/mars/assets/08-æµç¨‹ç»„ä»¶.html-Bz4tJ3q4.js" as="script"><link rel="prefetch" href="/mars/assets/09-è¾“å…¥ç»„ä»¶.html-BUELrrsD.js" as="script"><link rel="prefetch" href="/mars/assets/10-è¾“å‡ºç»„ä»¶.html-DJMIhO1w.js" as="script"><link rel="prefetch" href="/mars/assets/11-è½¬æ¢ç»„ä»¶.html-CIZ1DW1H.js" as="script"><link rel="prefetch" href="/mars/assets/12-é©±åŠ¨.html-C6WrGpwm.js" as="script"><link rel="prefetch" href="/mars/assets/01-Linuxå¸¸ç”¨å‘½ä»¤.html-CDU6yLTH.js" as="script"><link rel="prefetch" href="/mars/assets/02-Linuxè„šæœ¬æ±‡æ€».html-CjHJnmzH.js" as="script"><link rel="prefetch" href="/mars/assets/03-Yumæº.html-H2287_3v.js" as="script"><link rel="prefetch" href="/mars/assets/04-Debian.html-C0pPCbLu.js" as="script"><link rel="prefetch" href="/mars/assets/05-Ubuntu.html-BYXhUzpe.js" as="script"><link rel="prefetch" href="/mars/assets/01-Markdownè¯­æ³•.html-B2lFEbEq.js" as="script"><link rel="prefetch" href="/mars/assets/02-Markdownè¡¨æƒ….html-C0TdkecS.js" as="script"><link rel="prefetch" href="/mars/assets/03-Markdownä»£ç å—è¯­è¨€å¯¹ç…§.html-DAV6WxqW.js" as="script"><link rel="prefetch" href="/mars/assets/01-Mavenä½¿ç”¨.html-C4ZUqI6t.js" as="script"><link rel="prefetch" href="/mars/assets/02-Mavené…ç½®.html-D7BqwLAn.js" as="script"><link rel="prefetch" href="/mars/assets/01-Nginx.html-C1hj0SvF.js" as="script"><link rel="prefetch" href="/mars/assets/ä¹±ä¸ƒå…«ç³Ÿçš„.html-DrdrxaHx.js" as="script"><link rel="prefetch" href="/mars/assets/01-HTML XML è½¬ä¹‰.html-C6ZndN2r.js" as="script"><link rel="prefetch" href="/mars/assets/02-GitHub.html-xk7gGM2A.js" as="script"><link rel="prefetch" href="/mars/assets/03-Idea.html-CNyJA16l.js" as="script"><link rel="prefetch" href="/mars/assets/04-Nmon.html-D0zG6w1k.js" as="script"><link rel="prefetch" href="/mars/assets/05-Windows.html-CaWhOPYK.js" as="script"><link rel="prefetch" href="/mars/assets/06-WinSw.html-CCh92QQo.js" as="script"><link rel="prefetch" href="/mars/assets/01-RaspBerry.html-BKfJH8TF.js" as="script"><link rel="prefetch" href="/mars/assets/TestMarkdown.html-Dp3b1AcO.js" as="script"><link rel="prefetch" href="/mars/assets/TestMarkdownGoTo.html-DcgEveSS.js" as="script"><link rel="prefetch" href="/mars/assets/404.html-C_StT2IE.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/mars/"><img class="vp-site-logo" src="/mars/./images/mars_blue.png" alt="Marsâ€˜s doc"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Marsâ€˜s doc</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/mars/" aria-label="ğŸ ä¸»é¡µ"><!---->ğŸ ä¸»é¡µ<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="ğŸ«æŠ€æœ¯ç›¸å…³"><span class="title">ğŸ«æŠ€æœ¯ç›¸å…³</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="ğŸ«æŠ€æœ¯ç›¸å…³"><span class="title">ğŸ«æŠ€æœ¯ç›¸å…³</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ»Activiti</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/activiti/01-%E6%A0%B8%E5%BF%83API.html" aria-label="01-æ ¸å¿ƒAPI"><!---->01-æ ¸å¿ƒAPI<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/activiti/02-%E7%9B%91%E5%90%AC.html" aria-label="02-ç›‘å¬"><!---->02-ç›‘å¬<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/activiti/03-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E4%BB%8B%E7%BB%8D.html" aria-label="03-æ•°æ®åº“è¡¨ä»‹ç»"><!---->03-æ•°æ®åº“è¡¨ä»‹ç»<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/activiti/04-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html" aria-label="04-å¸¸è§é—®é¢˜"><!---->04-å¸¸è§é—®é¢˜<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ“ŠJasperReport</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/jasper/01-JaspersoftStudio%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.html" aria-label="01-JaspersoftStudioå·¥å…·ä½¿ç”¨"><!---->01-JaspersoftStudioå·¥å…·ä½¿ç”¨<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/jasper/02-JasperReport%E9%9B%86%E6%88%90.html" aria-label="02-JasperReporté›†æˆ"><!---->02-JasperReporté›†æˆ<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/jasper/03-JasperReport%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html" aria-label="03-JasperReportå¸¸è§é—®é¢˜"><!---->03-JasperReportå¸¸è§é—®é¢˜<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ¬JavaScript</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/javascript/01-Node.html" aria-label="01-Node"><!---->01-Node<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/javascript/02-VuePress.html" aria-label="02-VuePress"><!---->02-VuePress<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/javascript/03-Vue%E7%BB%84%E4%BB%B6%E9%AB%98%E5%BA%A6%E5%AE%BD%E5%BA%A6.html" aria-label="03-Vueç»„ä»¶é«˜åº¦å®½åº¦"><!---->03-Vueç»„ä»¶é«˜åº¦å®½åº¦<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/javascript/04-%E6%98%BE%E7%A4%BA%E5%99%A8%E5%92%8C%E5%B1%8F%E5%B9%95%E9%AB%98%E5%BA%A6.html" aria-label="04-æ˜¾ç¤ºå™¨å’Œå±å¹•é«˜åº¦"><!---->04-æ˜¾ç¤ºå™¨å’Œå±å¹•é«˜åº¦<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/javascript/05-%E9%A1%B5%E9%9D%A2%E5%9C%B0%E5%9D%80.html" aria-label="05-é¡µé¢åœ°å€"><!---->05-é¡µé¢åœ°å€<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/javascript/06-%E5%BD%92%E7%BA%B3%E6%80%BB%E7%BB%93.html" aria-label="06-å½’çº³æ€»ç»“"><!---->06-å½’çº³æ€»ç»“<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸµJava</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/01-Java8%E7%89%B9%E6%80%A7.html" aria-label="01-Java8ç‰¹æ€§"><!---->01-Java8ç‰¹æ€§<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/02-%E5%A4%9A%E7%BA%BF%E7%A8%8B.html" aria-label="02-å¤šçº¿ç¨‹"><!---->02-å¤šçº¿ç¨‹<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/03-Jar%E5%8C%85.html" aria-label="03-JaråŒ…"><!---->03-JaråŒ…<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/04-Util.html" aria-label="04-Util"><!---->04-Util<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/05-validation%E6%B3%A8%E8%A7%A3.html" aria-label="05-validationæ³¨è§£"><!---->05-validationæ³¨è§£<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/06-%E5%8F%8D%E7%BC%96%E8%AF%91.html" aria-label="06-åç¼–è¯‘"><!---->06-åç¼–è¯‘<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/07-try-with-resource.html" aria-label="07-try-with-resource"><!---->07-try-with-resource<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/08-ThreadLocal%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F.html" aria-label="08-ThreadLocalå†…å­˜æ³„æ¼"><!---->08-ThreadLocalå†…å­˜æ³„æ¼<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/09-Jvm.html" aria-label="09-Jvm"><!---->09-Jvm<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/10-Excel.html" aria-label="10-Excel"><!---->10-Excel<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/11-Lombook.html" aria-label="11-Lombook"><!---->11-Lombook<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/12-%E6%9D%A1%E4%BB%B6%E6%B3%A8%E8%A7%A3.html" aria-label="12-æ¡ä»¶æ³¨è§£"><!---->12-æ¡ä»¶æ³¨è§£<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/13-WebMvcConfigurationSupport.html" aria-label="13-WebMvcConfigurationSupport"><!---->13-WebMvcConfigurationSupport<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/14-WebMvcConfigurer.html" aria-label="14-WebMvcConfigurer"><!---->14-WebMvcConfigurer<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/15-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81.html" aria-label="15-åˆ†å¸ƒå¼é”"><!---->15-åˆ†å¸ƒå¼é”<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/16-Caffeine.html" aria-label="16-Caffeine"><!---->16-Caffeine<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/17-DynamicDatasource.html" aria-label="17-DynamicDatasource"><!---->17-DynamicDatasource<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/18-MybatisPlus.html" aria-label="18-MybatisPlus"><!---->18-MybatisPlus<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/19-Swagger.html" aria-label="19-Swagger"><!---->19-Swagger<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/20-BeanPostProcessor.html" aria-label="20-BeanPostProcessor"><!---->20-BeanPostProcessor<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/21-Bean%E5%88%9D%E5%A7%8B%E5%8C%96.html" aria-label="21-Beanåˆå§‹åŒ–"><!---->21-Beanåˆå§‹åŒ–<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/22-ConfigurableApplicationContext.html" aria-label="22-ConfigurableApplicationContext"><!---->22-ConfigurableApplicationContext<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/23-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3.html" aria-label="23-å¸¸ç”¨æ³¨è§£"><!---->23-å¸¸ç”¨æ³¨è§£<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/24-ApplicationListener.html" aria-label="24-ApplicationListener"><!---->24-ApplicationListener<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/25-JavaDoc.html" aria-label="25-JavaDoc"><!---->25-JavaDoc<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/26-Spring-Cache.html" aria-label="26-Spring-Cache"><!---->26-Spring-Cache<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/27-StopWatch%E8%80%97%E6%97%B6%E7%BB%9F%E8%AE%A1.html" aria-label="27-StopWatchè€—æ—¶ç»Ÿè®¡"><!---->27-StopWatchè€—æ—¶ç»Ÿè®¡<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/28-Word.html" aria-label="28-Word"><!---->28-Word<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/29-Druid.html" aria-label="29-Druid"><!---->29-Druid<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/30-OpenFeign.html" aria-label="30-OpenFeign"><!---->30-OpenFeign<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/31-%E5%8F%8D%E5%B0%84%E7%9B%B8%E5%85%B3.html" aria-label="31-åå°„ç›¸å…³"><!---->31-åå°„ç›¸å…³<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/32-Fastjson.html" aria-label="32-Fastjson"><!---->32-Fastjson<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/33-Yaml.html" aria-label="33-Yaml"><!---->33-Yaml<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="ğŸ¢æœåŠ¡å™¨"><span class="title">ğŸ¢æœåŠ¡å™¨</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¢æœåŠ¡å™¨"><span class="title">ğŸ¢æœåŠ¡å™¨</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ’»Linux</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/linux/01-Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="01-Linuxå¸¸ç”¨å‘½ä»¤"><!---->01-Linuxå¸¸ç”¨å‘½ä»¤<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/linux/02-Linux%E8%84%9A%E6%9C%AC%E6%B1%87%E6%80%BB.html" aria-label="02-Linuxè„šæœ¬æ±‡æ€»"><!---->02-Linuxè„šæœ¬æ±‡æ€»<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/linux/03-Yum%E6%BA%90.html" aria-label="03-Yumæº"><!---->03-Yumæº<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/linux/04-Debian.html" aria-label="04-Debian"><!---->04-Debian<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/linux/05-Ubuntu.html" aria-label="05-Ubuntu"><!---->05-Ubuntu<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ‹Docker</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/01-Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="01-Dockerå¸¸ç”¨å‘½ä»¤"><!---->01-Dockerå¸¸ç”¨å‘½ä»¤<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/02-Dockerfile.html" aria-label="02-Dockerfile"><!---->02-Dockerfile<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/03-Swarm.html" aria-label="03-Swarm"><!---->03-Swarm<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/04-Stack.html" aria-label="04-Stack"><!---->04-Stack<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/05-Docker%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html" aria-label="05-Dockerå¸¸è§é—®é¢˜"><!---->05-Dockerå¸¸è§é—®é¢˜<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/06-DockerCompose.html" aria-label="06-DockerCompose"><!---->06-DockerCompose<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/07-Docker%E5%BA%94%E7%94%A8%E7%94%A8%E6%B1%87%E6%80%BB.html" aria-label="07-Dockeråº”ç”¨ç”¨æ±‡æ€»"><!---->07-Dockeråº”ç”¨ç”¨æ±‡æ€»<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/08-Kasm.html" aria-label="08-Kasm"><!---->08-Kasm<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/09-Rustdesk.html" aria-label="09-Rustdesk"><!---->09-Rustdesk<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸŒNginx</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/nginx/01-Nginx.html" aria-label="01-Nginx"><!---->01-Nginx<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="ğŸ©æ•°æ®ç›¸å…³"><span class="title">ğŸ©æ•°æ®ç›¸å…³</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="ğŸ©æ•°æ®ç›¸å…³"><span class="title">ğŸ©æ•°æ®ç›¸å…³</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ“ˆæ•°æ®åº“</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/database/01-Mysql.html" aria-label="01-Mysql"><!---->01-Mysql<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/database/02-Clickhouse.html" aria-label="02-Clickhouse"><!---->02-Clickhouse<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/database/03-Doris.html" aria-label="03-Doris"><!---->03-Doris<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/database/04-DRDS.html" aria-label="04-DRDS"><!---->04-DRDS<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ“‰Kettle</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/01-%E5%85%A5%E9%97%A8.html" aria-label="01-å…¥é—¨"><!---->01-å…¥é—¨<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/02-js%E8%84%9A%E6%9C%AC.html" aria-label="02-jsè„šæœ¬"><!---->02-jsè„šæœ¬<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/03-%E4%BC%98%E5%8C%96.html" aria-label="03-ä¼˜åŒ–"><!---->03-ä¼˜åŒ–<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/04-%E8%BF%9E%E6%8E%A5%E7%BB%84%E4%BB%B6.html" aria-label="04-è¿æ¥ç»„ä»¶"><!---->04-è¿æ¥ç»„ä»¶<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/05-%E5%8F%82%E6%95%B0.html" aria-label="05-å‚æ•°"><!---->05-å‚æ•°<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/06-%E5%B7%A5%E5%85%B7.html" aria-label="06-å·¥å…·"><!---->06-å·¥å…·<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/07-%E6%97%A5%E5%BF%97.html" aria-label="07-æ—¥å¿—"><!---->07-æ—¥å¿—<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/08-%E6%B5%81%E7%A8%8B%E7%BB%84%E4%BB%B6.html" aria-label="08-æµç¨‹ç»„ä»¶"><!---->08-æµç¨‹ç»„ä»¶<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/09-%E8%BE%93%E5%85%A5%E7%BB%84%E4%BB%B6.html" aria-label="09-è¾“å…¥ç»„ä»¶"><!---->09-è¾“å…¥ç»„ä»¶<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/10-%E8%BE%93%E5%87%BA%E7%BB%84%E4%BB%B6.html" aria-label="10-è¾“å‡ºç»„ä»¶"><!---->10-è¾“å‡ºç»„ä»¶<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/11-%E8%BD%AC%E6%8D%A2%E7%BB%84%E4%BB%B6.html" aria-label="11-è½¬æ¢ç»„ä»¶"><!---->11-è½¬æ¢ç»„ä»¶<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/12-%E9%A9%B1%E5%8A%A8.html" aria-label="12-é©±åŠ¨"><!---->12-é©±åŠ¨<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="ğŸ¬ç®¡ç†å·¥å…·"><span class="title">ğŸ¬ç®¡ç†å·¥å…·</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¬ç®¡ç†å·¥å…·"><span class="title">ğŸ¬ç®¡ç†å·¥å…·</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ¨Git</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/git/01-Git%E4%BD%BF%E7%94%A8.html" aria-label="01-Gitä½¿ç”¨"><!---->01-Gitä½¿ç”¨<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ“Maven</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/maven/01-Maven%E4%BD%BF%E7%94%A8.html" aria-label="01-Mavenä½¿ç”¨"><!---->01-Mavenä½¿ç”¨<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/maven/02-Maven%E9%85%8D%E7%BD%AE.html" aria-label="02-Mavené…ç½®"><!---->02-Mavené…ç½®<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ¯Jenkins</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/jenkins/01-Jenkins%E9%83%A8%E7%BD%B2.html" aria-label="01-Jenkinséƒ¨ç½²"><!---->01-Jenkinséƒ¨ç½²<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/jenkins/02-Jenkisn%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html" aria-label="02-Jenkisnå¸¸è§é—®é¢˜"><!---->02-Jenkisnå¸¸è§é—®é¢˜<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="ğŸ¯ä¹¦ç±ç¬”è®°"><span class="title">ğŸ¯ä¹¦ç±ç¬”è®°</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¯ä¹¦ç±ç¬”è®°"><span class="title">ğŸ¯ä¹¦ç±ç¬”è®°</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html" aria-label="01-è®¾è®¡æ¨¡å¼ä¹‹ç¦…"><!---->01-è®¾è®¡æ¨¡å¼ä¹‹ç¦…<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/mars/docs/book/02-%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1.html" aria-label="02-é¢†åŸŸé©±åŠ¨è®¾è®¡"><!---->02-é¢†åŸŸé©±åŠ¨è®¾è®¡<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/mars/docs/book/03-JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1.html" aria-label="03-JavaScripté«˜çº§ç¨‹åºè®¾è®¡"><!---->03-JavaScripté«˜çº§ç¨‹åºè®¾è®¡<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="ğŸ¦å…¶ä»–"><span class="title">ğŸ¦å…¶ä»–</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¦å…¶ä»–"><span class="title">ğŸ¦å…¶ä»–</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ“æ ‘è“æ´¾</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/raspberry/01-RaspBerry.html" aria-label="01-RaspBerry"><!---->01-RaspBerry<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ“˜Markdown</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/markdown/01-Markdown%E8%AF%AD%E6%B3%95.html" aria-label="01-Markdownè¯­æ³•"><!---->01-Markdownè¯­æ³•<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/markdown/02-Markdown%E8%A1%A8%E6%83%85.html" aria-label="02-Markdownè¡¨æƒ…"><!---->02-Markdownè¡¨æƒ…<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/markdown/03-Markdown%E4%BB%A3%E7%A0%81%E5%9D%97%E8%AF%AD%E8%A8%80%E5%AF%B9%E7%85%A7.html" aria-label="03-Markdownä»£ç å—è¯­è¨€å¯¹ç…§"><!---->03-Markdownä»£ç å—è¯­è¨€å¯¹ç…§<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ“‡å…¶ä»–</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/other/01-HTML%20XML%20%E8%BD%AC%E4%B9%89.html" aria-label="01-HTML XML è½¬ä¹‰"><!---->01-HTML XML è½¬ä¹‰<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/other/02-GitHub.html" aria-label="02-GitHub"><!---->02-GitHub<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/other/03-Idea.html" aria-label="03-Idea"><!---->03-Idea<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/other/04-Nmon.html" aria-label="04-Nmon"><!---->04-Nmon<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/other/05-Windows.html" aria-label="05-Windows"><!---->05-Windows<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/other/06-WinSw.html" aria-label="06-WinSw"><!---->06-WinSw<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/Marswxq/mars" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/mars/" aria-label="ğŸ ä¸»é¡µ"><!---->ğŸ ä¸»é¡µ<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="ğŸ«æŠ€æœ¯ç›¸å…³"><span class="title">ğŸ«æŠ€æœ¯ç›¸å…³</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="ğŸ«æŠ€æœ¯ç›¸å…³"><span class="title">ğŸ«æŠ€æœ¯ç›¸å…³</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ»Activiti</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/activiti/01-%E6%A0%B8%E5%BF%83API.html" aria-label="01-æ ¸å¿ƒAPI"><!---->01-æ ¸å¿ƒAPI<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/activiti/02-%E7%9B%91%E5%90%AC.html" aria-label="02-ç›‘å¬"><!---->02-ç›‘å¬<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/activiti/03-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E4%BB%8B%E7%BB%8D.html" aria-label="03-æ•°æ®åº“è¡¨ä»‹ç»"><!---->03-æ•°æ®åº“è¡¨ä»‹ç»<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/activiti/04-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html" aria-label="04-å¸¸è§é—®é¢˜"><!---->04-å¸¸è§é—®é¢˜<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ“ŠJasperReport</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/jasper/01-JaspersoftStudio%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.html" aria-label="01-JaspersoftStudioå·¥å…·ä½¿ç”¨"><!---->01-JaspersoftStudioå·¥å…·ä½¿ç”¨<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/jasper/02-JasperReport%E9%9B%86%E6%88%90.html" aria-label="02-JasperReporté›†æˆ"><!---->02-JasperReporté›†æˆ<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/jasper/03-JasperReport%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html" aria-label="03-JasperReportå¸¸è§é—®é¢˜"><!---->03-JasperReportå¸¸è§é—®é¢˜<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ¬JavaScript</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/javascript/01-Node.html" aria-label="01-Node"><!---->01-Node<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/javascript/02-VuePress.html" aria-label="02-VuePress"><!---->02-VuePress<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/javascript/03-Vue%E7%BB%84%E4%BB%B6%E9%AB%98%E5%BA%A6%E5%AE%BD%E5%BA%A6.html" aria-label="03-Vueç»„ä»¶é«˜åº¦å®½åº¦"><!---->03-Vueç»„ä»¶é«˜åº¦å®½åº¦<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/javascript/04-%E6%98%BE%E7%A4%BA%E5%99%A8%E5%92%8C%E5%B1%8F%E5%B9%95%E9%AB%98%E5%BA%A6.html" aria-label="04-æ˜¾ç¤ºå™¨å’Œå±å¹•é«˜åº¦"><!---->04-æ˜¾ç¤ºå™¨å’Œå±å¹•é«˜åº¦<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/javascript/05-%E9%A1%B5%E9%9D%A2%E5%9C%B0%E5%9D%80.html" aria-label="05-é¡µé¢åœ°å€"><!---->05-é¡µé¢åœ°å€<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/javascript/06-%E5%BD%92%E7%BA%B3%E6%80%BB%E7%BB%93.html" aria-label="06-å½’çº³æ€»ç»“"><!---->06-å½’çº³æ€»ç»“<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸµJava</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/01-Java8%E7%89%B9%E6%80%A7.html" aria-label="01-Java8ç‰¹æ€§"><!---->01-Java8ç‰¹æ€§<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/02-%E5%A4%9A%E7%BA%BF%E7%A8%8B.html" aria-label="02-å¤šçº¿ç¨‹"><!---->02-å¤šçº¿ç¨‹<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/03-Jar%E5%8C%85.html" aria-label="03-JaråŒ…"><!---->03-JaråŒ…<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/04-Util.html" aria-label="04-Util"><!---->04-Util<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/05-validation%E6%B3%A8%E8%A7%A3.html" aria-label="05-validationæ³¨è§£"><!---->05-validationæ³¨è§£<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/06-%E5%8F%8D%E7%BC%96%E8%AF%91.html" aria-label="06-åç¼–è¯‘"><!---->06-åç¼–è¯‘<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/07-try-with-resource.html" aria-label="07-try-with-resource"><!---->07-try-with-resource<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/08-ThreadLocal%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F.html" aria-label="08-ThreadLocalå†…å­˜æ³„æ¼"><!---->08-ThreadLocalå†…å­˜æ³„æ¼<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/09-Jvm.html" aria-label="09-Jvm"><!---->09-Jvm<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/10-Excel.html" aria-label="10-Excel"><!---->10-Excel<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/11-Lombook.html" aria-label="11-Lombook"><!---->11-Lombook<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/12-%E6%9D%A1%E4%BB%B6%E6%B3%A8%E8%A7%A3.html" aria-label="12-æ¡ä»¶æ³¨è§£"><!---->12-æ¡ä»¶æ³¨è§£<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/13-WebMvcConfigurationSupport.html" aria-label="13-WebMvcConfigurationSupport"><!---->13-WebMvcConfigurationSupport<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/14-WebMvcConfigurer.html" aria-label="14-WebMvcConfigurer"><!---->14-WebMvcConfigurer<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/15-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81.html" aria-label="15-åˆ†å¸ƒå¼é”"><!---->15-åˆ†å¸ƒå¼é”<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/16-Caffeine.html" aria-label="16-Caffeine"><!---->16-Caffeine<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/17-DynamicDatasource.html" aria-label="17-DynamicDatasource"><!---->17-DynamicDatasource<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/18-MybatisPlus.html" aria-label="18-MybatisPlus"><!---->18-MybatisPlus<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/19-Swagger.html" aria-label="19-Swagger"><!---->19-Swagger<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/20-BeanPostProcessor.html" aria-label="20-BeanPostProcessor"><!---->20-BeanPostProcessor<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/21-Bean%E5%88%9D%E5%A7%8B%E5%8C%96.html" aria-label="21-Beanåˆå§‹åŒ–"><!---->21-Beanåˆå§‹åŒ–<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/22-ConfigurableApplicationContext.html" aria-label="22-ConfigurableApplicationContext"><!---->22-ConfigurableApplicationContext<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/23-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3.html" aria-label="23-å¸¸ç”¨æ³¨è§£"><!---->23-å¸¸ç”¨æ³¨è§£<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/24-ApplicationListener.html" aria-label="24-ApplicationListener"><!---->24-ApplicationListener<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/25-JavaDoc.html" aria-label="25-JavaDoc"><!---->25-JavaDoc<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/26-Spring-Cache.html" aria-label="26-Spring-Cache"><!---->26-Spring-Cache<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/27-StopWatch%E8%80%97%E6%97%B6%E7%BB%9F%E8%AE%A1.html" aria-label="27-StopWatchè€—æ—¶ç»Ÿè®¡"><!---->27-StopWatchè€—æ—¶ç»Ÿè®¡<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/28-Word.html" aria-label="28-Word"><!---->28-Word<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/29-Druid.html" aria-label="29-Druid"><!---->29-Druid<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/30-OpenFeign.html" aria-label="30-OpenFeign"><!---->30-OpenFeign<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/31-%E5%8F%8D%E5%B0%84%E7%9B%B8%E5%85%B3.html" aria-label="31-åå°„ç›¸å…³"><!---->31-åå°„ç›¸å…³<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/32-Fastjson.html" aria-label="32-Fastjson"><!---->32-Fastjson<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/java/33-Yaml.html" aria-label="33-Yaml"><!---->33-Yaml<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="ğŸ¢æœåŠ¡å™¨"><span class="title">ğŸ¢æœåŠ¡å™¨</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¢æœåŠ¡å™¨"><span class="title">ğŸ¢æœåŠ¡å™¨</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ’»Linux</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/linux/01-Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="01-Linuxå¸¸ç”¨å‘½ä»¤"><!---->01-Linuxå¸¸ç”¨å‘½ä»¤<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/linux/02-Linux%E8%84%9A%E6%9C%AC%E6%B1%87%E6%80%BB.html" aria-label="02-Linuxè„šæœ¬æ±‡æ€»"><!---->02-Linuxè„šæœ¬æ±‡æ€»<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/linux/03-Yum%E6%BA%90.html" aria-label="03-Yumæº"><!---->03-Yumæº<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/linux/04-Debian.html" aria-label="04-Debian"><!---->04-Debian<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/linux/05-Ubuntu.html" aria-label="05-Ubuntu"><!---->05-Ubuntu<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ‹Docker</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/01-Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="01-Dockerå¸¸ç”¨å‘½ä»¤"><!---->01-Dockerå¸¸ç”¨å‘½ä»¤<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/02-Dockerfile.html" aria-label="02-Dockerfile"><!---->02-Dockerfile<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/03-Swarm.html" aria-label="03-Swarm"><!---->03-Swarm<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/04-Stack.html" aria-label="04-Stack"><!---->04-Stack<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/05-Docker%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html" aria-label="05-Dockerå¸¸è§é—®é¢˜"><!---->05-Dockerå¸¸è§é—®é¢˜<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/06-DockerCompose.html" aria-label="06-DockerCompose"><!---->06-DockerCompose<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/07-Docker%E5%BA%94%E7%94%A8%E7%94%A8%E6%B1%87%E6%80%BB.html" aria-label="07-Dockeråº”ç”¨ç”¨æ±‡æ€»"><!---->07-Dockeråº”ç”¨ç”¨æ±‡æ€»<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/08-Kasm.html" aria-label="08-Kasm"><!---->08-Kasm<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/docker/09-Rustdesk.html" aria-label="09-Rustdesk"><!---->09-Rustdesk<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸŒNginx</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/nginx/01-Nginx.html" aria-label="01-Nginx"><!---->01-Nginx<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="ğŸ©æ•°æ®ç›¸å…³"><span class="title">ğŸ©æ•°æ®ç›¸å…³</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="ğŸ©æ•°æ®ç›¸å…³"><span class="title">ğŸ©æ•°æ®ç›¸å…³</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ“ˆæ•°æ®åº“</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/database/01-Mysql.html" aria-label="01-Mysql"><!---->01-Mysql<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/database/02-Clickhouse.html" aria-label="02-Clickhouse"><!---->02-Clickhouse<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/database/03-Doris.html" aria-label="03-Doris"><!---->03-Doris<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/database/04-DRDS.html" aria-label="04-DRDS"><!---->04-DRDS<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ“‰Kettle</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/01-%E5%85%A5%E9%97%A8.html" aria-label="01-å…¥é—¨"><!---->01-å…¥é—¨<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/02-js%E8%84%9A%E6%9C%AC.html" aria-label="02-jsè„šæœ¬"><!---->02-jsè„šæœ¬<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/03-%E4%BC%98%E5%8C%96.html" aria-label="03-ä¼˜åŒ–"><!---->03-ä¼˜åŒ–<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/04-%E8%BF%9E%E6%8E%A5%E7%BB%84%E4%BB%B6.html" aria-label="04-è¿æ¥ç»„ä»¶"><!---->04-è¿æ¥ç»„ä»¶<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/05-%E5%8F%82%E6%95%B0.html" aria-label="05-å‚æ•°"><!---->05-å‚æ•°<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/06-%E5%B7%A5%E5%85%B7.html" aria-label="06-å·¥å…·"><!---->06-å·¥å…·<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/07-%E6%97%A5%E5%BF%97.html" aria-label="07-æ—¥å¿—"><!---->07-æ—¥å¿—<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/08-%E6%B5%81%E7%A8%8B%E7%BB%84%E4%BB%B6.html" aria-label="08-æµç¨‹ç»„ä»¶"><!---->08-æµç¨‹ç»„ä»¶<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/09-%E8%BE%93%E5%85%A5%E7%BB%84%E4%BB%B6.html" aria-label="09-è¾“å…¥ç»„ä»¶"><!---->09-è¾“å…¥ç»„ä»¶<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/10-%E8%BE%93%E5%87%BA%E7%BB%84%E4%BB%B6.html" aria-label="10-è¾“å‡ºç»„ä»¶"><!---->10-è¾“å‡ºç»„ä»¶<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/11-%E8%BD%AC%E6%8D%A2%E7%BB%84%E4%BB%B6.html" aria-label="11-è½¬æ¢ç»„ä»¶"><!---->11-è½¬æ¢ç»„ä»¶<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/kettle/12-%E9%A9%B1%E5%8A%A8.html" aria-label="12-é©±åŠ¨"><!---->12-é©±åŠ¨<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="ğŸ¬ç®¡ç†å·¥å…·"><span class="title">ğŸ¬ç®¡ç†å·¥å…·</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¬ç®¡ç†å·¥å…·"><span class="title">ğŸ¬ç®¡ç†å·¥å…·</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ¨Git</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/git/01-Git%E4%BD%BF%E7%94%A8.html" aria-label="01-Gitä½¿ç”¨"><!---->01-Gitä½¿ç”¨<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ“Maven</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/maven/01-Maven%E4%BD%BF%E7%94%A8.html" aria-label="01-Mavenä½¿ç”¨"><!---->01-Mavenä½¿ç”¨<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/maven/02-Maven%E9%85%8D%E7%BD%AE.html" aria-label="02-Mavené…ç½®"><!---->02-Mavené…ç½®<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ¯Jenkins</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/jenkins/01-Jenkins%E9%83%A8%E7%BD%B2.html" aria-label="01-Jenkinséƒ¨ç½²"><!---->01-Jenkinséƒ¨ç½²<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/jenkins/02-Jenkisn%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html" aria-label="02-Jenkisnå¸¸è§é—®é¢˜"><!---->02-Jenkisnå¸¸è§é—®é¢˜<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="ğŸ¯ä¹¦ç±ç¬”è®°"><span class="title">ğŸ¯ä¹¦ç±ç¬”è®°</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¯ä¹¦ç±ç¬”è®°"><span class="title">ğŸ¯ä¹¦ç±ç¬”è®°</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html" aria-label="01-è®¾è®¡æ¨¡å¼ä¹‹ç¦…"><!---->01-è®¾è®¡æ¨¡å¼ä¹‹ç¦…<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/mars/docs/book/02-%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1.html" aria-label="02-é¢†åŸŸé©±åŠ¨è®¾è®¡"><!---->02-é¢†åŸŸé©±åŠ¨è®¾è®¡<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/mars/docs/book/03-JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1.html" aria-label="03-JavaScripté«˜çº§ç¨‹åºè®¾è®¡"><!---->03-JavaScripté«˜çº§ç¨‹åºè®¾è®¡<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="ğŸ¦å…¶ä»–"><span class="title">ğŸ¦å…¶ä»–</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¦å…¶ä»–"><span class="title">ğŸ¦å…¶ä»–</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ“æ ‘è“æ´¾</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/raspberry/01-RaspBerry.html" aria-label="01-RaspBerry"><!---->01-RaspBerry<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ“˜Markdown</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/markdown/01-Markdown%E8%AF%AD%E6%B3%95.html" aria-label="01-Markdownè¯­æ³•"><!---->01-Markdownè¯­æ³•<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/markdown/02-Markdown%E8%A1%A8%E6%83%85.html" aria-label="02-Markdownè¡¨æƒ…"><!---->02-Markdownè¡¨æƒ…<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/markdown/03-Markdown%E4%BB%A3%E7%A0%81%E5%9D%97%E8%AF%AD%E8%A8%80%E5%AF%B9%E7%85%A7.html" aria-label="03-Markdownä»£ç å—è¯­è¨€å¯¹ç…§"><!---->03-Markdownä»£ç å—è¯­è¨€å¯¹ç…§<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>ğŸ“‡å…¶ä»–</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/other/01-HTML%20XML%20%E8%BD%AC%E4%B9%89.html" aria-label="01-HTML XML è½¬ä¹‰"><!---->01-HTML XML è½¬ä¹‰<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/other/02-GitHub.html" aria-label="02-GitHub"><!---->02-GitHub<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/other/03-Idea.html" aria-label="03-Idea"><!---->03-Idea<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/other/04-Nmon.html" aria-label="04-Nmon"><!---->04-Nmon<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/other/05-Windows.html" aria-label="05-Windows"><!---->05-Windows<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/mars/docs/other/06-WinSw.html" aria-label="06-WinSw"><!---->06-WinSw<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/Marswxq/mars" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">ğŸ«æŠ€æœ¯ç›¸å…³ <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸ»Activiti <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/activiti/01-%E6%A0%B8%E5%BF%83API.html" aria-label="01-æ ¸å¿ƒAPI"><!---->01-æ ¸å¿ƒAPI<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/activiti/02-%E7%9B%91%E5%90%AC.html" aria-label="02-ç›‘å¬"><!---->02-ç›‘å¬<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/activiti/03-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E4%BB%8B%E7%BB%8D.html" aria-label="03-æ•°æ®åº“è¡¨ä»‹ç»"><!---->03-æ•°æ®åº“è¡¨ä»‹ç»<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/activiti/04-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html" aria-label="04-å¸¸è§é—®é¢˜"><!---->04-å¸¸è§é—®é¢˜<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸ“ŠJasperReport <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/jasper/01-JaspersoftStudio%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.html" aria-label="01-JaspersoftStudioå·¥å…·ä½¿ç”¨"><!---->01-JaspersoftStudioå·¥å…·ä½¿ç”¨<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/jasper/02-JasperReport%E9%9B%86%E6%88%90.html" aria-label="02-JasperReporté›†æˆ"><!---->02-JasperReporté›†æˆ<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/jasper/03-JasperReport%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html" aria-label="03-JasperReportå¸¸è§é—®é¢˜"><!---->03-JasperReportå¸¸è§é—®é¢˜<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸ¬JavaScript <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/javascript/01-Node.html" aria-label="01-Node"><!---->01-Node<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/javascript/02-VuePress.html" aria-label="02-VuePress"><!---->02-VuePress<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/javascript/03-Vue%E7%BB%84%E4%BB%B6%E9%AB%98%E5%BA%A6%E5%AE%BD%E5%BA%A6.html" aria-label="03-Vueç»„ä»¶é«˜åº¦å®½åº¦"><!---->03-Vueç»„ä»¶é«˜åº¦å®½åº¦<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/javascript/04-%E6%98%BE%E7%A4%BA%E5%99%A8%E5%92%8C%E5%B1%8F%E5%B9%95%E9%AB%98%E5%BA%A6.html" aria-label="04-æ˜¾ç¤ºå™¨å’Œå±å¹•é«˜åº¦"><!---->04-æ˜¾ç¤ºå™¨å’Œå±å¹•é«˜åº¦<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/javascript/05-%E9%A1%B5%E9%9D%A2%E5%9C%B0%E5%9D%80.html" aria-label="05-é¡µé¢åœ°å€"><!---->05-é¡µé¢åœ°å€<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/javascript/06-%E5%BD%92%E7%BA%B3%E6%80%BB%E7%BB%93.html" aria-label="06-å½’çº³æ€»ç»“"><!---->06-å½’çº³æ€»ç»“<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸµJava <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/01-Java8%E7%89%B9%E6%80%A7.html" aria-label="01-Java8ç‰¹æ€§"><!---->01-Java8ç‰¹æ€§<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/02-%E5%A4%9A%E7%BA%BF%E7%A8%8B.html" aria-label="02-å¤šçº¿ç¨‹"><!---->02-å¤šçº¿ç¨‹<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/03-Jar%E5%8C%85.html" aria-label="03-JaråŒ…"><!---->03-JaråŒ…<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/04-Util.html" aria-label="04-Util"><!---->04-Util<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/05-validation%E6%B3%A8%E8%A7%A3.html" aria-label="05-validationæ³¨è§£"><!---->05-validationæ³¨è§£<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/06-%E5%8F%8D%E7%BC%96%E8%AF%91.html" aria-label="06-åç¼–è¯‘"><!---->06-åç¼–è¯‘<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/07-try-with-resource.html" aria-label="07-try-with-resource"><!---->07-try-with-resource<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/08-ThreadLocal%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F.html" aria-label="08-ThreadLocalå†…å­˜æ³„æ¼"><!---->08-ThreadLocalå†…å­˜æ³„æ¼<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/09-Jvm.html" aria-label="09-Jvm"><!---->09-Jvm<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/10-Excel.html" aria-label="10-Excel"><!---->10-Excel<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/11-Lombook.html" aria-label="11-Lombook"><!---->11-Lombook<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/12-%E6%9D%A1%E4%BB%B6%E6%B3%A8%E8%A7%A3.html" aria-label="12-æ¡ä»¶æ³¨è§£"><!---->12-æ¡ä»¶æ³¨è§£<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/13-WebMvcConfigurationSupport.html" aria-label="13-WebMvcConfigurationSupport"><!---->13-WebMvcConfigurationSupport<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/14-WebMvcConfigurer.html" aria-label="14-WebMvcConfigurer"><!---->14-WebMvcConfigurer<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/15-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81.html" aria-label="15-åˆ†å¸ƒå¼é”"><!---->15-åˆ†å¸ƒå¼é”<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/16-Caffeine.html" aria-label="16-Caffeine"><!---->16-Caffeine<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/17-DynamicDatasource.html" aria-label="17-DynamicDatasource"><!---->17-DynamicDatasource<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/18-MybatisPlus.html" aria-label="18-MybatisPlus"><!---->18-MybatisPlus<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/19-Swagger.html" aria-label="19-Swagger"><!---->19-Swagger<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/20-BeanPostProcessor.html" aria-label="20-BeanPostProcessor"><!---->20-BeanPostProcessor<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/21-Bean%E5%88%9D%E5%A7%8B%E5%8C%96.html" aria-label="21-Beanåˆå§‹åŒ–"><!---->21-Beanåˆå§‹åŒ–<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/22-ConfigurableApplicationContext.html" aria-label="22-ConfigurableApplicationContext"><!---->22-ConfigurableApplicationContext<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/23-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3.html" aria-label="23-å¸¸ç”¨æ³¨è§£"><!---->23-å¸¸ç”¨æ³¨è§£<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/24-ApplicationListener.html" aria-label="24-ApplicationListener"><!---->24-ApplicationListener<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/25-JavaDoc.html" aria-label="25-JavaDoc"><!---->25-JavaDoc<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/26-Spring-Cache.html" aria-label="26-Spring-Cache"><!---->26-Spring-Cache<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/27-StopWatch%E8%80%97%E6%97%B6%E7%BB%9F%E8%AE%A1.html" aria-label="27-StopWatchè€—æ—¶ç»Ÿè®¡"><!---->27-StopWatchè€—æ—¶ç»Ÿè®¡<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/28-Word.html" aria-label="28-Word"><!---->28-Word<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/29-Druid.html" aria-label="29-Druid"><!---->29-Druid<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/30-OpenFeign.html" aria-label="30-OpenFeign"><!---->30-OpenFeign<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/31-%E5%8F%8D%E5%B0%84%E7%9B%B8%E5%85%B3.html" aria-label="31-åå°„ç›¸å…³"><!---->31-åå°„ç›¸å…³<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/32-Fastjson.html" aria-label="32-Fastjson"><!---->32-Fastjson<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/java/33-Yaml.html" aria-label="33-Yaml"><!---->33-Yaml<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">ğŸ¢æœåŠ¡å™¨ <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸ’»Linux <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/linux/01-Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="01-Linuxå¸¸ç”¨å‘½ä»¤"><!---->01-Linuxå¸¸ç”¨å‘½ä»¤<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/linux/02-Linux%E8%84%9A%E6%9C%AC%E6%B1%87%E6%80%BB.html" aria-label="02-Linuxè„šæœ¬æ±‡æ€»"><!---->02-Linuxè„šæœ¬æ±‡æ€»<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/linux/03-Yum%E6%BA%90.html" aria-label="03-Yumæº"><!---->03-Yumæº<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/linux/04-Debian.html" aria-label="04-Debian"><!---->04-Debian<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/linux/05-Ubuntu.html" aria-label="05-Ubuntu"><!---->05-Ubuntu<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸ‹Docker <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/docker/01-Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="01-Dockerå¸¸ç”¨å‘½ä»¤"><!---->01-Dockerå¸¸ç”¨å‘½ä»¤<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/docker/02-Dockerfile.html" aria-label="02-Dockerfile"><!---->02-Dockerfile<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/docker/03-Swarm.html" aria-label="03-Swarm"><!---->03-Swarm<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/docker/04-Stack.html" aria-label="04-Stack"><!---->04-Stack<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/docker/05-Docker%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html" aria-label="05-Dockerå¸¸è§é—®é¢˜"><!---->05-Dockerå¸¸è§é—®é¢˜<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/docker/06-DockerCompose.html" aria-label="06-DockerCompose"><!---->06-DockerCompose<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/docker/07-Docker%E5%BA%94%E7%94%A8%E7%94%A8%E6%B1%87%E6%80%BB.html" aria-label="07-Dockeråº”ç”¨ç”¨æ±‡æ€»"><!---->07-Dockeråº”ç”¨ç”¨æ±‡æ€»<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/docker/08-Kasm.html" aria-label="08-Kasm"><!---->08-Kasm<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/docker/09-Rustdesk.html" aria-label="09-Rustdesk"><!---->09-Rustdesk<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸŒNginx <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/nginx/01-Nginx.html" aria-label="01-Nginx"><!---->01-Nginx<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">ğŸ©æ•°æ®ç›¸å…³ <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸ“ˆæ•°æ®åº“ <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/database/01-Mysql.html" aria-label="01-Mysql"><!---->01-Mysql<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/database/02-Clickhouse.html" aria-label="02-Clickhouse"><!---->02-Clickhouse<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/database/03-Doris.html" aria-label="03-Doris"><!---->03-Doris<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/database/04-DRDS.html" aria-label="04-DRDS"><!---->04-DRDS<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸ“‰Kettle <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/kettle/01-%E5%85%A5%E9%97%A8.html" aria-label="01-å…¥é—¨"><!---->01-å…¥é—¨<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/kettle/02-js%E8%84%9A%E6%9C%AC.html" aria-label="02-jsè„šæœ¬"><!---->02-jsè„šæœ¬<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/kettle/03-%E4%BC%98%E5%8C%96.html" aria-label="03-ä¼˜åŒ–"><!---->03-ä¼˜åŒ–<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/kettle/04-%E8%BF%9E%E6%8E%A5%E7%BB%84%E4%BB%B6.html" aria-label="04-è¿æ¥ç»„ä»¶"><!---->04-è¿æ¥ç»„ä»¶<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/kettle/05-%E5%8F%82%E6%95%B0.html" aria-label="05-å‚æ•°"><!---->05-å‚æ•°<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/kettle/06-%E5%B7%A5%E5%85%B7.html" aria-label="06-å·¥å…·"><!---->06-å·¥å…·<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/kettle/07-%E6%97%A5%E5%BF%97.html" aria-label="07-æ—¥å¿—"><!---->07-æ—¥å¿—<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/kettle/08-%E6%B5%81%E7%A8%8B%E7%BB%84%E4%BB%B6.html" aria-label="08-æµç¨‹ç»„ä»¶"><!---->08-æµç¨‹ç»„ä»¶<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/kettle/09-%E8%BE%93%E5%85%A5%E7%BB%84%E4%BB%B6.html" aria-label="09-è¾“å…¥ç»„ä»¶"><!---->09-è¾“å…¥ç»„ä»¶<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/kettle/10-%E8%BE%93%E5%87%BA%E7%BB%84%E4%BB%B6.html" aria-label="10-è¾“å‡ºç»„ä»¶"><!---->10-è¾“å‡ºç»„ä»¶<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/kettle/11-%E8%BD%AC%E6%8D%A2%E7%BB%84%E4%BB%B6.html" aria-label="11-è½¬æ¢ç»„ä»¶"><!---->11-è½¬æ¢ç»„ä»¶<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/kettle/12-%E9%A9%B1%E5%8A%A8.html" aria-label="12-é©±åŠ¨"><!---->12-é©±åŠ¨<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">ğŸ¬ç®¡ç†å·¥å…· <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸ¨Git <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/git/01-Git%E4%BD%BF%E7%94%A8.html" aria-label="01-Gitä½¿ç”¨"><!---->01-Gitä½¿ç”¨<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸ“Maven <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/maven/01-Maven%E4%BD%BF%E7%94%A8.html" aria-label="01-Mavenä½¿ç”¨"><!---->01-Mavenä½¿ç”¨<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/maven/02-Maven%E9%85%8D%E7%BD%AE.html" aria-label="02-Mavené…ç½®"><!---->02-Mavené…ç½®<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸ¯Jenkins <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/jenkins/01-Jenkins%E9%83%A8%E7%BD%B2.html" aria-label="01-Jenkinséƒ¨ç½²"><!---->01-Jenkinséƒ¨ç½²<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/jenkins/02-Jenkisn%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html" aria-label="02-Jenkisnå¸¸è§é—®é¢˜"><!---->02-Jenkisnå¸¸è§é—®é¢˜<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active collapsible">ğŸ¯ä¹¦ç±ç¬”è®° <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item active collapsible" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html" aria-label="01-è®¾è®¡æ¨¡å¼ä¹‹ç¦…"><!---->01-è®¾è®¡æ¨¡å¼ä¹‹ç¦…<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/book/02-%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1.html" aria-label="02-é¢†åŸŸé©±åŠ¨è®¾è®¡"><!---->02-é¢†åŸŸé©±åŠ¨è®¾è®¡<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/book/03-JavaScript%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1.html" aria-label="03-JavaScripté«˜çº§ç¨‹åºè®¾è®¡"><!---->03-JavaScripté«˜çº§ç¨‹åºè®¾è®¡<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">ğŸ¦å…¶ä»– <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸ“æ ‘è“æ´¾ <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/raspberry/01-RaspBerry.html" aria-label="01-RaspBerry"><!---->01-RaspBerry<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸ“˜Markdown <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/markdown/01-Markdown%E8%AF%AD%E6%B3%95.html" aria-label="01-Markdownè¯­æ³•"><!---->01-Markdownè¯­æ³•<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/markdown/02-Markdown%E8%A1%A8%E6%83%85.html" aria-label="02-Markdownè¡¨æƒ…"><!---->02-Markdownè¡¨æƒ…<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/markdown/03-Markdown%E4%BB%A3%E7%A0%81%E5%9D%97%E8%AF%AD%E8%A8%80%E5%AF%B9%E7%85%A7.html" aria-label="03-Markdownä»£ç å—è¯­è¨€å¯¹ç…§"><!---->03-Markdownä»£ç å—è¯­è¨€å¯¹ç…§<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">ğŸ“‡å…¶ä»– <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/other/01-HTML%20XML%20%E8%BD%AC%E4%B9%89.html" aria-label="01-HTML XML è½¬ä¹‰"><!---->01-HTML XML è½¬ä¹‰<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/other/02-GitHub.html" aria-label="02-GitHub"><!---->02-GitHub<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/other/03-Idea.html" aria-label="03-Idea"><!---->03-Idea<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/other/04-Nmon.html" aria-label="04-Nmon"><!---->04-Nmon<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/other/05-Windows.html" aria-label="05-Windows"><!---->05-Windows<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item collapsible" href="/mars/docs/other/06-WinSw.html" aria-label="06-WinSw"><!---->06-WinSw<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="è®¾è®¡æ¨¡å¼ä¹‹ç¦…" tabindex="-1"><a class="header-anchor" href="#è®¾è®¡æ¨¡å¼ä¹‹ç¦…"><span>è®¾è®¡æ¨¡å¼ä¹‹ç¦…</span></a></h1><p><strong>ç›®å½•</strong></p><nav class="table-of-contents"><ul><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#_6å¤§è®¾è®¡åŸåˆ™" class="router-link-active router-link-exact-active">6å¤§è®¾è®¡åŸåˆ™</a><ul><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#å•ä¸€èŒè´£åŸåˆ™" class="router-link-active router-link-exact-active">å•ä¸€èŒè´£åŸåˆ™</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#é‡Œæ°æ›¿æ¢åŸåˆ™" class="router-link-active router-link-exact-active">é‡Œæ°æ›¿æ¢åŸåˆ™</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#ä¾èµ–å€’ç½®åŸåˆ™" class="router-link-active router-link-exact-active">ä¾èµ–å€’ç½®åŸåˆ™</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#æ¥å£éš”ç¦»åŸåˆ™" class="router-link-active router-link-exact-active">æ¥å£éš”ç¦»åŸåˆ™</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#è¿ªç±³ç‰¹æ³•åˆ™" class="router-link-active router-link-exact-active">è¿ªç±³ç‰¹æ³•åˆ™</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#å¼€é—­åŸåˆ™" class="router-link-active router-link-exact-active">å¼€é—­åŸåˆ™</a></li></ul></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#_23ç§è®¾è®¡æ¨¡å¼" class="router-link-active router-link-exact-active">23ç§è®¾è®¡æ¨¡å¼</a><ul><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#å•ä¾‹æ¨¡å¼" class="router-link-active router-link-exact-active">å•ä¾‹æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#å·¥å‚æ¨¡å¼" class="router-link-active router-link-exact-active">å·¥å‚æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#æŠ½è±¡å·¥å‚æ¨¡å¼" class="router-link-active router-link-exact-active">æŠ½è±¡å·¥å‚æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="router-link-active router-link-exact-active">æ¨¡æ¿æ–¹æ³•æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#å»ºé€ è€…æ¨¡å¼" class="router-link-active router-link-exact-active">å»ºé€ è€…æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#ä»£ç†æ¨¡å¼" class="router-link-active router-link-exact-active">ä»£ç†æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#åŸå‹æ¨¡å¼" class="router-link-active router-link-exact-active">åŸå‹æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#ä¸­ä»‹è€…æ¨¡å¼" class="router-link-active router-link-exact-active">ä¸­ä»‹è€…æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#å‘½ä»¤æ¨¡å¼" class="router-link-active router-link-exact-active">å‘½ä»¤æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#è´£ä»»é“¾æ¨¡å¼" class="router-link-active router-link-exact-active">è´£ä»»é“¾æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#è£…é¥°æ¨¡å¼" class="router-link-active router-link-exact-active">è£…é¥°æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#ç­–ç•¥æ¨¡å¼" class="router-link-active router-link-exact-active">ç­–ç•¥æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#é€‚é…å™¨æ¨¡å¼" class="router-link-active router-link-exact-active">é€‚é…å™¨æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#è¿­ä»£å™¨æ¨¡å¼" class="router-link-active router-link-exact-active">è¿­ä»£å™¨æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#ç»„åˆæ¨¡å¼" class="router-link-active router-link-exact-active">ç»„åˆæ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#è§‚å¯Ÿè€…æ¨¡å¼" class="router-link-active router-link-exact-active">è§‚å¯Ÿè€…æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#é—¨é¢æ¨¡å¼" class="router-link-active router-link-exact-active">é—¨é¢æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#å¤‡å¿˜å½•æ¨¡å¼" class="router-link-active router-link-exact-active">å¤‡å¿˜å½•æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#è®¿é—®è€…æ¨¡å¼" class="router-link-active router-link-exact-active">è®¿é—®è€…æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#çŠ¶æ€æ¨¡å¼" class="router-link-active router-link-exact-active">çŠ¶æ€æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#è§£é‡Šå™¨æ¨¡å¼" class="router-link-active router-link-exact-active">è§£é‡Šå™¨æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#äº«å…ƒæ¨¡å¼" class="router-link-active router-link-exact-active">äº«å…ƒæ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#æ¡¥æ¢æ¨¡å¼" class="router-link-active router-link-exact-active">æ¡¥æ¢æ¨¡å¼</a></li></ul></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#è®¾è®¡æ¨¡å¼pk" class="router-link-active router-link-exact-active">è®¾è®¡æ¨¡å¼PK</a><ul><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#è®¾è®¡æ¨¡å¼åˆ†ç±»" class="router-link-active router-link-exact-active">è®¾è®¡æ¨¡å¼åˆ†ç±»</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#åˆ›å»ºå‹æ¨¡å¼pk" class="router-link-active router-link-exact-active">åˆ›å»ºå‹æ¨¡å¼PK</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#ç»“æ„ç±»æ¨¡å¼pk" class="router-link-active router-link-exact-active">ç»“æ„ç±»æ¨¡å¼PK</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#è¡Œä¸ºç±»æ¨¡å¼pk" class="router-link-active router-link-exact-active">è¡Œä¸ºç±»æ¨¡å¼PK</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#è·¨æˆ˜åŒºpk" class="router-link-active router-link-exact-active">è·¨æˆ˜åŒºPK</a></li></ul></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#è®¾è®¡æ¨¡å¼æ··ç¼–" class="router-link-active router-link-exact-active">è®¾è®¡æ¨¡å¼æ··ç¼–</a><ul><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#å‘½ä»¤æ¨¡å¼-è´£ä»»é“¾æ¨¡å¼" class="router-link-active router-link-exact-active">å‘½ä»¤æ¨¡å¼+è´£ä»»é“¾æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#å·¥å‚æ–¹æ³•æ¨¡å¼-ç­–ç•¥æ¨¡å¼" class="router-link-active router-link-exact-active">å·¥å‚æ–¹æ³•æ¨¡å¼+ç­–ç•¥æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#è§‚å¯Ÿè€…æ¨¡å¼-ä¸­ä»‹è€…æ¨¡å¼" class="router-link-active router-link-exact-active">è§‚å¯Ÿè€…æ¨¡å¼+ä¸­ä»‹è€…æ¨¡å¼</a></li></ul></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#æ‰©å±•ç¯‡" class="router-link-active router-link-exact-active">æ‰©å±•ç¯‡</a><ul><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#è§„æ ¼æ¨¡å¼" class="router-link-active router-link-exact-active">è§„æ ¼æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#å¯¹è±¡æ± æ¨¡å¼" class="router-link-active router-link-exact-active">å¯¹è±¡æ± æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#é›‡å·¥æ¨¡å¼" class="router-link-active router-link-exact-active">é›‡å·¥æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#é»‘æ¿æ¨¡å¼" class="router-link-active router-link-exact-active">é»‘æ¿æ¨¡å¼</a></li><li><a aria-current="page" href="/mars/docs/book/01-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85.html#ç©ºå¯¹è±¡æ¨¡å¼" class="router-link-active router-link-exact-active">ç©ºå¯¹è±¡æ¨¡å¼</a></li></ul></li></ul></nav><p><strong>ç¤ºä¾‹ä»£ç </strong></p><p><a href="https://gitee.com/ln_mars/spring-boot-mars/tree/master/spring-boot-mars-design-pattern/src/main/java" target="_blank" rel="noopener noreferrer">è®¾è®¡æ¨¡å¼ç¤ºä¾‹ä»£ç </a></p><h2 id="_6å¤§è®¾è®¡åŸåˆ™" tabindex="-1"><a class="header-anchor" href="#_6å¤§è®¾è®¡åŸåˆ™"><span>6å¤§è®¾è®¡åŸåˆ™</span></a></h2><h3 id="å•ä¸€èŒè´£åŸåˆ™" tabindex="-1"><a class="header-anchor" href="#å•ä¸€èŒè´£åŸåˆ™"><span>å•ä¸€èŒè´£åŸåˆ™</span></a></h3><p>å•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle Responsibility Principleï¼ŒSRPï¼‰</p><h4 id="å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰"><span>å®šä¹‰</span></a></h4><p>åº”è¯¥æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåŸå› å¼•èµ·ç±»çš„å˜æ›´ã€‚</p><h4 id="è§£é‡Š" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š"><span>è§£é‡Š</span></a></h4><p>è¦æ±‚ä¸€ä¸ªæ¥å£æˆ–ç±»åªæœ‰ä¸€ä¸ªåŸå› å¼•èµ·å˜åŒ–ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ¥å£æˆ–ç±»åªæœ‰ä¸€ä¸ªèŒè´£ï¼Œå®ƒå°±è´Ÿè´£ä¸€ä»¶äº‹æƒ…ã€‚</p><h4 id="ä¼˜ç‚¹" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹"><span>ä¼˜ç‚¹</span></a></h4><ul><li>ç±»çš„å¤æ‚æ€§é™ä½ï¼Œå®ç°ä»€ä¹ˆèŒè´£éƒ½æœ‰æ¸…æ™°æ˜ç¡®çš„å®šä¹‰ï¼›</li><li>å¯è¯»æ€§æé«˜ï¼Œå¤æ‚æ€§é™ä½ï¼Œé‚£å½“ç„¶å¯è¯»æ€§æé«˜äº†ï¼›</li><li>å¯ç»´æŠ¤æ€§æé«˜ï¼Œå¯è¯»æ€§æé«˜ï¼Œé‚£å½“ç„¶æ›´å®¹æ˜“ç»´æŠ¤äº†ï¼›</li><li>å˜æ›´å¼•èµ·çš„é£é™©é™ä½ï¼Œå˜æ›´æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå¦‚æœæ¥å£çš„å•ä¸€èŒè´£åšå¾—å¥½ï¼Œä¸€ä¸ªæ¥å£ä¿®æ”¹åªå¯¹ç›¸åº”çš„å®ç°ç±»æœ‰å½±å“ï¼Œå¯¹å…¶ä»–çš„æ¥å£æ— å½±å“ï¼Œè¿™å¯¹ç³»ç»Ÿçš„æ‰©å±•æ€§ã€ç»´æŠ¤æ€§éƒ½æœ‰éå¸¸å¤§çš„å¸®åŠ©ã€‚</li></ul><h4 id="ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹"><span>ç¼ºç‚¹</span></a></h4><p>çº¯ç†è®ºåœ°æ¥è®²ï¼Œè¿™ä¸ªåŸåˆ™æ˜¯éå¸¸ä¼˜ç§€çš„ï¼Œä½†æ˜¯ç°å®æœ‰ç°å®çš„éš¾å¤„ï¼Œä½ å¿…é¡»å»è€ƒè™‘é¡¹ç›®å·¥æœŸã€æˆæœ¬ã€äººå‘˜æŠ€æœ¯æ°´å¹³ã€ç¡¬ä»¶æƒ…å†µã€ç½‘ç»œæƒ…å†µç”šè‡³æœ‰æ—¶å€™è¿˜è¦è€ƒè™‘æ”¿åºœæ”¿ç­–ã€å„æ–­åè®®ç­‰å› ç´ ã€‚</p><h4 id="æ³¨æ„" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„"><span><strong>æ³¨æ„</strong></span></a></h4><ul><li></li></ul><p>å¯¹äºæ¥å£ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡çš„æ—¶å€™ä¸€å®šè¦åšåˆ°å•ä¸€ï¼Œç±»çš„è®¾è®¡å°½é‡åšåˆ°åªæœ‰ä¸€ä¸ªåŸå› å¼•èµ·å˜åŒ–ã€‚ç”Ÿæ¬ç¡¬å¥—å•ä¸€èŒè´£åŸåˆ™ä¼šå¼•èµ·ç±»çš„å‰§å¢ï¼Œç»™ç»´æŠ¤å¸¦æ¥éå¸¸å¤šçš„éº»çƒ¦ï¼Œè€Œä¸”è¿‡åˆ†ç»†åˆ†ç±»çš„èŒè´£ä¹Ÿä¼šäººä¸ºåœ°å¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚æœ¬æ¥ä¸€ä¸ªç±»å¯ä»¥å®ç°çš„è¡Œä¸ºç¡¬è¦æ‹†æˆä¸¤ä¸ªç±»ï¼Œç„¶åå†ä½¿ç”¨èšåˆæˆ–ç»„åˆçš„æ–¹å¼è€¦åˆåœ¨ä¸€èµ·ï¼Œäººä¸ºåˆ¶é€ äº†ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚</p><ul><li>å•ä¸€èŒè´£åŸåˆ™æå‡ºäº†ä¸€ä¸ªç¼–å†™ç¨‹åºçš„æ ‡å‡†ï¼Œç”¨â€œèŒè´£â€æˆ–â€œå˜åŒ–åŸå› â€æ¥è¡¡é‡æ¥å£æˆ–ç±»è®¾è®¡å¾—æ˜¯å¦ä¼˜è‰¯ï¼Œä½†æ˜¯â€œèŒè´£â€å’Œâ€œå˜åŒ–åŸå› â€éƒ½æ˜¯ä¸å¯åº¦é‡çš„ï¼Œå› é¡¹ç›®è€Œå¼‚ï¼Œå› ç¯å¢ƒè€Œå¼‚ã€‚</li></ul><h3 id="é‡Œæ°æ›¿æ¢åŸåˆ™" tabindex="-1"><a class="header-anchor" href="#é‡Œæ°æ›¿æ¢åŸåˆ™"><span>é‡Œæ°æ›¿æ¢åŸåˆ™</span></a></h3><p>é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼ŒLSPï¼‰</p><h4 id="å®šä¹‰-1" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰-1"><span>å®šä¹‰</span></a></h4><p>æ‰€æœ‰å¼•ç”¨åŸºç±»ï¼ˆçˆ¶ç±»ï¼‰çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡ã€‚</p><h4 id="è§£é‡Š-1" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-1"><span>è§£é‡Š</span></a></h4><p>é‡ç‚¹æ˜¯javaçš„ä¸‰å¤§ç‰¹å¾ä¹‹ä¸€ï¼Œâ€œ<strong>ç»§æ‰¿</strong>â€ã€‚é‡Œæ°æ›¿æ¢åŸåˆ™å¼ºè°ƒï¼Œå¦‚æœä¸€ä¸ªç±»å‹æ˜¯ä¸€ä¸ªå­ç±»å‹ï¼Œé‚£ä¹ˆå®ƒåº”è¯¥èƒ½å¤Ÿæ›¿æ¢æ‰å®ƒçš„çˆ¶ç±»å‹ï¼Œå¹¶ä¸”ç¨‹åºçš„è¡Œä¸ºä¸åº”è¯¥å—åˆ°å½±å“ã€‚</p><blockquote><p>Javaç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚å®ƒå…è®¸ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºå­ç±»æˆ–æ´¾ç”Ÿç±»ï¼‰ç»§æ‰¿å¦ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºçˆ¶ç±»æˆ–åŸºç±»ï¼‰çš„å±æ€§å’Œæ–¹æ³•ã€‚å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„éç§æœ‰æˆå‘˜ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å­ç±»ä¸­æ·»åŠ æ–°çš„æˆå‘˜æˆ–é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚</p></blockquote><p><strong>ç»§æ‰¿è§„èŒƒ</strong></p><ol><li>å­ç±»å¿…é¡»å®Œå…¨å®ç°çˆ¶ç±»çš„æ–¹æ³•</li><li>å­ç±»å¯ä»¥æœ‰è‡ªå·±çš„ä¸ªæ€§</li><li>è¦†ç›–æˆ–å®ç°çˆ¶ç±»çš„æ–¹æ³•æ—¶è¾“å…¥å‚æ•°å¯ä»¥è¢«æ”¾å¤§</li><li>è¦†å†™æˆ–å®ç°çˆ¶ç±»çš„æ–¹æ³•æ—¶è¾“å‡ºç»“æœå¯ä»¥è¢«ç¼©å°</li></ol><h4 id="ä¼˜ç‚¹-1" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-1"><span>ä¼˜ç‚¹</span></a></h4><ul><li>ä»£ç å…±äº«ï¼Œå‡å°‘åˆ›å»ºç±»çš„å·¥ä½œé‡ï¼Œæ¯ä¸ªå­ç±»éƒ½æ‹¥æœ‰çˆ¶ç±»çš„æ–¹æ³•å’Œå±æ€§ï¼›</li><li>æé«˜ä»£ç çš„é‡ç”¨æ€§ï¼›</li><li>å­ç±»å¯ä»¥å½¢ä¼¼çˆ¶ç±»ï¼Œä½†åˆå¼‚äºçˆ¶ç±»ï¼Œâ€œé¾™ç”Ÿé¾™ï¼Œå‡¤ç”Ÿå‡¤ï¼Œè€é¼ ç”Ÿæ¥ä¼šæ‰“æ´â€æ˜¯è¯´å­æ‹¥æœ‰çˆ¶çš„â€œç§â€ï¼Œâ€œä¸–ç•Œä¸Šæ²¡æœ‰ä¸¤ç‰‡å®Œå…¨ç›¸åŒçš„å¶å­â€æ˜¯æŒ‡æ˜å­ä¸çˆ¶çš„ä¸åŒï¼›</li><li>æé«˜ä»£ç çš„å¯æ‰©å±•æ€§ï¼Œå®ç°çˆ¶ç±»çš„æ–¹æ³•å°±å¯ä»¥â€œä¸ºæ‰€æ¬²ä¸ºâ€äº†ï¼Œå›ä¸è§å¾ˆå¤šå¼€æºæ¡†æ¶çš„æ‰©å±•æ¥å£éƒ½æ˜¯é€šè¿‡ç»§æ‰¿çˆ¶ç±»æ¥å®Œæˆçš„ï¼›</li><li>æé«˜äº§å“æˆ–é¡¹ç›®çš„å¼€æ”¾æ€§ã€‚</li><li>å®ç°å¤šæ€å’ŒæŠ½è±¡çš„åŸºç¡€ã€‚</li></ul><h4 id="ç¼ºç‚¹-1" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹-1"><span>ç¼ºç‚¹</span></a></h4><ul><li>ç»§æ‰¿æ˜¯ä¾µå…¥æ€§çš„ã€‚åªè¦ç»§æ‰¿ï¼Œå°±å¿…é¡»æ‹¥æœ‰çˆ¶ç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›</li><li>é™ä½ä»£ç çš„çµæ´»æ€§ã€‚å­ç±»å¿…é¡»æ‹¥æœ‰çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œè®©å­ç±»è‡ªç”±çš„ä¸–ç•Œä¸­å¤šäº†äº›çº¦æŸï¼›</li><li>å¢å¼ºäº†è€¦åˆæ€§ã€‚å½“çˆ¶ç±»çš„å¸¸é‡ã€å˜é‡å’Œæ–¹æ³•è¢«ä¿®æ”¹æ—¶ï¼Œéœ€è¦è€ƒè™‘å­ç±»çš„ä¿®æ”¹ï¼Œè€Œä¸”åœ¨ç¼ºä¹è§„èŒƒçš„ç¯å¢ƒä¸‹ï¼Œè¿™ç§ä¿®æ”¹å¯èƒ½å¸¦æ¥éå¸¸ç³Ÿç³•çš„ç»“æœâ€”â€”å¤§æ®µçš„ä»£ç éœ€è¦é‡æ„ã€‚</li></ul><h4 id="æ³¨æ„-1" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-1"><span>æ³¨æ„</span></a></h4><ul><li>åœ¨ç±»ä¸­è°ƒç”¨å…¶ä»–ç±»æ—¶åŠ¡å¿…è¦ä½¿ç”¨çˆ¶ç±»æˆ–æ¥å£ï¼Œå¦‚æœä¸èƒ½ä½¿ç”¨çˆ¶ç±»æˆ–æ¥å£ï¼Œåˆ™è¯´æ˜ç±»çš„è®¾è®¡å·²ç»è¿èƒŒäº†LSPåŸåˆ™ã€‚</li><li>å¦‚æœå­ç±»ä¸èƒ½å®Œæ•´åœ°å®ç°çˆ¶ç±»çš„æ–¹æ³•ï¼Œæˆ–è€…çˆ¶ç±»çš„æŸäº›æ–¹æ³•åœ¨å­ç±»ä¸­å·²ç»å‘ç”Ÿâ€œç•¸å˜â€ï¼Œåˆ™å»ºè®®æ–­å¼€çˆ¶å­ç»§æ‰¿å…³ç³»ï¼Œé‡‡ç”¨ä¾èµ–ã€èšé›†ã€ç»„åˆç­‰å…³ç³»ä»£æ›¿ç»§æ‰¿ã€‚</li><li>é‡‡ç”¨é‡Œæ°æ›¿æ¢åŸåˆ™çš„ç›®çš„å°±æ˜¯å¢å¼ºç¨‹åºçš„å¥å£®æ€§ï¼Œç‰ˆæœ¬å‡çº§æ—¶ä¹Ÿå¯ä»¥ä¿æŒéå¸¸å¥½çš„å…¼å®¹æ€§ã€‚å³ä½¿å¢åŠ å­ç±»ï¼ŒåŸæœ‰å­ç±»è¿˜å¯ä»¥ç»§ç»­è¿è¡Œã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ¯ä¸ªå­ç±»å¯¹åº”ä¸åŒçš„ä¸šåŠ¡å«ä¹‰ï¼Œä½¿ç”¨çˆ¶ç±»ä½œä¸ºå‚æ•°ï¼Œä¼ é€’ä¸åŒçš„å­ç±»å®Œæˆä¸åŒçš„ä¸šåŠ¡é€»è¾‘ï¼Œéå¸¸å®Œç¾ï¼</li></ul><h3 id="ä¾èµ–å€’ç½®åŸåˆ™" tabindex="-1"><a class="header-anchor" href="#ä¾èµ–å€’ç½®åŸåˆ™"><span>ä¾èµ–å€’ç½®åŸåˆ™</span></a></h3><p>ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDependence Inversion Principle, DIPï¼‰</p><h4 id="å®šä¹‰-2" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰-2"><span>å®šä¹‰</span></a></h4><p>é‡ç‚¹æ˜¯â€œæŠ½è±¡â€ï¼ˆè¡¨ç°ä¸ºæŠ½è±¡ç±»å’Œæ¥å£ï¼‰ï¼Œä¾èµ–å€’ç½®åŸåˆ™å¼ºè°ƒé«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¨¡å—çš„å…·ä½“å®ç°ï¼Œè€Œåº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚å…·ä½“æ¥è¯´ï¼Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»åº”è¯¥é€šè¿‡æŠ½è±¡è¿›è¡Œå®šä¹‰ï¼Œè€Œä¸æ˜¯å…·ä½“çš„å®ç°ç±»ã€‚è¿™æ ·å¯ä»¥é™ä½æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜ä»£ç çš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><h4 id="è§£é‡Š-2" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-2"><span>è§£é‡Š</span></a></h4><p>ä¾èµ–å€’ç½®åŸåˆ™çš„æ ¸å¿ƒæ€æƒ³æ˜¯é¢å‘æ¥å£ç¼–ç¨‹ã€‚é«˜å±‚æ¨¡å—å®šä¹‰æŠ½è±¡æ¥å£ï¼Œä½å±‚æ¨¡å—å®ç°è¿™äº›æ¥å£ï¼Œè€Œé«˜å±‚æ¨¡å—é€šè¿‡æ¥å£ä¸ä½å±‚æ¨¡å—è¿›è¡Œäº¤äº’ã€‚è¿™æ ·ï¼Œé«˜å±‚æ¨¡å—å°±ä¸éœ€è¦ç›´æ¥ä¾èµ–äºä½å±‚æ¨¡å—çš„å…·ä½“å®ç°ï¼Œè€Œæ˜¯ä¾èµ–äºæŠ½è±¡æ¥å£ã€‚ ä»è€Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ï¼Œæé«˜ä»£ç çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><h4 id="ä¼˜ç‚¹-2" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-2"><span>ä¼˜ç‚¹</span></a></h4><p>å‡å°‘ç±»é—´çš„è€¦åˆæ€§ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œé™ä½å¹¶è¡Œå¼€å‘å¼•èµ·çš„é£é™©ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚åŒæ—¶ä¹Ÿæœ‰åŠ©äºå®ç°å¼€é—­åŸåˆ™å’Œå•ä¸€èŒè´£åŸåˆ™ã€‚</p><h4 id="ç¼ºç‚¹-2" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹-2"><span>ç¼ºç‚¹</span></a></h4><ul><li>å¢åŠ ç³»ç»Ÿå¤æ‚åº¦ã€å­¦ä¹ å’Œç†è§£æˆæœ¬</li><li>å¢åŠ å¼€å‘æˆæœ¬</li><li>è¿è¡Œæ—¶æ€§èƒ½å¼€é”€</li><li>éš¾ä»¥å¤„ç†å¤æ‚ä¾èµ–å…³ç³»</li></ul><h4 id="æ³¨æ„-2" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-2"><span>æ³¨æ„</span></a></h4><ul><li>æ¯ä¸ªç±»å°½é‡éƒ½æœ‰æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œæˆ–è€…æŠ½è±¡ç±»å’Œæ¥å£ä¸¤è€…éƒ½å…·å¤‡</li><li>å˜é‡çš„è¡¨é¢ç±»å‹å°½é‡æ˜¯æ¥å£æˆ–è€…æ˜¯æŠ½è±¡ç±»</li><li>ä»»ä½•ç±»éƒ½ä¸åº”è¯¥ä»å…·ä½“ç±»æ´¾ç”Ÿ</li><li>å°½é‡ä¸è¦è¦†å†™åŸºç±»çš„æ–¹æ³•</li><li>ç»“åˆé‡Œæ°æ›¿æ¢åŸåˆ™ä½¿ç”¨</li></ul><h3 id="æ¥å£éš”ç¦»åŸåˆ™" tabindex="-1"><a class="header-anchor" href="#æ¥å£éš”ç¦»åŸåˆ™"><span>æ¥å£éš”ç¦»åŸåˆ™</span></a></h3><p>æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼ŒISPï¼‰</p><h4 id="å®šä¹‰-3" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰-3"><span>å®šä¹‰</span></a></h4><p>å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ï¼Œç±»é—´çš„ä¾èµ–å…³ç³»åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šã€‚</p><h4 id="è§£é‡Š-3" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-3"><span>è§£é‡Š</span></a></h4><ul><li>æ¥å£éš”ç¦»åŸåˆ™å¼ºè°ƒå®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–äºå®ƒä¸éœ€è¦ä½¿ç”¨çš„æ¥å£ã€‚å…·ä½“æ¥è¯´ï¼Œä¸€ä¸ªç±»å¯¹å…¶ä»–ç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šï¼Œè€Œä¸æ˜¯ä¾èµ–äºåºå¤§è€Œå¤æ‚çš„æ¥å£ã€‚è¿™æ ·å¯ä»¥é™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯é‡ç”¨æ€§ã€‚</li><li>æ¥å£éš”ç¦»åŸåˆ™çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†åºå¤§çš„æ¥å£æ‹†åˆ†ä¸ºæ›´å°ã€æ›´å…·ä½“çš„æ¥å£ï¼Œä»¥æ»¡è¶³å®¢æˆ·ç«¯çš„å®é™…éœ€æ±‚ã€‚æ¯ä¸ªç±»åªéœ€è¦å®ç°ä¸å…¶ç›¸å…³çš„æ¥å£ï¼Œè€Œä¸éœ€è¦å®ç°æ— å…³çš„æ¥å£ã€‚è¿™æ ·å¯ä»¥é¿å…ç±»å› ä¸ºå®ç°æ— ç”¨æ¥å£è€Œæ‰¿æ‹…é¢å¤–çš„è´£ä»»å’Œå¤æ‚æ€§ã€‚</li></ul><h4 id="ä¼˜ç‚¹-3" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-3"><span>ä¼˜ç‚¹</span></a></h4><p>é€šè¿‡éµå¾ªæ¥å£éš”ç¦»åŸåˆ™ï¼Œå¯ä»¥ä½¿ç³»ç»Ÿæ›´åŠ çµæ´»ã€å¯æ‰©å±•å’Œæ˜“äºç»´æŠ¤ã€‚å®ƒæœ‰åŠ©äºå‡å°‘ä»£ç çš„å†—ä½™å’Œå¤æ‚åº¦ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯æµ‹è¯•æ€§ã€‚åŒæ—¶ï¼Œæ¥å£éš”ç¦»åŸåˆ™ä¹Ÿä¿ƒè¿›äº†æ¥å£çš„å•ä¸€èŒè´£ï¼Œä½¿æ¥å£æ›´åŠ æ¸…æ™°å’Œæ˜“äºç†è§£ã€‚</p><h4 id="ç¼ºç‚¹-3" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹-3"><span>ç¼ºç‚¹</span></a></h4><ul><li>ç›´è§‚ä¸Šå¢åŠ æ¥å£æ•°é‡ï¼Œä»è€Œæé«˜ç³»ç»Ÿå¤æ‚åº¦ï¼Œè¿›è€Œå¯¼è‡´ç³»ç»Ÿç»´æŠ¤æˆæœ¬å’Œéš¾åº¦æé«˜</li><li>è®¾è®¡å’Œç®¡ç†ï¼Œå¢åŠ å¼€å‘çš„å¤æ‚åº¦å’Œå­¦ä¹ æˆæœ¬</li></ul><h4 id="æ³¨æ„-3" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-3"><span>æ³¨æ„</span></a></h4><ul><li>æ¥å£è¦å°½é‡å°</li><li>æ¥å£è¦é«˜å†…èš</li><li>å®šåˆ¶æœåŠ¡</li><li>æ¥å£è®¾è®¡æ˜¯æœ‰é™åº¦çš„</li><li>ä¸€ä¸ªæ¥å£åªæœåŠ¡äºä¸€ä¸ªå­æ¨¡å—æˆ–ä¸šåŠ¡é€»è¾‘</li><li>é€šè¿‡ä¸šåŠ¡é€»è¾‘å‹ç¼©æ¥å£ä¸­çš„publicæ–¹æ³•</li></ul><h3 id="è¿ªç±³ç‰¹æ³•åˆ™" tabindex="-1"><a class="header-anchor" href="#è¿ªç±³ç‰¹æ³•åˆ™"><span>è¿ªç±³ç‰¹æ³•åˆ™</span></a></h3><p>è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆLaw of Demeterï¼ŒLoDï¼‰ä¹Ÿç§°ä¸ºæœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLeast Knowledge Principleï¼ŒLKPï¼‰</p><h4 id="å®šä¹‰-4" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰-4"><span>å®šä¹‰</span></a></h4><p>ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡æœ‰æœ€å°‘çš„äº†è§£</p><h4 id="è§£é‡Š-4" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-4"><span>è§£é‡Š</span></a></h4><p>é‡ç‚¹æ˜¯â€œè§£è€¦â€ï¼Œæ ¹æ®è¿ªç±³ç‰¹æ³•åˆ™ï¼Œä¸€ä¸ªå¯¹è±¡åº”è¯¥åªä¸å…¶ç›´æ¥çš„æœ‹å‹è¿›è¡Œäº¤äº’ï¼Œè€Œä¸åº”è¯¥ä¸æœ‹å‹çš„æœ‹å‹è¿›è¡Œäº¤äº’ã€‚è¿™æ„å‘³ç€ä¸€ä¸ªå¯¹è±¡åªåº”è¯¥è°ƒç”¨å…¶æˆå‘˜å˜é‡ã€æ–¹æ³•çš„å‚æ•°ã€æ–¹æ³•è¿”å›çš„å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œä¸åº”è¯¥ç›´æ¥è®¿é—®å…¶ä»–å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ã€‚</p><p>ä¸»è¦å®ç°æ‰‹æ®µæ˜¯è®¿é—®æƒé™æ§åˆ¶ï¼š<code>public</code>ã€<code>protected</code>(ç»§æ‰¿è®¿é—®æƒé™)ã€<code>private</code>(æ— æƒè®¿é—®)ã€<code>Serializable</code>(å¯åºåˆ—åŒ–æ¥å£)ã€<code>final</code> ã€<code>package</code>æƒé™ç­‰ã€‚</p><h4 id="ä¼˜ç‚¹-4" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-4"><span>ä¼˜ç‚¹</span></a></h4><p>éµå¾ªè¿ªç±³ç‰¹æ³•åˆ™å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç†è§£æ€§ï¼Œå‡å°‘ä»£ç çš„å†—ä½™å’Œå¤æ‚åº¦ã€‚å®ƒä¹Ÿæœ‰åŠ©äºå®ç°å•ä¸€èŒè´£åŸåˆ™å’Œå¼€é—­åŸåˆ™ã€‚</p><h4 id="ç¼ºç‚¹-4" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹-4"><span>ç¼ºç‚¹</span></a></h4><p>äº§ç”Ÿäº†å¤§é‡çš„ä¸­è½¬æˆ–è·³è½¬ç±»ï¼Œå¯¼è‡´ç³»ç»Ÿçš„å¤æ‚æ€§æé«˜ï¼ŒåŒæ—¶ä¹Ÿä¸ºç»´æŠ¤å¸¦æ¥äº†éš¾åº¦ã€‚</p><h4 id="æ³¨æ„-4" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-4"><span>æ³¨æ„</span></a></h4><ul><li>åªå’Œæœ‹å‹äº¤æµï¼Œä½†æœ‹å‹é—´ä¹Ÿè¦æœ‰è·ç¦»</li><li>å¦‚æœä¸€ä¸ªæ–¹æ³•æ”¾åœ¨æœ¬ç±»ä¸­ï¼Œæ—¢ä¸å¢åŠ ç±»é—´å…³ç³»ï¼Œä¹Ÿå¯¹æœ¬ç±»ä¸äº§ç”Ÿè´Ÿé¢å½±å“ï¼Œé‚£å°±æ”¾ç½®åœ¨æœ¬ç±»ä¸­ã€‚</li><li>è°¨æ…ä½¿ç”¨Serializable</li></ul><h3 id="å¼€é—­åŸåˆ™" tabindex="-1"><a class="header-anchor" href="#å¼€é—­åŸåˆ™"><span>å¼€é—­åŸåˆ™</span></a></h3><p>å¼€é—­åŸåˆ™ï¼ˆOpen-Closed Principleï¼ŒOCPï¼‰</p><h4 id="å®šä¹‰-5" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰-5"><span>å®šä¹‰</span></a></h4><p>ä¸€ä¸ªè½¯ä»¶å®ä½“å¦‚ç±»ã€æ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</p><h4 id="è§£é‡Š-5" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-5"><span>è§£é‡Š</span></a></h4><p>æ¢å¥è¯è¯´ï¼Œå½“éœ€è¦å¯¹ç³»ç»Ÿè¿›è¡Œæ‰©å±•æ—¶ï¼Œåº”è¯¥é€šè¿‡æ·»åŠ æ–°çš„ä»£ç æ¥å®ç°ï¼Œè€Œä¸æ˜¯ä¿®æ”¹å·²æœ‰çš„ä»£ç ã€‚è¿™æ ·å¯ä»¥ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>éµå¾ªå¼€é—­åŸåˆ™çš„å…³é”®æ˜¯é€šè¿‡<strong>æŠ½è±¡</strong>å’Œ<strong>å¤šæ€</strong>æ¥å®ç°å¯æ‰©å±•æ€§ã€‚é€šè¿‡å®šä¹‰æŠ½è±¡çš„æ¥å£æˆ–åŸºç±»ï¼ˆæŠ½è±¡ç±»ç­‰ï¼‰ï¼Œå¯ä»¥ä½¿ç³»ç»Ÿå¯¹æ‰©å±•å¼€æ”¾ã€‚å½“éœ€è¦æ·»åŠ æ–°çš„åŠŸèƒ½æ—¶ï¼Œåªéœ€è¦å®ç°æ–°çš„å­ç±»æˆ–è¡ç”Ÿç±»ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹ç°æœ‰çš„ä»£ç ã€‚</p><h4 id="æ³¨æ„-5" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-5"><span>æ³¨æ„</span></a></h4><p>åœ¨å®è·µä¸­è¿‡ç¨‹ä¸­ï¼Œæ¶æ„å¸ˆæˆ–é¡¹ç›®ç»ç†ä¸€æ—¦å‘ç°æœ‰å‘ç”Ÿå˜åŒ–çš„å¯èƒ½ï¼Œæˆ–è€…å˜åŒ–æ›¾ç»å‘ç”Ÿè¿‡ï¼Œåˆ™éœ€è¦è€ƒè™‘ç°æœ‰çš„æ¶æ„æ˜¯å¦å¯ä»¥è½»æ¾åœ°å®ç°è¿™ä¸€å˜åŒ–ã€‚æ¶æ„å¸ˆè®¾è®¡ä¸€å¥—ç³»ç»Ÿä¸ä»…è¦ç¬¦åˆç°æœ‰çš„éœ€æ±‚ï¼Œè¿˜è¦é€‚åº”å¯èƒ½å‘ç”Ÿçš„å˜åŒ–ï¼Œè¿™æ‰æ˜¯ä¸€ä¸ªä¼˜è‰¯çš„æ¶æ„ã€‚</p><h2 id="_23ç§è®¾è®¡æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_23ç§è®¾è®¡æ¨¡å¼"><span>23ç§è®¾è®¡æ¨¡å¼</span></a></h2><h3 id="å•ä¾‹æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å•ä¾‹æ¨¡å¼"><span>å•ä¾‹æ¨¡å¼</span></a></h3><p>ç¡®ä¿æŸä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸”è‡ªè¡Œå®ä¾‹åŒ–å¹¶å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹ã€‚</p><p>åœ¨å•ä¾‹æ¨¡å¼ä¸­ï¼Œç±»çš„æ„é€ å‡½æ•°æ˜¯ç§æœ‰çš„ï¼Œè¿™æ ·å°±é˜²æ­¢äº†å…¶ä»–ä»£ç ç›´æ¥å®ä¾‹åŒ–è¯¥ç±»ã€‚é€šè¿‡æä¾›ä¸€ä¸ªé™æ€æ–¹æ³•æˆ–å±æ€§æ¥è·å–ç±»çš„å®ä¾‹ï¼Œå…¶ä»–ä»£ç å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•æˆ–å±æ€§æ¥è·å–å”¯ä¸€çš„å®ä¾‹ã€‚</p><p>å•ä¾‹æ¨¡å¼é€šå¸¸ç”¨äºéœ€è¦å…±äº«èµ„æºçš„åœºæ™¯ï¼Œä¾‹å¦‚æ•°æ®åº“è¿æ¥ã€æ—¥å¿—è®°å½•å™¨ç­‰ã€‚é€šè¿‡ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œå¯ä»¥ç¡®ä¿åªæœ‰ä¸€ä¸ªå®ä¾‹è¢«åˆ›å»ºå’Œä½¿ç”¨ï¼Œé¿å…äº†èµ„æºæµªè´¹å’Œå†²çªã€‚</p><h4 id="å®ç°" tabindex="-1"><a class="header-anchor" href="#å®ç°"><span>å®ç°</span></a></h4><h5 id="é¥¿æ±‰æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#é¥¿æ±‰æ¨¡å¼"><span>é¥¿æ±‰æ¨¡å¼</span></a></h5><p>ä¼˜ç‚¹ï¼šè¿™ç§å†™æ³•æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯åœ¨ç±»è£…è½½çš„æ—¶å€™å°±å®Œæˆå®ä¾‹åŒ–ã€‚é¿å…äº†çº¿ç¨‹åŒæ­¥é—®é¢˜ã€‚</p><p>ç¼ºç‚¹ï¼šåœ¨ç±»è£…è½½çš„æ—¶å€™å°±å®Œæˆå®ä¾‹åŒ–ï¼Œæ²¡æœ‰è¾¾åˆ°Lazy Loadingçš„æ•ˆæœã€‚å¦‚æœä»å§‹è‡³ç»ˆä»æœªä½¿ç”¨è¿‡è¿™ä¸ªå®ä¾‹ï¼Œåˆ™ä¼šé€ æˆå†…å­˜çš„æµªè´¹ã€‚</p><ul><li>é™æ€å¸¸é‡</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token constant">INSTANCE</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é™æ€ä»£ç å—</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">static</span> <span class="token punctuation">{</span></span>
<span class="line">        instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> instance<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="æ‡’æ±‰å¼" tabindex="-1"><a class="header-anchor" href="#æ‡’æ±‰å¼"><span>æ‡’æ±‰å¼</span></a></h5><p>ä¸ºäº†è§£å†³çº¿ç¨‹ä¸å®‰å…¨é—®é¢˜ï¼Œå¯¹<code>getInstance()</code>æ–¹æ³•è¿›è¡Œäº†çº¿ç¨‹åŒæ­¥ã€‚</p><p>ç¼ºç‚¹ï¼šæ•ˆç‡å¤ªä½ï¼Œæ¯ä¸ªçº¿ç¨‹è·å¾—ç±»çš„å®ä¾‹æ—¶å€™ï¼Œæ‰§è¡Œ<code>getInstance()</code>æ–¹æ³•éƒ½è¦è¿›è¡ŒåŒæ­¥ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> singleton<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="åŒé‡æ£€æŸ¥-åŒæ£€é”" tabindex="-1"><a class="header-anchor" href="#åŒé‡æ£€æŸ¥-åŒæ£€é”"><span>åŒé‡æ£€æŸ¥ï¼ˆåŒæ£€é”ï¼‰</span></a></h5><p>Double-Checkæ¦‚å¿µå¯¹äºå¤šçº¿ç¨‹å¼€å‘è€…æ¥è¯´ä¸ä¼šé™Œç”Ÿï¼Œå¦‚ä»£ç ä¸­æ‰€ç¤ºï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä¸¤æ¬¡<code>if (singleton == null)</code> æ£€æŸ¥ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨äº†ã€‚è¿™æ ·ï¼Œå®ä¾‹åŒ–ä»£ç åªç”¨æ‰§è¡Œä¸€æ¬¡ï¼Œåé¢å†æ¬¡è®¿é—®æ—¶ï¼Œåˆ¤æ–­<code>if (singleton == null)</code>ï¼Œç›´æ¥<code>return</code>å®ä¾‹åŒ–å¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> singleton<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>singleton <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="é™æ€å†…éƒ¨ç±»" tabindex="-1"><a class="header-anchor" href="#é™æ€å†…éƒ¨ç±»"><span>é™æ€å†…éƒ¨ç±»</span></a></h5><p>é™æ€å†…éƒ¨ç±»æ–¹å¼åœ¨<code>Singleton</code>ç±»è¢«è£…è½½æ—¶å¹¶ä¸ä¼šç«‹å³å®ä¾‹åŒ–ï¼Œè€Œæ˜¯åœ¨éœ€è¦å®ä¾‹åŒ–æ—¶ï¼Œè°ƒç”¨getInstanceæ–¹æ³•ï¼Œæ‰ä¼šè£…è½½<code>SingletonInstance</code> ç±»ï¼Œä»è€Œå®Œæˆ<code>Singleton</code>çš„å®ä¾‹åŒ–ã€‚</p><p>ç±»çš„é™æ€å±æ€§åªä¼šåœ¨ç¬¬ä¸€æ¬¡åŠ è½½ç±»çš„æ—¶å€™åˆå§‹åŒ–ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œï¼ŒJVMå¸®åŠ©æˆ‘ä»¬ä¿è¯äº†çº¿ç¨‹çš„å®‰å…¨æ€§ï¼Œåœ¨ç±»è¿›è¡Œåˆå§‹åŒ–æ—¶ï¼Œåˆ«çš„çº¿ç¨‹æ˜¯æ— æ³•è¿›å…¥çš„ã€‚</p><p>ä¼˜ç‚¹ï¼šé¿å…äº†çº¿ç¨‹ä¸å®‰å…¨ï¼Œå»¶è¿ŸåŠ è½½ï¼Œæ•ˆç‡é«˜ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonInstance</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> <span class="token constant">INSTANCE</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token class-name">SingletonInstance</span><span class="token punctuation">.</span><span class="token constant">INSTANCE</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="æšä¸¾" tabindex="-1"><a class="header-anchor" href="#æšä¸¾"><span>æšä¸¾</span></a></h5><p>ä»…èƒ½é¿å…å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œè€Œä¸”è¿˜èƒ½é˜²æ­¢ååºåˆ—åŒ–é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token constant">INSTANCE</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">whateverMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å·¥å‚æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å·¥å‚æ¨¡å¼"><span>å·¥å‚æ¨¡å¼</span></a></h3><p>å®šä¹‰ä¸€ä¸ªç”¨äº<strong>åˆ›å»º</strong>å¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚å·¥å‚æ–¹æ³•ä½¿ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚</p><h4 id="è§£é‡Š-6" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-6"><span>è§£é‡Š</span></a></h4><p>å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§<strong>åˆ›å»ºå‹è®¾è®¡æ¨¡å¼</strong>ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼Œè€Œæ— éœ€å°†å¯¹è±¡çš„å…·ä½“ç±»æš´éœ²ç»™è°ƒç”¨æ–¹ã€‚å®ƒé€šè¿‡å®šä¹‰ä¸€ä¸ªå…±åŒçš„æ¥å£æˆ–åŸºç±»æ¥åˆ›å»ºå¯¹è±¡ï¼Œç„¶åç”±å…·ä½“çš„å·¥å‚ç±»æ¥å®ç°å¯¹è±¡çš„åˆ›å»ºã€‚ å·¥å‚æ¨¡å¼çš„ä¸»è¦ç›®çš„æ˜¯å°†å¯¹è±¡çš„åˆ›å»ºä¸ä½¿ç”¨åˆ†ç¦»ï¼Œä½¿å¾—ä»£ç æ›´åŠ çµæ´»ã€å¯æ‰©å±•å’Œå¯ç»´æŠ¤ã€‚é€šè¿‡ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œå¯ä»¥åœ¨ä¸ä¿®æ”¹ç°æœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œè½»æ¾æ·»åŠ æ–°çš„äº§å“ç±»å‹æˆ–å˜ä½“ã€‚</p><h4 id="ä¼˜ç‚¹-5" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-5"><span>ä¼˜ç‚¹</span></a></h4><ul><li>é¦–å…ˆï¼Œè‰¯å¥½çš„å°è£…æ€§ï¼Œä»£ç ç»“æ„æ¸…æ™°ã€‚</li></ul><p>ä¸€ä¸ªå¯¹è±¡åˆ›å»ºæ˜¯æœ‰æ¡ä»¶çº¦æŸçš„ï¼Œå¦‚ä¸€ä¸ªè°ƒç”¨è€…éœ€è¦ä¸€ä¸ªå…·ä½“çš„äº§å“å¯¹è±¡ï¼Œåªè¦çŸ¥é“è¿™ä¸ªäº§å“çš„ç±»åï¼ˆæˆ–çº¦æŸå­—ç¬¦ä¸²ï¼‰å°±å¯ä»¥äº†ï¼Œä¸ç”¨çŸ¥é“åˆ›å»ºå¯¹è±¡çš„è‰°è¾›è¿‡ç¨‹ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆã€‚</p><ul><li>å…¶æ¬¡ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼çš„æ‰©å±•æ€§éå¸¸ä¼˜ç§€ã€‚</li></ul><p>åœ¨å¢åŠ äº§å“ç±»çš„æƒ…å†µä¸‹ï¼Œåªè¦é€‚å½“åœ°ä¿®æ”¹å…·ä½“çš„å·¥å‚ç±»æˆ–æ‰©å±•ä¸€ä¸ªå·¥å‚ç±»ï¼Œå°±å¯ä»¥å®Œæˆâ€œæ‹¥æŠ±å˜åŒ–â€ã€‚ä¾‹å¦‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œéœ€è¦å¢åŠ ä¸€ä¸ªæ£•è‰²äººç§ï¼Œåˆ™åªéœ€è¦å¢åŠ ä¸€ä¸ªBrownHumanç±»ï¼Œå·¥å‚ç±»ä¸ç”¨ä»»ä½•ä¿®æ”¹å°±å¯å®Œæˆç³»ç»Ÿæ‰©å±•ã€‚</p><ul><li>å†æ¬¡ï¼Œå±è”½äº§å“ç±»ã€‚</li></ul><p>è¿™ä¸€ç‰¹ç‚¹éå¸¸é‡è¦ï¼Œäº§å“ç±»çš„å®ç°å¦‚ä½•å˜åŒ–ï¼Œè°ƒç”¨è€…éƒ½ä¸éœ€è¦å…³å¿ƒï¼Œå®ƒåªéœ€è¦å…³å¿ƒäº§å“çš„æ¥å£ï¼Œåªè¦æ¥å£ä¿æŒä¸å˜ï¼Œç³»ç»Ÿä¸­çš„ä¸Šå±‚æ¨¡å—å°±ä¸è¦å‘ç”Ÿå˜åŒ–ã€‚å› ä¸ºäº§å“ç±»çš„å®ä¾‹åŒ–å·¥ä½œæ˜¯ç”±å·¥å‚ç±»è´Ÿè´£çš„ï¼Œä¸€ä¸ªäº§å“å¯¹è±¡å…·ä½“ç”±å“ªä¸€ä¸ªäº§å“ç”Ÿæˆæ˜¯ç”±å·¥å‚ç±»å†³å®šçš„ã€‚åœ¨æ•°æ®åº“å¼€å‘ä¸­ï¼Œå¤§å®¶åº”è¯¥èƒ½å¤Ÿæ·±åˆ»ä½“ä¼šåˆ°å·¥å‚æ–¹æ³•æ¨¡å¼çš„å¥½å¤„ï¼šå¦‚æœä½¿ç”¨JDBCè¿æ¥æ•°æ®åº“ï¼Œæ•°æ®åº“ä»MySQLåˆ‡æ¢åˆ°Oracleï¼Œéœ€è¦æ”¹åŠ¨çš„åœ°æ–¹å°±æ˜¯åˆ‡æ¢ä¸€ä¸‹é©±åŠ¨åç§°ï¼ˆå‰ææ¡ä»¶æ˜¯SQLè¯­å¥æ˜¯æ ‡å‡†è¯­å¥ï¼‰ï¼Œå…¶ä»–çš„éƒ½ä¸éœ€è¦ä¿®æ”¹ï¼Œè¿™æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çµæ´»æ€§çš„ä¸€ä¸ªç›´æ¥æ¡ˆä¾‹ã€‚</p><ul><li>æœ€åï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯å…¸å‹çš„è§£è€¦æ¡†æ¶ã€‚</li></ul><p>é«˜å±‚æ¨¡å—å€¼éœ€è¦çŸ¥é“äº§å“çš„æŠ½è±¡ç±»ï¼Œå…¶ä»–çš„å®ç°ç±»éƒ½ä¸ç”¨å…³å¿ƒï¼Œç¬¦åˆè¿ªç±³ç‰¹æ³•åˆ™ï¼Œæˆ‘ä¸éœ€è¦çš„å°±ä¸è¦å»äº¤æµï¼›ä¹Ÿç¬¦åˆä¾èµ–å€’ç½®åŸåˆ™ï¼Œåªä¾èµ–äº§å“ç±»çš„æŠ½è±¡ï¼›å½“ç„¶ä¹Ÿç¬¦åˆé‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œä½¿ç”¨äº§å“å­ç±»æ›¿æ¢äº§å“çˆ¶ç±»ï¼Œæ²¡é—®é¢˜ï¼</p><h4 id="å®ç°-1" tabindex="-1"><a class="header-anchor" href="#å®ç°-1"><span>å®ç°</span></a></h4><ul><li>é€šç”¨æ–¹å¼</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// äº§å“</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“äº§å“A</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteProductA</span> <span class="token keyword">implements</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å…·ä½“äº§å“Açš„æ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“äº§å“B</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteProductB</span> <span class="token keyword">implements</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å…·ä½“äº§å“Bçš„æ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å·¥å‚</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Factory</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Product</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“å·¥å‚A</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteFactoryA</span> <span class="token keyword">implements</span> <span class="token class-name">Factory</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Product</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteProductA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“å·¥å‚B</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteFactoryB</span> <span class="token keyword">implements</span> <span class="token class-name">Factory</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Product</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteProductB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ä½¿ç”¨å·¥å‚æ¨¡å¼</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FactoryPattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Factory</span> factoryA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteFactoryA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Product</span> productA <span class="token operator">=</span> factoryA<span class="token punctuation">.</span><span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        productA<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Factory</span> factoryB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteFactoryB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Product</span> productB <span class="token operator">=</span> factoryB<span class="token punctuation">.</span><span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        productB<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Springboot è‡ªåŠ¨æ³¨å…¥</li></ul><p>é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªæŠ½è±¡äº§å“æ¥å£ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œåˆ›å»ºå…·ä½“äº§å“ç±»å®ç°è¯¥æ¥å£ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Component</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteProductA</span> <span class="token keyword">implements</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å…·ä½“äº§å“Açš„æ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Component</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteProductB</span> <span class="token keyword">implements</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å…·ä½“äº§å“Bçš„æ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªç®€å•å·¥å‚ç±»ï¼Œåˆ©ç”¨Springçš„è‡ªåŠ¨æ³¨å…¥ç‰¹æ€§æ¥è·å–å…·ä½“äº§å“å®ä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Component</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleFactory</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> productMap<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Autowired</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">SimpleFactory</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> products<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        productMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Product</span> product <span class="token operator">:</span> products<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            productMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> product<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Product</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Product</span> product <span class="token operator">=</span> productMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>product <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;æ— æ•ˆçš„äº§å“ç±»å‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">return</span> product<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œé€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥äº†æ‰€æœ‰å®ç°äº†Productæ¥å£çš„å…·ä½“äº§å“ç±»ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åœ¨ä¸€ä¸ªMapä¸­ï¼Œä»¥äº§å“ç±»åä½œä¸ºé”®ã€‚ç„¶åï¼Œé€šè¿‡createProductæ–¹æ³•æ ¹æ®ä¼ å…¥çš„äº§å“ç±»å‹è·å–ç›¸åº”çš„äº§å“å®ä¾‹ã€‚ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡@Autowired Map&lt;String, Product&gt; products æ–¹å¼å®ç°ï¼Œä¸Šé¢å®ç°ç­‰åŒäºå¦‚ä¸‹æ–¹å¼</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Component</span>  </span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleFactory</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Autowired</span></span>
<span class="line">    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> productMap<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Product</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Product</span> product <span class="token operator">=</span> productMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>product <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;æ— æ•ˆçš„äº§å“ç±»å‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">return</span> product<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼Œåœ¨éœ€è¦ä½¿ç”¨äº§å“çš„åœ°æ–¹ï¼Œå¯ä»¥é€šè¿‡è‡ªåŠ¨æ³¨å…¥SimpleFactoryæ¥åˆ›å»ºäº§å“ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@RestController</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductController</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">SimpleFactory</span> factory<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Autowired</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">ProductController</span><span class="token punctuation">(</span><span class="token class-name">SimpleFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>factory <span class="token operator">=</span> factory<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/{type}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getProduct</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Product</span> product <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createProduct</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        product<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string">&quot;äº§å“æ“ä½œå®Œæˆ&quot;</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æŠ½è±¡å·¥å‚æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#æŠ½è±¡å·¥å‚æ¨¡å¼"><span>æŠ½è±¡å·¥å‚æ¨¡å¼</span></a></h3><p>ä¸ºåˆ›å»ºä¸€ç»„ç›¸å…³æˆ–ç›¸äº’ä¾èµ–çš„å¯¹è±¡æä¾›ä¸€ä¸ªæ¥å£ï¼Œè€Œä¸”æ— é¡»æŒ‡å®šå®ƒä»¬çš„å…·ä½“ç±»ã€‚</p><h4 id="è§£é‡Š-7" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-7"><span>è§£é‡Š</span></a></h4><p>æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„å‡çº§ç‰ˆæœ¬ï¼Œæä¾›äº†ä¸€ç§åˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå…·ä½“çš„ç±»ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼å¯ä»¥åˆ›å»ºä¸€ç»„ç›¸å…³çš„äº§å“å¯¹è±¡ï¼Œè¿™äº›äº§å“å¯¹è±¡é€šå¸¸å±äºåŒä¸€ä¸ªäº§å“æ—ã€‚</p><h5 id="ä¼˜ç‚¹-6" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-6"><span>ä¼˜ç‚¹</span></a></h5><p>ä½¿ç”¨æŠ½è±¡å·¥å‚æ—¶ï¼Œæˆ‘ä»¬åªè¦çŸ¥é“å®ƒçš„å·¥å‚æ–¹æ³•å°±å¯ä»¥ç›´æ¥äº§ç”Ÿä¸€ä¸ªäº§å“å¯¹è±¡ï¼Œæ— é¡»å…³å¿ƒå®ƒçš„å®ç°ç±»ã€‚</p><ul><li>å°è£…æ€§ï¼Œæ¯ä¸ªäº§å“çš„å®ç°ç±»ä¸æ˜¯é«˜å±‚æ¨¡å—è¦å…³å¿ƒçš„ï¼Œå®ƒè¦å…³å¿ƒçš„æ˜¯ä»€ä¹ˆï¼Ÿ</li></ul><p>æ˜¯æ¥å£ï¼Œæ˜¯æŠ½è±¡ï¼Œå®ƒä¸å…³å¿ƒå¯¹è±¡æ˜¯å¦‚ä½•åˆ›å»ºå‡ºæ¥ï¼Œè¿™ç”±è°è´Ÿè´£å‘¢ï¼Ÿå·¥å‚ç±»ï¼Œåªè¦çŸ¥é“å·¥å‚ç±»æ˜¯è°ï¼Œæˆ‘å°±èƒ½åˆ›å»ºå‡ºä¸€ä¸ªéœ€è¦çš„å¯¹è±¡ï¼Œçœæ—¶çœåŠ›ï¼Œä¼˜ç§€è®¾è®¡å°±åº”è¯¥å¦‚æ­¤ã€‚</p><ul><li>äº§å“æ—å†…çš„çº¦æŸä¸ºéå…¬å¼€çŠ¶æ€ã€‚</li></ul><p>ä¾‹å¦‚ç”Ÿäº§ç”·å¥³æ¯”ä¾‹çš„é—®é¢˜ä¸Šï¼ŒçŒœæƒ³å¥³å¨²å¨˜å¨˜è‚¯å®šæœ‰è‡ªå·±çš„æ‰“ç®—ï¼Œä¸èƒ½è®©å¥³ç››ç”·è¡°ï¼Œå¦åˆ™å¥³æ€§çš„ä¼˜ç‚¹ä¸å°±ä½“ç°ä¸å‡ºæ¥äº†å—ï¼Ÿé‚£åœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œå°±åº”è¯¥æœ‰è¿™æ ·çš„ä¸€ä¸ªçº¦æŸï¼šæ¯ç”Ÿäº§1ä¸ªå¥³æ€§ï¼Œå°±åŒæ—¶ç”Ÿäº§å‡º1.2ä¸ªç”·æ€§ï¼Œè¿™æ ·çš„ç”Ÿäº§è¿‡ç¨‹å¯¹è°ƒç”¨å·¥å‚ç±»çš„é«˜å±‚æ¨¡å—æ¥è¯´æ˜¯é€æ˜çš„ï¼Œå®ƒä¸éœ€è¦çŸ¥é“è¿™ä¸ªçº¦æŸï¼Œæˆ‘å°±æ˜¯è¦ä¸€ä¸ªé»„è‰²å¥³æ€§äº§å“å°±å¯ä»¥äº†ï¼Œå…·ä½“çš„äº§å“æ—å†…çš„çº¦æŸæ˜¯åœ¨å·¥å‚å†…å®ç°çš„ã€‚</p><h4 id="å®ç°-2" tabindex="-1"><a class="header-anchor" href="#å®ç°-2"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/AbstractFactory.png" alt="æŠ½è±¡å·¥å‚ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// 1.ä¸ºå½¢çŠ¶åˆ›å»ºä¸€ä¸ªæ¥å£ã€‚</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2.åˆ›å»ºå®ç°æ¥å£çš„å®ä½“ç±»ã€‚</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token keyword">implements</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">   <span class="token annotation punctuation">@Override</span></span>
<span class="line">   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Inside Rectangle::draw() method.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token keyword">implements</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span></span>
<span class="line"> </span>
<span class="line">   <span class="token annotation punctuation">@Override</span></span>
<span class="line">   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Inside Square::draw() method.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token keyword">implements</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span></span>
<span class="line"> </span>
<span class="line">   <span class="token annotation punctuation">@Override</span></span>
<span class="line">   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Inside Circle::draw() method.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3.ä¸ºé¢œè‰²åˆ›å»ºä¸€ä¸ªæ¥å£ã€‚</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">void</span> <span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 4.åˆ›å»ºå®ç°æ¥å£çš„å®ä½“ç±»ã€‚</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Red</span> <span class="token keyword">implements</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span></span>
<span class="line"> </span>
<span class="line">   <span class="token annotation punctuation">@Override</span></span>
<span class="line">   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Inside Red::fill() method.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Green</span> <span class="token keyword">implements</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span></span>
<span class="line"> </span>
<span class="line">   <span class="token annotation punctuation">@Override</span></span>
<span class="line">   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Inside Green::fill() method.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Green</span> <span class="token keyword">implements</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span></span>
<span class="line"> </span>
<span class="line">   <span class="token annotation punctuation">@Override</span></span>
<span class="line">   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Inside Green::fill() method.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 5.ä¸º Color å’Œ Shape å¯¹è±¡åˆ›å»ºæŠ½è±¡ç±»æ¥è·å–å·¥å‚ã€‚</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractFactory</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Color</span> <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token class-name">String</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Shape</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token class-name">String</span> shape<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 6.åˆ›å»ºæ‰©å±•äº† AbstractFactory çš„å·¥å‚ç±»ï¼ŒåŸºäºç»™å®šçš„ä¿¡æ¯ç”Ÿæˆå®ä½“ç±»çš„å¯¹è±¡ã€‚</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShapeFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractFactory</span> <span class="token punctuation">{</span></span>
<span class="line">    </span>
<span class="line">   <span class="token annotation punctuation">@Override</span></span>
<span class="line">   <span class="token keyword">public</span> <span class="token class-name">Shape</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token class-name">String</span> shapeType<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">if</span><span class="token punctuation">(</span>shapeType <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">         <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span>        </span>
<span class="line">      <span class="token keyword">if</span><span class="token punctuation">(</span>shapeType<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">&quot;CIRCLE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">         <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>shapeType<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">&quot;RECTANGLE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">         <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>shapeType<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">&quot;SQUARE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">         <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line">   </span>
<span class="line">   <span class="token annotation punctuation">@Override</span></span>
<span class="line">   <span class="token keyword">public</span> <span class="token class-name">Color</span> <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token class-name">String</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ColorFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractFactory</span> <span class="token punctuation">{</span></span>
<span class="line">    </span>
<span class="line">   <span class="token annotation punctuation">@Override</span></span>
<span class="line">   <span class="token keyword">public</span> <span class="token class-name">Shape</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token class-name">String</span> shapeType<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line">   </span>
<span class="line">   <span class="token annotation punctuation">@Override</span></span>
<span class="line">   <span class="token keyword">public</span> <span class="token class-name">Color</span> <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token class-name">String</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">if</span><span class="token punctuation">(</span>color <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">         <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span>        </span>
<span class="line">      <span class="token keyword">if</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">&quot;RED&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">         <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Red</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">&quot;GREEN&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">         <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Green</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">&quot;BLUE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">         <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Blue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 7.åˆ›å»ºä¸€ä¸ªå·¥å‚åˆ›é€ å™¨/ç”Ÿæˆå™¨ç±»ï¼Œé€šè¿‡ä¼ é€’å½¢çŠ¶æˆ–é¢œè‰²ä¿¡æ¯æ¥è·å–å·¥å‚ã€‚</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FactoryProducer</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">AbstractFactory</span> <span class="token function">getFactory</span><span class="token punctuation">(</span><span class="token class-name">String</span> choice<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">if</span><span class="token punctuation">(</span>choice<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">&quot;SHAPE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">         <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ShapeFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>choice<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">&quot;COLOR&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">         <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ColorFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 8.ä½¿ç”¨ FactoryProducer æ¥è·å– AbstractFactoryï¼Œé€šè¿‡ä¼ é€’ç±»å‹ä¿¡æ¯æ¥è·å–å®ä½“ç±»çš„å¯¹è±¡ã€‚</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AbstractFactoryPatternDemo</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"> </span>
<span class="line">      <span class="token comment">//è·å–å½¢çŠ¶å·¥å‚</span></span>
<span class="line">      <span class="token class-name">AbstractFactory</span> shapeFactory <span class="token operator">=</span> <span class="token class-name">FactoryProducer</span><span class="token punctuation">.</span><span class="token function">getFactory</span><span class="token punctuation">(</span><span class="token string">&quot;SHAPE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">      <span class="token comment">//è·å–å½¢çŠ¶ä¸º Circle çš„å¯¹è±¡</span></span>
<span class="line">      <span class="token class-name">Shape</span> shape1 <span class="token operator">=</span> shapeFactory<span class="token punctuation">.</span><span class="token function">getShape</span><span class="token punctuation">(</span><span class="token string">&quot;CIRCLE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">      <span class="token comment">//è°ƒç”¨ Circle çš„ draw æ–¹æ³•</span></span>
<span class="line">      shape1<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">      <span class="token comment">//è·å–å½¢çŠ¶ä¸º Rectangle çš„å¯¹è±¡</span></span>
<span class="line">      <span class="token class-name">Shape</span> shape2 <span class="token operator">=</span> shapeFactory<span class="token punctuation">.</span><span class="token function">getShape</span><span class="token punctuation">(</span><span class="token string">&quot;RECTANGLE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">      <span class="token comment">//è°ƒç”¨ Rectangle çš„ draw æ–¹æ³•</span></span>
<span class="line">      shape2<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      </span>
<span class="line">      <span class="token comment">//è·å–å½¢çŠ¶ä¸º Square çš„å¯¹è±¡</span></span>
<span class="line">      <span class="token class-name">Shape</span> shape3 <span class="token operator">=</span> shapeFactory<span class="token punctuation">.</span><span class="token function">getShape</span><span class="token punctuation">(</span><span class="token string">&quot;SQUARE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">      <span class="token comment">//è°ƒç”¨ Square çš„ draw æ–¹æ³•</span></span>
<span class="line">      shape3<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">      <span class="token comment">//è·å–é¢œè‰²å·¥å‚</span></span>
<span class="line">      <span class="token class-name">AbstractFactory</span> colorFactory <span class="token operator">=</span> <span class="token class-name">FactoryProducer</span><span class="token punctuation">.</span><span class="token function">getFactory</span><span class="token punctuation">(</span><span class="token string">&quot;COLOR&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">      <span class="token comment">//è·å–é¢œè‰²ä¸º Red çš„å¯¹è±¡</span></span>
<span class="line">      <span class="token class-name">Color</span> color1 <span class="token operator">=</span> colorFactory<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token string">&quot;RED&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">      <span class="token comment">//è°ƒç”¨ Red çš„ fill æ–¹æ³•</span></span>
<span class="line">      color1<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">      <span class="token comment">//è·å–é¢œè‰²ä¸º Green çš„å¯¹è±¡</span></span>
<span class="line">      <span class="token class-name">Color</span> color2 <span class="token operator">=</span> colorFactory<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token string">&quot;GREEN&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">      <span class="token comment">//è°ƒç”¨ Green çš„ fill æ–¹æ³•</span></span>
<span class="line">      color2<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">      <span class="token comment">//è·å–é¢œè‰²ä¸º Blue çš„å¯¹è±¡</span></span>
<span class="line">      <span class="token class-name">Color</span> color3 <span class="token operator">=</span> colorFactory<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token string">&quot;BLUE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">      <span class="token comment">//è°ƒç”¨ Blue çš„ fill æ–¹æ³•</span></span>
<span class="line">      color3<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><span>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</span></a></h3><p>å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„æ¡†æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚</p><h4 id="è§£é‡Š-8" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-8"><span>è§£é‡Š</span></a></h4><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç¡®å®éå¸¸ç®€å•ï¼Œä»…ä»…ä½¿ç”¨äº†Javaçš„ç»§æ‰¿æœºåˆ¶ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªåº”ç”¨éå¸¸å¹¿æ³›çš„æ¨¡å¼ã€‚å…¶ä¸­ï¼ŒAbstractClasså«åšæŠ½è±¡æ¨¡æ¿ï¼Œå®ƒçš„æ–¹æ³•åˆ†ä¸ºä¸¤ç±»</p><ul><li>åŸºæœ¬æ–¹æ³•ã€‚åŸºæœ¬æ–¹æ³•ä¹Ÿå«åšåŸºæœ¬æ“ä½œï¼Œæ˜¯ç”±å­ç±»å®ç°çš„æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨æ¨¡æ¿æ–¹æ³•è¢«è°ƒç”¨ã€‚</li><li>æ¨¡æ¿æ–¹æ³•ã€‚å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å‡ ä¸ªï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªå…·ä½“æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå®ç°å¯¹åŸºæœ¬æ–¹æ³•çš„è°ƒåº¦ï¼Œå®Œæˆå›ºå®šçš„é€»è¾‘ã€‚</li></ul><h4 id="ä¼˜ç‚¹-7" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-7"><span>ä¼˜ç‚¹</span></a></h4><ul><li>å°è£…ä¸å˜éƒ¨åˆ†ï¼Œæ‰©å±•å¯å˜éƒ¨åˆ†</li><li>æå–å…¬å…±éƒ¨åˆ†ä»£ç ï¼Œä¾¿äºç»´æŠ¤</li><li>è¡Œä¸ºç”±çˆ¶ç±»æ§åˆ¶ï¼Œå­ç±»å®ç° ï¼ˆå¼€é—­åŸåˆ™ï¼‰</li></ul><h4 id="å®ç°-3" tabindex="-1"><a class="header-anchor" href="#å®ç°-3"><span>å®ç°</span></a></h4><p>åœ¨Javaä¸­ï¼Œå¯ä»¥ä½¿ç”¨æŠ½è±¡ç±»å’Œå…·ä½“æ–¹æ³•æ¥å®ç°æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚æŠ½è±¡ç±»å®šä¹‰äº†ç®—æ³•çš„éª¨æ¶ï¼ŒåŒ…å«äº†ä¸€äº›å…·ä½“æ–¹æ³•å’ŒæŠ½è±¡æ–¹æ³•ã€‚å…·ä½“æ–¹æ³•åœ¨æŠ½è±¡ç±»ä¸­å·²ç»å®ç°ï¼Œè€ŒæŠ½è±¡æ–¹æ³•åˆ™éœ€è¦åœ¨å­ç±»ä¸­è¿›è¡Œå…·ä½“å®ç°ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// æ¨¡æ¿æ–¹æ³•ï¼Œå®šä¹‰äº†ç®—æ³•çš„éª¨æ¶</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">templateMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// è°ƒç”¨å…·ä½“æ–¹æ³•</span></span>
<span class="line">        <span class="token function">concreteMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// è°ƒç”¨æŠ½è±¡æ–¹æ³•ï¼Œç”±å­ç±»å®ç°</span></span>
<span class="line">        <span class="token function">abstractMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// è°ƒç”¨é’©å­æ–¹æ³•ï¼Œç”±å­ç±»å†³å®šæ˜¯å¦é‡å†™</span></span>
<span class="line">        <span class="token function">hookMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// å…·ä½“æ–¹æ³•ï¼Œå·²ç»å®ç°</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">concreteMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;This is concrete method 1.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// æŠ½è±¡æ–¹æ³•ï¼Œç”±å­ç±»å®ç°</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">abstractMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// é’©å­æ–¹æ³•ï¼Œç”±å­ç±»å†³å®šæ˜¯å¦é‡å†™</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hookMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// é»˜è®¤å®ç°ä¸ºç©º</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteClass</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// å®ç°æŠ½è±¡æ–¹æ³•</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">abstractMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;This is abstract method 1 in ConcreteClass.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// é‡å†™é’©å­æ–¹æ³•</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hookMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;This is hook method in ConcreteClass.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">AbstractClass</span> abstractClass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        abstractClass<span class="token punctuation">.</span><span class="token function">templateMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å»ºé€ è€…æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å»ºé€ è€…æ¨¡å¼"><span>å»ºé€ è€…æ¨¡å¼</span></a></h3><p>å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚</p><h4 id="è§£é‡Š-9" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-9"><span>è§£é‡Š</span></a></h4><p>å»ºé€ è€…æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œç”¨äºåˆ›å»ºå¤æ‚å¯¹è±¡ã€‚å®ƒå°†å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹æ‹†åˆ†æˆå¤šä¸ªæ­¥éª¤ï¼Œå¹¶ä¸”å¯ä»¥æŒ‰éœ€é€‰æ‹©æ­¥éª¤çš„æ–¹å¼æ¥æ„å»ºå¯¹è±¡ã€‚ å»ºé€ è€…æ¨¡å¼çš„ä¸»è¦ç›®çš„æ˜¯å°†å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹ä¸è¡¨ç¤ºåˆ†ç¦»ï¼Œä»¥ä¾¿ç›¸åŒçš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚å®ƒæä¾›äº†ä¸€ç§çµæ´»çš„æ–¹å¼æ¥æ„å»ºå¤æ‚å¯¹è±¡ï¼ŒåŒæ—¶éšè—äº†æ„å»ºè¿‡ç¨‹çš„ç»†èŠ‚ã€‚</p><h4 id="ä¼˜ç‚¹-8" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-8"><span>ä¼˜ç‚¹</span></a></h4><ul><li>å°†å¤æ‚å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹ä¸è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—æ„å»ºè¿‡ç¨‹æ›´åŠ çµæ´»ã€‚</li><li>å¯ä»¥éšè—æ„å»ºç»†èŠ‚ï¼Œä½¿å®¢æˆ·ç«¯ä»£ç ä¸å…·ä½“æ„å»ºè¿‡ç¨‹è§£è€¦ã€‚</li><li>å¯ä»¥åˆ›å»ºä¸åŒè¡¨ç¤ºçš„å¯¹è±¡ï¼Œåªéœ€æ”¹å˜å…·ä½“å»ºé€ è€…å³å¯ã€‚</li></ul><h4 id="å®ç°-4" tabindex="-1"><a class="header-anchor" href="#å®ç°-4"><span>å®ç°</span></a></h4><p>å»ºé€ è€…æ¨¡å¼é€šå¸¸åŒ…å«ä»¥ä¸‹å‡ ä¸ªè§’è‰²ï¼š</p><ol><li>äº§å“ï¼ˆProductï¼‰ï¼šè¦æ„å»ºçš„å¤æ‚å¯¹è±¡ã€‚</li><li>æŠ½è±¡å»ºé€ è€…ï¼ˆBuilderï¼‰ï¼šå®šä¹‰äº†æ„å»ºäº§å“çš„æŠ½è±¡æ–¹æ³•å’Œæ­¥éª¤ã€‚</li><li>å…·ä½“å»ºé€ è€…ï¼ˆConcrete Builderï¼‰ï¼šå®ç°äº†æŠ½è±¡å»ºé€ è€…æ¥å£ï¼Œè´Ÿè´£å®é™…æ„å»ºäº§å“çš„å…·ä½“æ­¥éª¤ã€‚</li><li>æŒ‡æŒ¥è€…ï¼ˆDirectorï¼‰ï¼šè´Ÿè´£æŒ‰ç…§ç‰¹å®šé¡ºåºè°ƒç”¨å»ºé€ è€…çš„æ–¹æ³•æ¥æ„å»ºäº§å“ã€‚</li></ol><p>ä½¿ç”¨å»ºé€ è€…æ¨¡å¼çš„ä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>å®šä¹‰äº§å“ç±»ï¼Œç¡®å®šäº§å“çš„å±æ€§å’Œæ–¹æ³•ã€‚</li><li>åˆ›å»ºæŠ½è±¡å»ºé€ è€…æ¥å£ï¼Œå®šä¹‰æ„å»ºäº§å“çš„æŠ½è±¡æ–¹æ³•ã€‚</li><li>åˆ›å»ºå…·ä½“å»ºé€ è€…ç±»ï¼Œå®ç°æŠ½è±¡å»ºé€ è€…æ¥å£ï¼Œå®ç°æ„å»ºäº§å“çš„å…·ä½“æ­¥éª¤ã€‚</li><li>åˆ›å»ºæŒ‡æŒ¥è€…ç±»ï¼Œè´Ÿè´£æŒ‰ç…§ç‰¹å®šé¡ºåºè°ƒç”¨å»ºé€ è€…çš„æ–¹æ³•æ¥æ„å»ºäº§å“ã€‚</li><li>åœ¨å®¢æˆ·ç«¯ä¸­ï¼Œé€šè¿‡æŒ‡æŒ¥è€…æ¥æ„å»ºäº§å“ï¼Œå®¢æˆ·ç«¯æ— éœ€çŸ¥é“å…·ä½“çš„æ„å»ºç»†èŠ‚ã€‚</li></ol><ul><li>é€šç”¨å®ç°æ–¹å¼</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// äº§å“ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> part1<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> part2<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> part3<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPart1</span><span class="token punctuation">(</span><span class="token class-name">String</span> part1<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>part1 <span class="token operator">=</span> part1<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPart2</span><span class="token punctuation">(</span><span class="token class-name">String</span> part2<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>part2 <span class="token operator">=</span> part2<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPart3</span><span class="token punctuation">(</span><span class="token class-name">String</span> part3<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>part3 <span class="token operator">=</span> part3<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Part 1: &quot;</span> <span class="token operator">+</span> part1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Part 2: &quot;</span> <span class="token operator">+</span> part2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Part 3: &quot;</span> <span class="token operator">+</span> part3<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æŠ½è±¡å»ºé€ è€…ç±»</span></span>
<span class="line"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token class-name">Product</span> product <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Product</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildPart1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildPart2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildPart3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Product</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> product<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“å»ºé€ è€…ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildPart1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        product<span class="token punctuation">.</span><span class="token function">setPart1</span><span class="token punctuation">(</span><span class="token string">&quot;Part 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildPart2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        product<span class="token punctuation">.</span><span class="token function">setPart2</span><span class="token punctuation">(</span><span class="token string">&quot;Part 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildPart3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        product<span class="token punctuation">.</span><span class="token function">setPart3</span><span class="token punctuation">(</span><span class="token string">&quot;Part 3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æŒ‡æŒ¥è€…ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Director</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Builder</span> builder<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Director</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>builder <span class="token operator">=</span> builder<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        builder<span class="token punctuation">.</span><span class="token function">buildPart1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        builder<span class="token punctuation">.</span><span class="token function">buildPart2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        builder<span class="token punctuation">.</span><span class="token function">buildPart3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Builder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Director</span> director <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Director</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        director<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Product</span> product <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        product<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Lombok <code>@Builder</code></li></ul><p>é€šè¿‡è°ƒç”¨ <code>Person.builder()</code> æ–¹æ³•ï¼Œå¯ä»¥è·å¾—ä¸€ä¸ª <code>PersonBuilder</code> å¯¹è±¡ï¼Œç„¶åå¯ä»¥ä½¿ç”¨é“¾å¼è°ƒç”¨æ¥è®¾ç½®å±æ€§çš„å€¼ã€‚æœ€åï¼Œé€šè¿‡è°ƒç”¨ <code>build()</code> æ–¹æ³•æ¥æ„å»º <code>Person</code> å¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Builder</span></span>
<span class="line"><span class="token annotation punctuation">@Getter</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@NonNull</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span></span>
<span class="line">    <span class="token annotation punctuation">@NonNull</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">firstName</span><span class="token punctuation">(</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">lastName</span><span class="token punctuation">(</span><span class="token string">&quot;Doe&quot;</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">age</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">address</span><span class="token punctuation">(</span><span class="token string">&quot;123 Main St&quot;</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">getFirstName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">getLastName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä»£ç†æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ä»£ç†æ¨¡å¼"><span>ä»£ç†æ¨¡å¼</span></a></h3><p>ä¹Ÿå«å§”æ‰˜æ¨¡å¼ï¼Œä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</p><h4 id="è§£é‡Š-10" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-10"><span>è§£é‡Š</span></a></h4><p>ä»£ç†æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªä»£ç†å¯¹è±¡æ¥æ§åˆ¶å¯¹å¦ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚ä»£ç†å¯¹è±¡å……å½“äº†å®¢æˆ·ç«¯å’Œè¢«ä»£ç†å¯¹è±¡ä¹‹é—´çš„ä¸­ä»‹ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡å¯ä»¥é—´æ¥è®¿é—®è¢«ä»£ç†å¯¹è±¡ã€‚</p><p>ä»£ç†æ¨¡å¼çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†æˆ–å ä½ç¬¦ï¼Œä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚å®ƒå¯ä»¥å¢åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œæˆ–è€…åœ¨è®¿é—®å¯¹è±¡ä¹‹å‰å’Œä¹‹åæ‰§è¡Œä¸€äº›æ“ä½œã€‚</p><h4 id="ä¼˜ç‚¹-9" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-9"><span>ä¼˜ç‚¹</span></a></h4><ul><li>èŒè´£æ¸…æ™°ã€‚çœŸå®çš„è§’è‰²å°±æ˜¯å®ç°å®é™…çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸ç”¨å…³å¿ƒå…¶ä»–éæœ¬èŒè´£çš„äº‹åŠ¡ï¼Œé€šè¿‡åæœŸçš„ä»£ç†å®Œæˆä¸€ä»¶äº‹åŠ¡ï¼Œé™„å¸¦çš„ç»“æœå°±æ˜¯ç¼–ç¨‹ç®€æ´æ¸…æ™°ã€‚</li><li>é«˜æ‰©å±•æ€§ã€‚å…·ä½“ä¸»é¢˜è§’è‰²æ˜¯éšæ—¶éƒ½ä¼šå‘ç”Ÿå˜åŒ–çš„ï¼Œåªè¦å®ƒå®ç°äº†æ¥å£ï¼Œç”­ç®¡å®ƒå¦‚ä½•å˜åŒ–ï¼Œéƒ½é€ƒä¸è„±å¦‚æ¥ä½›çš„æ‰‹æŒï¼ˆæ¥å£ï¼‰ï¼Œé‚£æˆ‘ä»¬çš„ä»£ç†ç±»å®Œå…¨å°±å¯ä»¥åœ¨ä¸åšä»»ä½•ä¿®æ”¹çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</li><li>æ™ºèƒ½åŒ–ã€‚æ¯”å¦‚Strutsæ˜¯å¦‚ä½•æŠŠè¡¨å•å…ƒç´ æ˜ å°„åˆ°å¯¹è±¡ä¸Šçš„ã€‚</li></ul><h4 id="å®ç°-5" tabindex="-1"><a class="header-anchor" href="#å®ç°-5"><span>å®ç°</span></a></h4><p>æœ€ç»å…¸çš„å®ç°æ˜¯<code>Spring AOP</code>åŠ¨æ€ä»£ç†ã€‚</p><p>ä»£ç†æ¨¡å¼é€šå¸¸åŒ…å«ä»¥ä¸‹å‡ ä¸ªè§’è‰²ï¼š</p><ol><li>æŠ½è±¡ä¸»é¢˜ï¼ˆSubjectï¼‰ï¼šæŠ½è±¡ä¸»é¢˜ç±»å¯ä»¥æ˜¯æŠ½è±¡ç±»ä¹Ÿå¯ä»¥æ˜¯æ¥å£ï¼Œæ˜¯ä¸€ä¸ªæœ€æ™®é€šçš„ä¸šåŠ¡ç±»å‹å®šä¹‰ï¼Œæ— ç‰¹æ®Šè¦æ±‚ã€‚å®ƒå®šä¹‰äº†è¢«ä»£ç†å¯¹è±¡å’Œä»£ç†å¯¹è±¡çš„å…±åŒæ¥å£ï¼Œè¿™æ ·ä»£ç†å¯¹è±¡å¯ä»¥æ›¿ä»£è¢«ä»£ç†å¯¹è±¡è¿›è¡Œè®¿é—®ã€‚</li><li>å…·ä½“ä¸»é¢˜ï¼ˆReal Subjectï¼‰ï¼šä¹Ÿå«åšçœŸå®ä¸»é¢˜ã€è¢«å§”æ‰˜è§’è‰²ã€è¢«ä»£ç†è§’è‰²ã€‚å®ƒæ‰æ˜¯å†¤å¤§å¤´ï¼Œæ˜¯ä¸šåŠ¡é€»è¾‘çš„å…·ä½“æ‰§è¡Œè€…ã€‚å®ç°äº†æŠ½è±¡ä¸»é¢˜æ¥å£ï¼Œæ˜¯è¢«ä»£ç†çš„çœŸæ­£å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡é€šè¿‡è°ƒç”¨çœŸå®ä¸»é¢˜çš„æ–¹æ³•æ¥å®ç°å¯¹è¢«ä»£ç†å¯¹è±¡çš„è®¿é—®ã€‚</li><li></li></ol><p>ä»£ç†ä¸»é¢˜ï¼ˆProxyï¼‰ï¼šå®ƒè´Ÿè´£å¯¹çœŸå®è§’è‰²çš„åº”ç”¨ï¼ŒæŠŠæ‰€æœ‰æŠ½è±¡ä¸»é¢˜ç±»å®šä¹‰çš„æ–¹æ³•é™åˆ¶å§”æ‰˜ç»™çœŸå®ä¸»é¢˜è§’è‰²å®ç°ï¼Œå¹¶ä¸”åœ¨çœŸå®ä¸»é¢˜è§’è‰²å¤„ç†å®Œæ¯•å‰ååšé¢„å¤„ç†å’Œå–„åå¤„ç†å·¥ä½œï¼ˆå¯ä»¥åœ¨è®¿é—®çœŸå®ä¸»é¢˜ä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œä¸€äº›é¢å¤–çš„æ“ä½œï¼‰ã€‚å®ƒå®ç°äº†æŠ½è±¡ä¸»é¢˜æ¥å£ï¼ŒåŒæ—¶æŒæœ‰ä¸€ä¸ªå¯¹çœŸå®ä¸»é¢˜å¯¹è±¡çš„å¼•ç”¨ã€‚</p><ul><li>é€šç”¨ä»£ç†</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// æŠ½è±¡ä¸»é¢˜æ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// çœŸå®ä¸»é¢˜ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">RealSubject</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;RealSubject doSomething&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ä»£ç†ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Subject</span> realSubject<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token class-name">Subject</span> realSubject<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>realSubject <span class="token operator">=</span> realSubject<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Proxy doSomething&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// åœ¨è°ƒç”¨çœŸå®ä¸»é¢˜å‰åå¯ä»¥æ‰§è¡Œä¸€äº›é¢å¤–çš„æ“ä½œ</span></span>
<span class="line">        realSubject<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Subject</span> realSubject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RealSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Subject</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>realSubject<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        proxy<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åŠ¨æ€ä»£ç†</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æŠ½è±¡ä¸»é¢˜æ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// çœŸå®ä¸»é¢˜ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">RealSubject</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;RealSubject doSomething&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ä»£ç†å¤„ç†å™¨ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ProxyHandler</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Object</span> target<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">ProxyHandler</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Proxy doSomething&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// åœ¨è°ƒç”¨çœŸå®ä¸»é¢˜å‰åå¯ä»¥æ‰§è¡Œä¸€äº›é¢å¤–çš„æ“ä½œ</span></span>
<span class="line">        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> result<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Subject</span> realSubject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RealSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">InvocationHandler</span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyHandler</span><span class="token punctuation">(</span>realSubject<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// åˆ›å»ºåŠ¨æ€ä»£ç†å¯¹è±¡</span></span>
<span class="line">        <span class="token class-name">Subject</span> proxy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Subject</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span></span>
<span class="line">            realSubject<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            realSubject<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            handler</span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        </span>
<span class="line">        proxy<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åŸå‹æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#åŸå‹æ¨¡å¼"><span>åŸå‹æ¨¡å¼</span></a></h3><p>ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</p><h4 id="è§£é‡Š-11" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-11"><span>è§£é‡Š</span></a></h4><p>éœ€è¦åˆ›å»ºä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œå¹¶ç¡®ä¿è¯¥å¯¹è±¡å®ç°äº†<code>Cloneable</code>æ¥å£ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>clone()</code>æ–¹æ³•æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œè¯¥æ–¹æ³•ä¼šå°†åŸå‹å¯¹è±¡çš„çŠ¶æ€å¤åˆ¶åˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ä¸­ã€‚</p><h4 id="ä¼˜ç‚¹-10" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-10"><span>ä¼˜ç‚¹</span></a></h4><ul><li>æ€§èƒ½ä¼˜è‰¯ã€‚åŸå‹æ¨¡å¼æ˜¯åœ¨å†…å­˜äºŒè¿›åˆ¶æµçš„æ‹·è´ï¼Œè¦æ¯”ç›´æ¥newä¸€ä¸ªå¯¹è±¡æ€§èƒ½å¥½å¾ˆå¤šï¼Œç‰¹åˆ«æ˜¯è¦åœ¨ä¸€ä¸ªå¾ªç¯ä½“å†…äº§ç”Ÿå¤§é‡çš„å¯¹è±¡æ—¶ï¼ŒåŸå‹æ¨¡å¼å¯ä»¥æ›´å¥½åœ°ä½“ç°å…¶ä¼˜ç‚¹ã€‚</li><li>é€ƒé¿æ„é€ å‡½æ•°çš„çº¦æŸã€‚è¿™æ—¢æ˜¯å®ƒçš„ä¼˜ç‚¹ä¹Ÿæ˜¯ç¼ºç‚¹ï¼Œç›´æ¥åœ¨å†…å­˜ä¸­æ‹·è´ï¼Œæ„é€ å‡½æ•°æ˜¯ä¸ä¼šæ‰§è¡Œçš„ã€‚ä¼˜ç‚¹å°±æ˜¯å‡å°‘äº†çº¦æŸï¼Œç¼ºç‚¹ä¹Ÿæ˜¯å‡å°‘äº†çº¦æŸï¼Œéœ€è¦å¤§å®¶åœ¨å®é™…åº”ç”¨æ—¶è€ƒè™‘ã€‚</li></ul><h4 id="æ³¨æ„-6" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-6"><span>æ³¨æ„</span></a></h4><ul><li>æ„é€ å‡½æ•°ä¸ä¼šè¢«æ‰§è¡Œã€‚å¯¹è±¡æ‹·è´æ—¶æ„é€ å‡½æ•°ç¡®å®æ²¡æœ‰è¢«æ‰§è¡Œï¼Œè¿™ç‚¹ä»åŸç†æ¥è®²ä¹Ÿæ˜¯å¯ä»¥è®²å¾—é€šçš„ï¼Œ<code>Object</code>ç±»çš„<code>clone</code> æ–¹æ³•çš„åŸç†æ˜¯ä»å†…å­˜ä¸­ï¼ˆå…·ä½“åœ°è¯´å°±æ˜¯å †å†…å­˜ï¼‰ä»¥äºŒè¿›åˆ¶æµçš„æ–¹å¼è¿›è¡Œæ‹·è´ï¼Œé‡æ–°åˆ†é…ä¸€ä¸ªå†…å­˜å—ã€‚</li><li>æµ…æ‹·è´ã€‚<code>Object</code>ç±»çš„<code>clone</code> æ–¹æ³•åªæ˜¯æ‹·è´æœ¬å¯¹è±¡ï¼Œå…¶å¯¹è±¡å†…éƒ¨çš„æ•°ç»„ã€å¼•ç”¨å¯¹è±¡ç­‰éƒ½ä¸æ‹·è´ï¼Œè¿˜æ˜¯æŒ‡å‘åŸç”Ÿå¯¹è±¡çš„å†…éƒ¨å…ƒç´ åœ°å€ï¼Œä¹Ÿå°±æ˜¯è¯´<code>clone</code>æ˜¯ä¸€ç§æµ…æ‹·è´ã€‚</li></ul><h4 id="å®ç°-6" tabindex="-1"><a class="header-anchor" href="#å®ç°-6"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/Prototype.png" alt="åŸå‹æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">prototype</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åˆ›å»ºä¸€ä¸ªå¯å¤åˆ¶çš„åŸå‹å¯¹è±¡</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Prototype</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Prototype</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> name<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Prototype</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Prototype</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ä½¿ç”¨åŸå‹å¯¹è±¡åˆ›å»ºæ–°å¯¹è±¡</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrototypePattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Prototype</span> prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Prototype</span><span class="token punctuation">(</span><span class="token string">&quot;åŸå‹å¯¹è±¡&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// ä½¿ç”¨ clone() æ–¹æ³•åˆ›å»ºæ–°å¯¹è±¡</span></span>
<span class="line">            <span class="token class-name">Prototype</span> clone <span class="token operator">=</span> prototype<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            clone<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;å…‹éš†å¯¹è±¡&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åŸå‹å¯¹è±¡åç§°ï¼š&quot;</span> <span class="token operator">+</span> prototype<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å…‹éš†å¯¹è±¡åç§°ï¼š&quot;</span> <span class="token operator">+</span> clone<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CloneNotSupportedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä¸­ä»‹è€…æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ä¸­ä»‹è€…æ¨¡å¼"><span>ä¸­ä»‹è€…æ¨¡å¼</span></a></h3><p>ä¹Ÿå«åšè°ƒåœè€…æ¨¡å¼ï¼Œç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ï¼Œä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾ç¤ºåœ°ç›¸äº’ä½œç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚</p><h4 id="è§£é‡Š-12" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-12"><span>è§£é‡Š</span></a></h4><p>åœ¨ä¸­ä»‹è€…æ¨¡å¼ä¸­ï¼Œå¤šä¸ªå¯¹è±¡ä¹‹é—´çš„äº¤äº’ä¸å†ç›´æ¥å‘ç”Ÿï¼Œè€Œæ˜¯é€šè¿‡ä¸­ä»‹è€…å¯¹è±¡è¿›è¡Œåè°ƒã€‚è¿™æ ·ï¼Œå¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦å°±é™ä½äº†ï¼Œå®ƒä»¬åªéœ€è¦ä¸ä¸­ä»‹è€…å¯¹è±¡è¿›è¡Œé€šä¿¡ï¼Œè€Œä¸éœ€è¦äº†è§£å…¶ä»–å¯¹è±¡çš„ç»†èŠ‚ã€‚ ä¸­ä»‹è€…æ¨¡å¼çš„æ ¸å¿ƒæ˜¯ä¸­ä»‹è€…å¯¹è±¡ï¼Œå®ƒè´Ÿè´£åè°ƒå¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€‚å¯¹è±¡ä¹‹é—´çš„é€šä¿¡é€šå¸¸é€šè¿‡ä¸­ä»‹è€…å¯¹è±¡çš„æ–¹æ³•æ¥è¿›è¡Œï¼Œè€Œä¸æ˜¯ç›´æ¥ç›¸äº’è°ƒç”¨æ–¹æ³•ã€‚</p><p>ä¸­ä»‹è€…æ¨¡å¼é€‚ç”¨äºå¤šä¸ªå¯¹è±¡ä¹‹é—´ç´§å¯†è€¦åˆçš„æƒ…å†µï¼Œç´§å¯†è€¦åˆçš„æ ‡å‡†æ˜¯ï¼šåœ¨ç±»å›¾ä¸­å‡ºç°äº†èœ˜è››ç½‘çŠ¶ç»“æ„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ä¸€å®šè¦è€ƒè™‘ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼ï¼Œè¿™æœ‰åˆ©äºæŠŠèœ˜è››ç½‘æ¢³ç†ä¸ºæ˜Ÿå‹ç»“æ„ï¼Œä½¿åŸæœ¬å¤æ‚æ··ä¹±çš„å…³ç³»å˜å¾—æ¸…æ™°ç®€å•</p><h4 id="ä¼˜ç‚¹-11" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-11"><span>ä¼˜ç‚¹</span></a></h4><p>ä¸­ä»‹è€…æ¨¡å¼çš„ä¼˜ç‚¹å°±æ˜¯å‡å°‘ç±»é—´çš„ä¾èµ–ï¼ŒæŠŠåŸæœ‰çš„ä¸€å¯¹å¤šçš„ä¾èµ–å˜æˆäº†ä¸€å¯¹ä¸€çš„ä¾èµ–ï¼ŒåŒäº‹ç±»åªä¾èµ–ä¸­ä»‹è€…ï¼Œå‡å°‘äº†ä¾èµ–ï¼Œå½“ç„¶åŒæ—¶ä¹Ÿé™ä½äº†ç±»é—´çš„è€¦åˆã€‚</p><h4 id="ç¼ºç‚¹-5" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹-5"><span>ç¼ºç‚¹</span></a></h4><p>ä¸­ä»‹è€…æ¨¡å¼çš„ç¼ºç‚¹å°±æ˜¯ä¸­ä»‹è€…ä¼šè†¨èƒ€å¾—å¾ˆå¤§ï¼Œè€Œä¸”é€»è¾‘å¤æ‚ï¼ŒåŸæœ¬Nä¸ªå¯¹è±¡ç›´æ¥çš„ç›¸äº’ä¾èµ–å…³ç³»è½¬æ¢ä¸ºä¸­ä»‹è€…å’ŒåŒäº‹ç±»çš„ä¾èµ–å…³ç³»ï¼ŒåŒäº‹ç±»è¶Šå¤šï¼Œä¸­ä»‹è€…çš„é€»è¾‘å°±è¶Šå¤æ‚ã€‚</p><h4 id="å®ç°-7" tabindex="-1"><a class="header-anchor" href="#å®ç°-7"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/Mediator.png" alt="ä¸­ä»‹è€…æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">mediator</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ä¸­ä»‹è€…æ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Colleague</span> colleague<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“ä¸­ä»‹è€…å®ç°</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteMediator</span> <span class="token keyword">implements</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Colleague</span> colleague1<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Colleague</span> colleague2<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setColleague1</span><span class="token punctuation">(</span><span class="token class-name">Colleague</span> colleague1<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>colleague1 <span class="token operator">=</span> colleague1<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setColleague2</span><span class="token punctuation">(</span><span class="token class-name">Colleague</span> colleague2<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>colleague2 <span class="token operator">=</span> colleague2<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Colleague</span> colleague<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>colleague<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>colleague1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ConcreteColleague2 å‡†å¤‡é€šè¿‡ä¸­ä»‹æ¥æ”¶ ConcreteColleague1å‘é€çš„æ¶ˆæ¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            colleague2<span class="token punctuation">.</span><span class="token function">receiveMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>colleague<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>colleague2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ConcreteColleague1 å‡†å¤‡é€šè¿‡ä¸­ä»‹æ¥æ”¶ ConcreteColleague2å‘é€çš„æ¶ˆæ¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            colleague1<span class="token punctuation">.</span><span class="token function">receiveMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// åŒäº‹ç±»æ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Colleague</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">receiveMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“åŒäº‹ç±»å®ç°</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteColleague1</span> <span class="token keyword">implements</span> <span class="token class-name">Colleague</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">ConcreteColleague1</span><span class="token punctuation">(</span><span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>mediator <span class="token operator">=</span> mediator<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; é€šè¿‡ä¸­ä»‹å¼€å§‹å‘é€æ¶ˆæ¯ï¼š&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        mediator<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receiveMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ConcreteColleague1 æ¥æ”¶åˆ°æ¶ˆæ¯ï¼š&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“åŒäº‹ç±»å®ç°</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteColleague2</span> <span class="token keyword">implements</span> <span class="token class-name">Colleague</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">ConcreteColleague2</span><span class="token punctuation">(</span><span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>mediator <span class="token operator">=</span> mediator<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; é€šè¿‡ä¸­ä»‹å¼€å§‹å‘é€æ¶ˆæ¯ï¼š&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        mediator<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receiveMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ConcreteColleague2 æ¥æ”¶åˆ°æ¶ˆæ¯ï¼š&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æµ‹è¯•ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MediatorPattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">ConcreteMediator</span> mediator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteMediator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">ConcreteColleague1</span> colleague1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteColleague1</span><span class="token punctuation">(</span>mediator<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">ConcreteColleague2</span> colleague2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteColleague2</span><span class="token punctuation">(</span>mediator<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        mediator<span class="token punctuation">.</span><span class="token function">setColleague1</span><span class="token punctuation">(</span>colleague1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        mediator<span class="token punctuation">.</span><span class="token function">setColleague2</span><span class="token punctuation">(</span>colleague2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        colleague1<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Hello from Colleague1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        colleague2<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">&quot;Hi from Colleague2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å‘½ä»¤æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å‘½ä»¤æ¨¡å¼"><span>å‘½ä»¤æ¨¡å¼</span></a></h3><p>å°†ä¸€ä¸ªè¯·æ±‚å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œè®©ä½ ä½¿ç”¨ä¸åŒçš„è¯·æ±‚æŠŠå®¢æˆ·ç«¯å‚æ•°åŒ–ï¼Œå¯¹è¯·æ±‚æ’é˜Ÿæˆ–è€…è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œå¯ä»¥æä¾›å‘½ä»¤çš„æ’¤é”€å’Œæ¢å¤åŠŸèƒ½ã€‚</p><h4 id="è§£é‡Š-13" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-13"><span>è§£é‡Š</span></a></h4><p>å‘½ä»¤æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå°†è¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è§£è€¦ã€‚åœ¨å‘½ä»¤æ¨¡å¼ä¸­ï¼Œè¯·æ±‚è¢«å°è£…ä¸ºä¸€ä¸ªå‘½ä»¤å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†æ‰§è¡Œè¯¥è¯·æ±‚æ‰€éœ€çš„æ–¹æ³•å’Œå‚æ•°ã€‚è¿™æ ·ï¼Œè¯·æ±‚çš„å‘é€è€…åªéœ€è¦è°ƒç”¨å‘½ä»¤å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œæ— éœ€çŸ¥é“å…·ä½“çš„æ¥æ”¶è€…æˆ–æ‰§è¡Œç»†èŠ‚ã€‚</p><p>é€šè¿‡å‘½ä»¤æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è§£è€¦ï¼Œä½¿å¾—å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚è¯·æ±‚çš„å‘é€è€…åªéœ€è¦ä¸å‘½ä»¤å¯¹è±¡è¿›è¡Œäº¤äº’ï¼Œè€Œæ— éœ€çŸ¥é“å…·ä½“çš„æ¥æ”¶è€…æˆ–æ‰§è¡Œç»†èŠ‚ã€‚è¿™ç§è§£è€¦å¯ä»¥å¸¦æ¥æ›´å¥½çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p><h4 id="ä¼˜ç‚¹-12" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-12"><span>ä¼˜ç‚¹</span></a></h4><ul><li>ç±»é—´è§£è€¦ã€‚è°ƒç”¨è€…è§’è‰²ä¸æ¥æ”¶è€…è§’è‰²ä¹‹é—´æ²¡æœ‰ä»»ä½•ä¾èµ–å…³ç³»ï¼Œè°ƒç”¨è€…å®ç°åŠŸèƒ½æ—¶åªéœ€è°ƒç”¨CommandæŠ½è±¡ç±»çš„executeæ–¹æ³•å°±å¯ä»¥ï¼Œä¸éœ€è¦äº†è§£åˆ°åº•æ˜¯å“ªä¸ªæ¥æ”¶è€…æ‰§è¡Œã€‚</li><li>å¯æ‰©å±•æ€§ã€‚Commandçš„å­ç±»å¯ä»¥éå¸¸å®¹æ˜“åœ°æ‰©å±•ï¼Œè€Œè°ƒç”¨è€…Invokerå’Œé«˜å±‚æ¬¡çš„æ¨¡å—Clientä¸äº§ç”Ÿä¸¥é‡çš„ä»£ç è€¦åˆã€‚</li><li>å‘½ä»¤æ¨¡å¼ç»“åˆå…¶ä»–æ¨¡å¼ä¼šæ›´ä¼˜ç§€ã€‚å‘½ä»¤æ¨¡å¼å¯ä»¥ç»“åˆè´£ä»»é“¾æ¨¡å¼ï¼Œå®ç°å‘½ä»¤æ—è§£æä»»åŠ¡ï¼›ç»“åˆæ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œåˆ™å¯ä»¥å‡å°‘Commandå­ç±»çš„è†¨èƒ€é—®é¢˜ã€‚</li></ul><h4 id="ç¼ºç‚¹-6" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹-6"><span>ç¼ºç‚¹</span></a></h4><p>å‘½ä»¤æ¨¡å¼ä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œè¯·çœ‹Commandçš„å­ç±»ï¼šå¦‚æœæœ‰Nä¸ªå‘½ä»¤ï¼Œé—®é¢˜å°±å‡ºæ¥äº†ï¼ŒCommandçš„å­ç±»å°±å¯ä¸æ˜¯å‡ ä¸ªï¼Œè€Œæ˜¯Nä¸ªï¼Œè¿™ä¸ªç±»è†¨èƒ€å¾—éå¸¸å¤§ï¼Œè¿™ä¸ªå°±éœ€è¦åœ¨é¡¹ç›®ä¸­æ…é‡è€ƒè™‘ä½¿ç”¨ã€‚</p><h4 id="å®ç°-8" tabindex="-1"><a class="header-anchor" href="#å®ç°-8"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/Command.png" alt="å‘½ä»¤æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">command</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å‘½ä»¤æ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“å‘½ä»¤ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteCommand</span> <span class="token keyword">implements</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Receiver</span> receiver<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">ConcreteCommand</span><span class="token punctuation">(</span><span class="token class-name">Receiver</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        receiver<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æ¥æ”¶è€…ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Receiver</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ¥æ”¶è€…æ‰§è¡Œæ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¯·æ±‚è€…ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Invoker</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Command</span> command<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCommand</span><span class="token punctuation">(</span><span class="token class-name">Command</span> command<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>command <span class="token operator">=</span> command<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">executeCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        command<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æµ‹è¯•ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CommandPattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Receiver</span> receiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Receiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Command</span> command <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Invoker</span> invoker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Invoker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>command<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        invoker<span class="token punctuation">.</span><span class="token function">executeCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è´£ä»»é“¾æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è´£ä»»é“¾æ¨¡å¼"><span>è´£ä»»é“¾æ¨¡å¼</span></a></h3><p>ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…äº†è¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚</p><h4 id="è§£é‡Š-14" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-14"><span>è§£é‡Š</span></a></h4><p>èŒè´£é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰æ˜¯ä¸€ç§è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å°†è¯·æ±‚æ²¿ç€å¤„ç†é“¾è¿›è¡Œä¼ é€’ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¤„ç†è€…èƒ½å¤Ÿå¤„ç†è¯¥è¯·æ±‚ä¸ºæ­¢ã€‚åœ¨èŒè´£é“¾æ¨¡å¼ä¸­ï¼Œæ¯ä¸ªå¤„ç†è€…éƒ½æœ‰ä¸€ä¸ªå¯¹ä¸‹ä¸€ä¸ªå¤„ç†è€…çš„å¼•ç”¨ï¼Œå½¢æˆä¸€ä¸ªé“¾æ¡ã€‚ èŒè´£é“¾æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯è§£è€¦è¯·æ±‚å‘é€è€…å’Œæ¥æ”¶è€…ï¼Œä½¿å¾—å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ã€‚å½“ä¸€ä¸ªè¯·æ±‚è¢«å‘é€æ—¶ï¼Œå®ƒä¼šæ²¿ç€å¤„ç†é“¾ä¾æ¬¡ä¼ é€’ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¤„ç†è€…èƒ½å¤Ÿå¤„ç†è¯¥è¯·æ±‚ã€‚è¿™æ ·ï¼Œè¯·æ±‚çš„å‘é€è€…æ— éœ€çŸ¥é“å…·ä½“çš„å¤„ç†è€…ï¼Œè€Œå¤„ç†è€…ä¹Ÿæ— éœ€çŸ¥é“è¯·æ±‚çš„å‘é€è€…ï¼Œå®ƒä»¬åªéœ€è¦çŸ¥é“è‡ªå·±çš„ä¸‹ä¸€ä¸ªå¤„ç†è€…å³å¯ã€‚</p><h4 id="ä¼˜ç‚¹-13" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-13"><span>ä¼˜ç‚¹</span></a></h4><p>è¯·æ±‚å’Œå¤„ç†åˆ†å¼€ã€‚è¯·æ±‚è€…å¯ä»¥ä¸ç”¨çŸ¥é“æ˜¯è°å¤„ç†çš„ï¼Œå¤„ç†è€…å¯ä»¥ä¸ç”¨çŸ¥é“è¯·æ±‚çš„å…¨è²Œï¼ˆä¾‹å¦‚åœ¨J2EEé¡¹ç›®å¼€å‘ä¸­ï¼Œå¯ä»¥å‰¥ç¦»å‡ºæ— çŠ¶æ€Beanç”±è´£ä»»é“¾å¤„ç†ï¼‰ï¼Œä¸¤è€…è§£è€¦ï¼Œæé«˜ç³»ç»Ÿçš„çµæ´»æ€§ã€‚</p><h4 id="ç¼ºç‚¹-7" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹-7"><span>ç¼ºç‚¹</span></a></h4><ul><li>æ€§èƒ½é—®é¢˜ã€‚æ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ä»é“¾å¤´éå†åˆ°é“¾å°¾ï¼Œç‰¹åˆ«æ˜¯åœ¨é“¾æ¯”è¾ƒé•¿çš„æ—¶å€™ï¼Œæ€§èƒ½æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„é—®é¢˜ã€‚</li><li>è°ƒè¯•ä¸æ–¹ä¾¿ã€‚ç‰¹åˆ«æ˜¯é“¾æ¡æ¯”è¾ƒé•¿ï¼Œç¯èŠ‚æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œç”±äºé‡‡ç”¨äº†ç±»ä¼¼é€’å½’çš„æ–¹å¼ï¼Œè°ƒè¯•çš„æ—¶å€™é€»è¾‘å¯èƒ½æ¯”è¾ƒå¤æ‚ã€‚</li></ul><h4 id="æ³¨æ„-7" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-7"><span>æ³¨æ„</span></a></h4><p>é“¾ä¸­èŠ‚ç‚¹æ•°é‡éœ€è¦æ§åˆ¶ï¼Œé¿å…å‡ºç°è¶…é•¿é“¾çš„æƒ…å†µï¼Œä¸€èˆ¬çš„åšæ³•æ˜¯åœ¨Handlerä¸­è®¾ç½®ä¸€ä¸ªæœ€å¤§èŠ‚ç‚¹æ•°é‡ï¼Œåœ¨setNextæ–¹æ³•ä¸­åˆ¤æ–­æ˜¯å¦å·²ç»æ˜¯è¶…è¿‡å…¶é˜ˆå€¼ï¼Œè¶…è¿‡åˆ™ä¸å…è®¸è¯¥é“¾å»ºç«‹ï¼Œé¿å…æ— æ„è¯†åœ°ç ´åç³»ç»Ÿæ€§èƒ½ã€‚</p><h4 id="å®ç°-9" tabindex="-1"><a class="header-anchor" href="#å®ç°-9"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/Chain.png" alt="è´£ä»»é“¾æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">chain</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æŠ½è±¡å¤„ç†è€…</span></span>
<span class="line"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token class-name">Handler</span> nextHandler<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNextHandler</span><span class="token punctuation">(</span><span class="token class-name">Handler</span> nextHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">=</span> nextHandler<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span><span class="token keyword">int</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“å¤„ç†è€…A</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteHandlerA</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span><span class="token keyword">int</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>request <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> request <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ConcreteHandlerA å¤„ç†è¯·æ±‚ï¼š&quot;</span> <span class="token operator">+</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>nextHandler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            nextHandler<span class="token punctuation">.</span><span class="token function">handleRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“å¤„ç†è€…B</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteHandlerB</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span><span class="token keyword">int</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>request <span class="token operator">&gt;=</span> <span class="token number">10</span> <span class="token operator">&amp;&amp;</span> request <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ConcreteHandlerB å¤„ç†è¯·æ±‚ï¼š&quot;</span> <span class="token operator">+</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>nextHandler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            nextHandler<span class="token punctuation">.</span><span class="token function">handleRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“å¤„ç†è€…C</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteHandlerC</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span><span class="token keyword">int</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>request <span class="token operator">&gt;=</span> <span class="token number">20</span> <span class="token operator">&amp;&amp;</span> request <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ConcreteHandlerC å¤„ç†è¯·æ±‚ï¼š&quot;</span> <span class="token operator">+</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>nextHandler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            nextHandler<span class="token punctuation">.</span><span class="token function">handleRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æµ‹è¯•ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Chain</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Handler</span> handlerA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteHandlerA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Handler</span> handlerB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteHandlerB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Handler</span> handlerC <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteHandlerC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        handlerA<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>handlerB<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        handlerB<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>handlerC<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        handlerA<span class="token punctuation">.</span><span class="token function">handleRequest</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        handlerA<span class="token punctuation">.</span><span class="token function">handleRequest</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        handlerA<span class="token punctuation">.</span><span class="token function">handleRequest</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è£…é¥°æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è£…é¥°æ¨¡å¼"><span>è£…é¥°æ¨¡å¼</span></a></h3><p>åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°æ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»</p><h4 id="è§£é‡Š-15" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-15"><span>è§£é‡Š</span></a></h4><p>è£…é¥°å™¨æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸åœ¨ä¸æ”¹å˜å¯¹è±¡æ¥å£çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°å‘å¯¹è±¡æ·»åŠ æ–°çš„è¡Œä¸ºã€‚è£…é¥°å™¨æ¨¡å¼é€šè¿‡åˆ›å»ºä¸€ä¸ªåŒ…è£…å¯¹è±¡æ¥å®ç°è¿™ä¸€ç›®çš„ï¼Œè¯¥åŒ…è£…å¯¹è±¡åŒ…å«äº†åŸå§‹å¯¹è±¡ï¼Œå¹¶åœ¨å…¶ä¸Šæ·»åŠ äº†é¢å¤–çš„åŠŸèƒ½ã€‚ åœ¨è£…é¥°å™¨æ¨¡å¼ä¸­ï¼Œæœ‰ä¸€ä¸ªæŠ½è±¡åŸºç±»æˆ–æ¥å£ï¼Œå®šä¹‰äº†åŸå§‹å¯¹è±¡å’Œè£…é¥°å™¨å¯¹è±¡éƒ½è¦å®ç°çš„æ–¹æ³•ã€‚ç„¶åï¼Œæœ‰ä¸€ä¸ªå…·ä½“çš„åŸå§‹å¯¹è±¡ç±»ï¼Œå®ç°äº†åŸºç±»æˆ–æ¥å£çš„æ–¹æ³•ã€‚æ¥ä¸‹æ¥ï¼Œæœ‰ä¸€ä¸ªè£…é¥°å™¨ç±»ï¼Œå®ƒä¹Ÿå®ç°äº†åŸºç±»æˆ–æ¥å£ï¼Œå¹¶ä¸”åŒ…å«ä¸€ä¸ªæŒ‡å‘åŸå§‹å¯¹è±¡çš„å¼•ç”¨ã€‚è£…é¥°å™¨ç±»å¯ä»¥åœ¨è°ƒç”¨åŸå§‹å¯¹è±¡çš„æ–¹æ³•ä¹‹å‰æˆ–ä¹‹åï¼Œæ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚</p><h4 id="ä¼˜ç‚¹-14" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-14"><span>ä¼˜ç‚¹</span></a></h4><ul><li>è£…é¥°ç±»å’Œè¢«è£…é¥°ç±»å¯ä»¥ç‹¬ç«‹å‘å±•ï¼Œè€Œä¸ä¼šç›¸äº’è€¦åˆã€‚æ¢å¥è¯è¯´ï¼ŒComponentç±»æ— é¡»çŸ¥é“Decoratorç±»ï¼ŒDecoratorç±»æ˜¯ä»å¤–éƒ¨æ¥æ‰©å±•Componentç±»çš„åŠŸèƒ½ï¼Œè€ŒDecoratorä¹Ÿä¸ç”¨çŸ¥é“å…·ä½“çš„æ„ä»¶ã€‚</li><li>è£…é¥°æ¨¡å¼æ˜¯<strong>ç»§æ‰¿</strong>å…³ç³»çš„ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆã€‚æˆ‘ä»¬çœ‹è£…é¥°ç±»Decoratorï¼Œä¸ç®¡è£…é¥°å¤šå°‘å±‚ï¼Œè¿”å›çš„å¯¹è±¡è¿˜æ˜¯Componentï¼Œå®ç°çš„è¿˜æ˜¯is-açš„å…³ç³»ã€‚</li><li>è£…é¥°æ¨¡å¼å¯ä»¥åŠ¨æ€åœ°æ‰©å±•ä¸€ä¸ªå®ç°ç±»çš„åŠŸèƒ½ï¼Œè¿™ä¸éœ€è¦å¤šè¯´ï¼Œè£…é¥°æ¨¡å¼çš„å®šä¹‰å°±æ˜¯å¦‚æ­¤ã€‚</li></ul><h4 id="ä½¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li>éœ€è¦æ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½ï¼Œæˆ–ç»™ä¸€ä¸ªç±»å¢åŠ é™„åŠ åŠŸèƒ½ã€‚</li><li>éœ€è¦åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å¯ä»¥å†åŠ¨æ€åœ°æ’¤é”€ã€‚</li><li>éœ€è¦ä¸ºä¸€æ‰¹çš„å…„å¼Ÿç±»è¿›è¡Œæ”¹è£…æˆ–åŠ è£…åŠŸèƒ½ï¼Œå½“ç„¶æ˜¯é¦–é€‰è£…é¥°æ¨¡å¼ã€‚</li></ul><h4 id="å®ç°-10" tabindex="-1"><a class="header-anchor" href="#å®ç°-10"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/Decorator.png" alt="è£…é¥°æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">decorator</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æŠ½è±¡ç»„ä»¶æ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“ç»„ä»¶ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteComponent</span> <span class="token keyword">implements</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œå…·ä½“ç»„ä»¶çš„æ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æŠ½è±¡è£…é¥°è€…ç±»</span></span>
<span class="line"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Decorator</span> <span class="token keyword">implements</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token class-name">Component</span> component<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Decorator</span><span class="token punctuation">(</span><span class="token class-name">Component</span> component<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>component <span class="token operator">=</span> component<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        component<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“è£…é¥°è€…ç±»A</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteDecoratorA</span> <span class="token keyword">extends</span> <span class="token class-name">Decorator</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">ConcreteDecoratorA</span><span class="token punctuation">(</span><span class="token class-name">Component</span> component<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œå…·ä½“è£…é¥°è€…Açš„æ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“è£…é¥°è€…ç±»B</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteDecoratorB</span> <span class="token keyword">extends</span> <span class="token class-name">Decorator</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">ConcreteDecoratorB</span><span class="token punctuation">(</span><span class="token class-name">Component</span> component<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œå…·ä½“è£…é¥°è€…Bçš„æ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æµ‹è¯•ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DecoratorPattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Component</span> component <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Component</span> decoratorA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteDecoratorA</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Component</span> decoratorB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteDecoratorB</span><span class="token punctuation">(</span>decoratorA<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        decoratorB<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç­–ç•¥æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ç­–ç•¥æ¨¡å¼"><span>ç­–ç•¥æ¨¡å¼</span></a></h3><p>å®šä¹‰ä¸€ç»„ç®—æ³•ï¼Œå°†æ¯ä¸ªç®—æ³•éƒ½å°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬ä¹‹é—´å¯ä»¥äº’æ¢ã€‚</p><h4 id="è§£é‡Š-16" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-16"><span>è§£é‡Š</span></a></h4><p>ç­–ç•¥æ¨¡å¼ä½¿ç”¨çš„æ˜¯é¢å‘å¯¹è±¡çš„<strong>ç»§æ‰¿</strong>å’Œ<strong>å¤šæ€</strong>æœºåˆ¶ã€‚</p><p>ç­–ç•¥æ¨¡å¼é€šè¿‡å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸ªç®—æ³•å°è£…åœ¨ç‹¬ç«‹çš„ç±»ä¸­ï¼Œä½¿å¾—å®ƒä»¬å¯ä»¥äº’ç›¸æ›¿æ¢ã€‚è¿™æ ·ï¼Œå®¢æˆ·ç«¯å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒçš„ç®—æ³•ï¼Œè€Œä¸å¿…æ›´æ”¹å…¶ä»£ç ã€‚</p><h4 id="ä¼˜ç‚¹-15" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-15"><span>ä¼˜ç‚¹</span></a></h4><ul><li>ç®—æ³•å¯ä»¥è‡ªç”±åˆ‡æ¢ã€‚è¿™æ˜¯ç­–ç•¥æ¨¡å¼æœ¬èº«å®šä¹‰çš„ï¼Œåªè¦å®ç°æŠ½è±¡ç­–ç•¥ï¼Œå®ƒå°±æˆä¸ºç­–ç•¥å®¶æ—çš„ä¸€ä¸ªæˆå‘˜ï¼Œé€šè¿‡å°è£…è§’è‰²å¯¹å…¶è¿›è¡Œå°è£…ï¼Œä¿è¯å¯¹å¤–æä¾›â€œå¯è‡ªç”±åˆ‡æ¢â€çš„ç­–ç•¥ã€‚</li><li></li></ul><p>é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶åˆ¤æ–­ã€‚å¦‚æœæ²¡æœ‰ç­–ç•¥æ¨¡å¼ï¼Œæˆ‘ä»¬æƒ³æƒ³çœ‹ä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿä¸€ä¸ªç­–ç•¥å®¶æ—æœ‰5ä¸ªç­–ç•¥ç®—æ³•ï¼Œä¸€ä¼šè¦ä½¿ç”¨Aç­–ç•¥ï¼Œä¸€ä¼šè¦ä½¿ç”¨Bç­–ç•¥ï¼Œæ€ä¹ˆè®¾è®¡å‘¢ï¼Ÿä½¿ç”¨å¤šé‡çš„æ¡ä»¶è¯­å¥ï¼Ÿå¤šé‡æ¡ä»¶è¯­å¥ä¸æ˜“ç»´æŠ¤ï¼Œè€Œä¸”å‡ºé”™çš„æ¦‚ç‡å¤§å¤§å¢å¼ºã€‚ä½¿ç”¨ç­–ç•¥æ¨¡å¼åï¼Œå¯ä»¥ç”±å…¶ä»–æ¨¡å—å†³å®šé‡‡ç”¨ä½•ç§ç­–ç•¥ï¼Œç­–ç•¥å®¶æ—å¯¹å¤–æä¾›çš„è®¿é—®æ¥å£å°±æ˜¯å°è£…ç±»ï¼Œç®€åŒ–äº†æ“ä½œï¼ŒåŒæ—¶é¿å…äº†æ¡ä»¶è¯­å¥åˆ¤æ–­ã€‚</p><ul><li>æ‰©å±•æ€§è‰¯å¥½ã€‚è¿™ç”šè‡³éƒ½ä¸ç”¨è¯´æ˜¯å®ƒçš„ä¼˜ç‚¹ï¼Œå› ä¸ºå®ƒå¤ªæ˜æ˜¾äº†ã€‚åœ¨ç°æœ‰çš„ç³»ç»Ÿä¸­å¢åŠ ä¸€ä¸ªç­–ç•¥å¤ªå®¹æ˜“äº†ï¼Œåªè¦å®ç°æ¥å£å°±å¯ä»¥äº†ï¼Œå…¶ä»–éƒ½ä¸ç”¨ä¿®æ”¹ï¼Œç±»ä¼¼äºä¸€ä¸ªå¯åå¤æ‹†å¸çš„æ’ä»¶ï¼Œè¿™å¤§å¤§åœ°ç¬¦åˆäº†OCPåŸåˆ™ï¼ˆå¼€é—­åŸåˆ™ï¼‰ã€‚</li></ul><h4 id="ç¼ºç‚¹-8" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹-8"><span>ç¼ºç‚¹</span></a></h4><ul><li>ç­–ç•¥ç±»æ•°é‡å¢å¤šã€‚æ¯ä¸€ä¸ªç­–ç•¥éƒ½æ˜¯ä¸€ä¸ªç±»ï¼Œå¤ç”¨çš„å¯èƒ½æ€§å¾ˆå°ï¼Œç±»æ•°é‡å¢å¤šã€‚</li><li></li></ul><p>æ‰€æœ‰çš„ç­–ç•¥ç±»éƒ½éœ€è¦å¯¹å¤–æš´éœ²ã€‚ä¸Šå±‚æ¨¡å—å¿…é¡»çŸ¥é“æœ‰å“ªäº›ç­–ç•¥ï¼Œç„¶åæ‰èƒ½å†³å®šä½¿ç”¨å“ªä¸€ä¸ªç­–ç•¥ï¼Œè¿™ä¸<a href="https://neusoft.feishu.cn/docx/IjbNdiENlo0PgKxfC01cLdLynPc#part-FAx1dIiLyokcFSxsxBQcf5Yfnqd" target="_blank" rel="noopener noreferrer">è¿ªç±³ç‰¹æ³•åˆ™</a> æ˜¯ç›¸è¿èƒŒçš„ï¼Œæˆ‘åªæ˜¯æƒ³ä½¿ç”¨äº†ä¸€ä¸ªç­–ç•¥ï¼Œæˆ‘å‡­ä»€ä¹ˆå°±è¦äº†è§£è¿™ä¸ªç­–ç•¥å‘¢ï¼Ÿé‚£è¦ä½ çš„å°è£…ç±»è¿˜æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿè¿™æ˜¯åŸè£…ç­–ç•¥æ¨¡å¼çš„ä¸€ä¸ªç¼ºç‚¹ï¼Œå¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¶ä»–æ¨¡å¼æ¥ä¿®æ­£è¿™ä¸ªç¼ºé™·ï¼Œå¦‚å·¥å‚æ–¹æ³•æ¨¡å¼ã€ä»£ç†æ¨¡å¼æˆ–äº«å…ƒæ¨¡å¼ã€‚</p><h4 id="ä½¿ç”¨åœºæ™¯-1" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-1"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li>å¤šä¸ªç±»åªæœ‰åœ¨ç®—æ³•æˆ–è¡Œä¸ºä¸Šç¨æœ‰ä¸åŒçš„åœºæ™¯ã€‚</li><li>ç®—æ³•éœ€è¦è‡ªç”±åˆ‡æ¢çš„åœºæ™¯ã€‚</li><li>éœ€è¦å±è”½ç®—æ³•è§„åˆ™çš„åœºæ™¯ã€‚</li></ul><h4 id="å®ç°-11" tabindex="-1"><a class="header-anchor" href="#å®ç°-11"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/Strategy.png" alt="ç­–ç•¥æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">strategy</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ç­–ç•¥æ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">SortingStrategy</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> numbers<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“ç­–ç•¥ç±» - å†’æ³¡æ’åº</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">BubbleSortStrategy</span> <span class="token keyword">implements</span> <span class="token class-name">SortingStrategy</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> numbers<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Using Bubble Sort&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// å†’æ³¡æ’åºç®—æ³•å®ç°</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“ç­–ç•¥ç±» - å¿«é€Ÿæ’åº</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">QuickSortStrategy</span> <span class="token keyword">implements</span> <span class="token class-name">SortingStrategy</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> numbers<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Using Quick Sort&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// å¿«é€Ÿæ’åºç®—æ³•å®ç°</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ä¸Šä¸‹æ–‡ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">SortContext</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">SortingStrategy</span> strategy<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">SortContext</span><span class="token punctuation">(</span><span class="token class-name">SortingStrategy</span> strategy<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStrategy</span><span class="token punctuation">(</span><span class="token class-name">SortingStrategy</span> strategy<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sortNumbers</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> numbers<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        strategy<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> numbers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">SortContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SortContext</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BubbleSortStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        context<span class="token punctuation">.</span><span class="token function">sortNumbers</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        context<span class="token punctuation">.</span><span class="token function">setStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">QuickSortStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        context<span class="token punctuation">.</span><span class="token function">sortNumbers</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é€‚é…å™¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#é€‚é…å™¨æ¨¡å¼"><span>é€‚é…å™¨æ¨¡å¼</span></a></h3><p>å°†ä¸€ä¸ªç±»çš„æ¥å£å˜æ¢æˆå®¢æˆ·ç«¯æ‰€æœŸå¾…çš„å¦ä¸€ç§æ¥å£ï¼Œä»è€Œä½¿åŸæœ¬å› æ¥å£ä¸åŒ¹é…è€Œæ— æ³•åœ¨ä¸€èµ·å·¥ä½œçš„ä¸¤ä¸ªç±»èƒ½å¤Ÿåœ¨ä¸€èµ·å·¥ä½œã€‚</p><h4 id="è§£é‡Š-17" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-17"><span>è§£é‡Š</span></a></h4><p>é€‚é…å™¨æ¨¡å¼åˆå«åšå˜å‹å™¨æ¨¡å¼ï¼Œä¹Ÿå«åšåŒ…è£…æ¨¡å¼ï¼ˆWrapperï¼‰ã€‚</p><p>é€‚é…å™¨æ¨¡å¼æ¶‰åŠä¸‰ä¸ªä¸»è¦è§’è‰²ï¼šç›®æ ‡æ¥å£ï¼ˆTarget Interfaceï¼‰ã€é€‚é…å™¨ï¼ˆAdapterï¼‰å’Œè¢«é€‚é…è€…ï¼ˆAdapteeï¼‰ã€‚ç›®æ ‡æ¥å£å®šä¹‰äº†å®¢æˆ·ç«¯æ‰€æœŸæœ›çš„æ–¹æ³•ã€‚é€‚é…å™¨ç±»å®ç°äº†ç›®æ ‡æ¥å£ï¼Œå¹¶åŒ…å«ä¸€ä¸ªå¯¹è¢«é€‚é…è€…çš„å¼•ç”¨ã€‚è¢«é€‚é…è€…æ˜¯å·²ç»å­˜åœ¨çš„ç±»ï¼Œå®ƒçš„æ¥å£ä¸ç›®æ ‡æ¥å£ä¸å…¼å®¹ã€‚ é€‚é…å™¨æ¨¡å¼é€šè¿‡åœ¨é€‚é…å™¨ç±»ä¸­å®ç°ç›®æ ‡æ¥å£çš„æ–¹æ³•ï¼Œå¹¶åœ¨æ–¹æ³•å†…éƒ¨è°ƒç”¨è¢«é€‚é…è€…çš„æ–¹æ³•ï¼Œå°†å®¢æˆ·ç«¯çš„è¯·æ±‚è½¬å‘ç»™è¢«é€‚é…è€…ã€‚è¿™æ ·ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡é€‚é…å™¨ç±»ä¸è¢«é€‚é…è€…è¿›è¡Œäº¤äº’ï¼Œè€Œä¸éœ€è¦ç›´æ¥ä¸è¢«é€‚é…è€…è¿›è¡Œé€šä¿¡ã€‚</p><h4 id="ä¼˜ç‚¹-16" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-16"><span>ä¼˜ç‚¹</span></a></h4><ul><li>é€‚é…å™¨æ¨¡å¼å¯ä»¥è®©ä¸¤ä¸ªæ²¡æœ‰ä»»ä½•å…³ç³»çš„ç±»åœ¨ä¸€èµ·è¿è¡Œï¼Œåªè¦é€‚é…å™¨è¿™ä¸ªè§’è‰²èƒ½å¤Ÿæå®šä»–ä»¬å°±æˆã€‚</li><li>å¢åŠ äº†ç±»çš„é€æ˜æ€§ã€‚</li><li>æé«˜äº†ç±»çš„å¤ç”¨åº¦</li><li>çµæ´»æ€§éå¸¸å¥½</li></ul><h4 id="ä½¿ç”¨åœºæ™¯-2" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-2"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><p>ä½ æœ‰åŠ¨æœºä¿®æ”¹ä¸€ä¸ªå·²ç»æŠ•äº§ä¸­çš„æ¥å£æ—¶ï¼Œé€‚é…å™¨æ¨¡å¼å¯èƒ½æ˜¯æœ€é€‚åˆä½ çš„æ¨¡å¼ã€‚</p><h4 id="æ³¨æ„-8" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-8"><span>æ³¨æ„</span></a></h4><p>é€‚é…å™¨æ¨¡å¼æœ€å¥½åœ¨è¯¦ç»†è®¾è®¡é˜¶æ®µä¸è¦è€ƒè™‘å®ƒï¼Œå®ƒä¸æ˜¯ä¸ºäº†è§£å†³è¿˜å¤„åœ¨å¼€å‘é˜¶æ®µçš„é—®é¢˜ï¼Œè€Œæ˜¯è§£å†³æ­£åœ¨æœå½¹çš„é¡¹ç›®é—®é¢˜ã€‚</p><p>é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ä¸ªè¡¥å¿æ¨¡å¼ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªâ€œè¡¥æ•‘â€æ¨¡å¼ï¼Œé€šå¸¸ç”¨æ¥è§£å†³æ¥å£ä¸ç›¸å®¹çš„é—®é¢˜ã€‚</p><h4 id="å®ç°-12" tabindex="-1"><a class="header-anchor" href="#å®ç°-12"><span>å®ç°</span></a></h4><ul><li>ç±»é€‚é…å™¨çš„é€šç”¨ç±»å›¾</li></ul><img src="/mars/images/book/designpattern/Adapter.png" alt="é€‚é…å™¨æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">adapter</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ç›®æ ‡æ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Target</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¢«é€‚é…è€…ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Adaptee</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">specificRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è¢«é€‚é…è€…çš„specificRequestæ­£åœ¨è¢«è°ƒç”¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// é€‚é…å™¨ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Adapter</span> <span class="token keyword">extends</span> <span class="token class-name">Adaptee</span> <span class="token keyword">implements</span> <span class="token class-name">Target</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;é€‚é…è€…å†…éƒ¨å‡†å¤‡è°ƒç”¨è¢«é€‚é…è€…çš„specificRequest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">specificRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å¼€å§‹è½¬æ¢ã€‚ã€‚ã€‚ç»è¿‡ä¸€ç³»åˆ—è½¬æ¢ï¼Œå˜æˆç›®æ ‡å®ä¾‹request&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdapterPattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Target</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Adapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        target<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¯¹è±¡é€‚é…å™¨çš„é€šç”¨ç±»å›¾</li></ul><img src="/mars/images/book/designpattern/Adapter2.png" alt="å¯¹è±¡é€‚é…å™¨æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// ç›®æ ‡æ¥å£</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Target</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¢«é€‚é…è€…ç±»</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Adaptee</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">specificRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Specific request&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// é€‚é…å™¨ç±»</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Adapter</span> <span class="token keyword">implements</span> <span class="token class-name">Target</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Adaptee</span> adaptee<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Adapter</span><span class="token punctuation">(</span><span class="token class-name">Adaptee</span> adaptee<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>adaptee <span class="token operator">=</span> adaptee<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        adaptee<span class="token punctuation">.</span><span class="token function">specificRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Adaptee</span> adaptee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Adaptee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Target</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Adapter</span><span class="token punctuation">(</span>adaptee<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        target<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è¿­ä»£å™¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è¿­ä»£å™¨æ¨¡å¼"><span>è¿­ä»£å™¨æ¨¡å¼</span></a></h3><p>å®ƒæä¾›ä¸€ç§æ–¹æ³•è®¿é—®ä¸€ä¸ªå®¹å™¨å¯¹è±¡ä¸­å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸éœ€æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨ç»†èŠ‚ã€‚</p><h4 id="æ³¨æ„-9" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-9"><span>æ³¨æ„</span></a></h4><p>è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator Patternï¼‰ç›®å‰å·²ç»æ˜¯ä¸€ä¸ªæ²¡è½çš„æ¨¡å¼ï¼ŒåŸºæœ¬ä¸Šæ²¡äººä¼šå•ç‹¬å†™ä¸€ä¸ªè¿­ä»£å™¨ï¼Œé™¤éæ˜¯äº§å“æ€§è´¨çš„å¼€å‘ã€‚</p><h4 id="å®ç°-13" tabindex="-1"><a class="header-anchor" href="#å®ç°-13"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/Iterator.png" alt="è¿­ä»£å™¨æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">iterator</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¿­ä»£å™¨æ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Iterator</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">String</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// é›†åˆæ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Collection</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Iterator</span> <span class="token function">createIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“è¿­ä»£å™¨ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteIterator</span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> collection<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">int</span> position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">ConcreteIterator</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> collection<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>collection <span class="token operator">=</span> collection<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> position <span class="token operator">&lt;</span> collection<span class="token punctuation">.</span>length<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> collection<span class="token punctuation">[</span>position<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“é›†åˆç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteCollection</span> <span class="token keyword">implements</span> <span class="token class-name">Collection</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> collection<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">ConcreteCollection</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> collection<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>collection <span class="token operator">=</span> collection<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Iterator</span> <span class="token function">createIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteIterator</span><span class="token punctuation">(</span>collection<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IteratorPattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> collection <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;Item 1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Item 2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Item 3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Item 4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Item 5&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Collection</span> concreteCollection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteCollection</span><span class="token punctuation">(</span>collection<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Iterator</span> iterator <span class="token operator">=</span> concreteCollection<span class="token punctuation">.</span><span class="token function">createIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç»„åˆæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ç»„åˆæ¨¡å¼"><span>ç»„åˆæ¨¡å¼</span></a></h3><p>å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ï¼Œä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</p><h4 id="è§£é‡Š-18" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-18"><span>è§£é‡Š</span></a></h4><p>ç»„åˆæ¨¡å¼(Composite Pattern)ä¹Ÿå«åˆæˆæ¨¡å¼ï¼Œæœ‰æ—¶åˆå«åšéƒ¨åˆ†-æ•´ä½“æ¨¡å¼ï¼ˆPart-Wholeï¼‰ï¼Œä¸»è¦æ˜¯ç”¨æ¥æè¿°éƒ¨åˆ†ä¸æ•´ä½“çš„å…³ç³»ã€‚</p><p>åœ¨ç»„åˆæ¨¡å¼ä¸­ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„å¯¹è±¡ç±»å‹ï¼šå¶èŠ‚ç‚¹å’Œç»„åˆèŠ‚ç‚¹ã€‚å¶èŠ‚ç‚¹è¡¨ç¤ºæ ‘å½¢ç»“æ„ä¸­çš„æœ€åº•å±‚å¯¹è±¡ï¼Œå®ƒä»¬æ²¡æœ‰å­èŠ‚ç‚¹ã€‚è€Œç»„åˆèŠ‚ç‚¹åˆ™å¯ä»¥åŒ…å«å­èŠ‚ç‚¹ï¼Œå½¢æˆæ›´å¤§çš„ç»„åˆå¯¹è±¡ã€‚</p><p>ç»„åˆæ¨¡å¼é€šè¿‡å®šä¹‰å…±åŒçš„æ¥å£ï¼Œä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥é€æ˜åœ°æ“ä½œå•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡ã€‚å®¢æˆ·ç«¯å¯ä»¥åƒå¯¹å¾…å•ä¸ªå¯¹è±¡ä¸€æ ·å¯¹å¾…ç»„åˆå¯¹è±¡ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå¯¹è±¡çš„å…·ä½“ç±»å‹ã€‚</p><h4 id="ä¼˜ç‚¹-17" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-17"><span>ä¼˜ç‚¹</span></a></h4><ul><li>é«˜å±‚æ¨¡å—è°ƒç”¨ç®€å•</li><li>èŠ‚ç‚¹è‡ªç”±å¢åŠ </li></ul><h4 id="ä½¿ç”¨åœºæ™¯-3" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-3"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li>ç»´æŠ¤å’Œå±•ç¤ºéƒ¨åˆ†-æ•´ä½“å…³ç³»çš„åœºæ™¯ï¼Œå¦‚æ ‘å½¢èœå•ã€æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ç®¡ç†ã€‚</li><li>ä»ä¸€ä¸ªæ•´ä½“ä¸­èƒ½å¤Ÿç‹¬ç«‹å‡ºéƒ¨åˆ†æ¨¡å—æˆ–åŠŸèƒ½çš„åœºæ™¯ã€‚</li></ul><h4 id="å®ç°-14" tabindex="-1"><a class="header-anchor" href="#å®ç°-14"><span>å®ç°</span></a></h4><ul><li>é€æ˜æ¨¡å¼ã€‚æŠŠç”¨æ¥ç»„åˆä½¿ç”¨çš„æ–¹æ³•æ”¾åˆ°æŠ½è±¡ç±»ä¸­ã€‚</li></ul><img src="/mars/images/book/designpattern/Composite.png" alt="ç»„åˆæ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// æŠ½è±¡ç»„ä»¶æ¥å£ ä¹Ÿå¯ä»¥æ˜¯æŠ½è±¡ç±»ï¼Œä¹¦ä¸Šä½¿ç”¨æŠ½è±¡ç±»</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Component</span> component<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Component</span> component<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å¶èŠ‚ç‚¹ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Leaf</span> <span class="token keyword">implements</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œå¶èŠ‚ç‚¹æ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Component</span> component<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Component</span> component<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ç»„åˆèŠ‚ç‚¹ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Composite</span> <span class="token keyword">implements</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Component</span><span class="token punctuation">&gt;</span></span> children <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œç»„åˆèŠ‚ç‚¹æ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Component</span> component <span class="token operator">:</span> children<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            component<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Component</span> component<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        children<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Component</span> component<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        children<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// åˆ›å»ºç»„åˆå¯¹è±¡</span></span>
<span class="line">        <span class="token class-name">Composite</span> composite <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Composite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// åˆ›å»ºå¶èŠ‚ç‚¹å¯¹è±¡</span></span>
<span class="line">        <span class="token class-name">Leaf</span> leaf1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Leaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Leaf</span> leaf2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Leaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// å°†å¶èŠ‚ç‚¹æ·»åŠ åˆ°ç»„åˆå¯¹è±¡ä¸­</span></span>
<span class="line">        composite<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>leaf1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        composite<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>leaf2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// æ‰§è¡Œç»„åˆå¯¹è±¡æ“ä½œ</span></span>
<span class="line">        composite<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å®‰å…¨æ¨¡å¼</li></ul><img src="/mars/images/book/designpattern/SafeComposite.png" alt="ç»„åˆå®‰å…¨æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">composite</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æŠ½è±¡ç»„ä»¶æ¥å£ ä¹Ÿå¯ä»¥æ˜¯æŠ½è±¡ç±»ï¼Œä¹¦ä¸Šä½¿ç”¨æŠ½è±¡ç±»</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å¶èŠ‚ç‚¹ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Leaf</span> <span class="token keyword">implements</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œå¶èŠ‚ç‚¹æ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ç»„åˆèŠ‚ç‚¹ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Composite</span> <span class="token keyword">implements</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Component</span><span class="token punctuation">&gt;</span></span> children <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Component</span> component<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        children<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Component</span> component<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        children<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰§è¡Œç»„åˆèŠ‚ç‚¹æ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Component</span> component <span class="token operator">:</span> children<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            component<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CompositePattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// åˆ›å»ºç»„åˆå¯¹è±¡</span></span>
<span class="line">        <span class="token class-name">Composite</span> root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Composite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Composite</span> composite1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Composite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Composite</span> composite2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Composite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// åˆ›å»ºå¶èŠ‚ç‚¹å¯¹è±¡</span></span>
<span class="line">        <span class="token class-name">Leaf</span> leaf1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Leaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Leaf</span> leaf2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Leaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Leaf</span> leaf3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Leaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Leaf</span> leaf4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Leaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// å°†å¶èŠ‚ç‚¹æ·»åŠ åˆ°ç»„åˆå¯¹è±¡ä¸­</span></span>
<span class="line">        root<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>composite1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        root<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>composite2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        composite1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>leaf1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        composite1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>leaf2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        composite2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>leaf3<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        composite2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>leaf4<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// æ‰§è¡Œç»„åˆå¯¹è±¡æ“ä½œ</span></span>
<span class="line">        root<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è§‚å¯Ÿè€…æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è§‚å¯Ÿè€…æ¨¡å¼"><span>è§‚å¯Ÿè€…æ¨¡å¼</span></a></h3><p>å®šä¹‰å¯¹è±¡é—´ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€ï¼Œåˆ™æ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚</p><h4 id="è§£é‡Š-19" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-19"><span>è§£é‡Š</span></a></h4><p>åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œæœ‰ä¸¤ä¸ªæ ¸å¿ƒè§’è‰²ï¼šä¸»é¢˜ï¼ˆSubjectï¼‰å’Œè§‚å¯Ÿè€…ï¼ˆObserverï¼‰ã€‚ä¸»é¢˜æ˜¯è¢«è§‚å¯Ÿçš„å¯¹è±¡ï¼Œå®ƒç»´æŠ¤äº†ä¸€ä¸ªè§‚å¯Ÿè€…åˆ—è¡¨ï¼Œå¹¶æä¾›äº†æ·»åŠ ã€åˆ é™¤å’Œé€šçŸ¥è§‚å¯Ÿè€…çš„æ–¹æ³•ã€‚è§‚å¯Ÿè€…æ˜¯æ¥æ”¶ä¸»é¢˜é€šçŸ¥çš„å¯¹è±¡ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªæ›´æ–°çš„æ–¹æ³•ï¼Œç”¨äºåœ¨ä¸»é¢˜çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶æ›´æ–°è‡ªèº«ã€‚</p><p>è§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°é€šå¸¸æ¶‰åŠä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li>å®šä¹‰ä¸»é¢˜æ¥å£ï¼ˆSubjectï¼‰ï¼šä¸»é¢˜æ¥å£ä¸­åŒ…å«äº†æ·»åŠ ã€åˆ é™¤å’Œé€šçŸ¥è§‚å¯Ÿè€…çš„æ–¹æ³•ã€‚</li><li>å®šä¹‰è§‚å¯Ÿè€…æ¥å£ï¼ˆObserverï¼‰ï¼šè§‚å¯Ÿè€…æ¥å£ä¸­å®šä¹‰äº†æ›´æ–°çš„æ–¹æ³•ï¼Œç”¨äºåœ¨ä¸»é¢˜çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶æ›´æ–°è‡ªèº«ã€‚</li><li>å®ç°ä¸»é¢˜ç±»ï¼ˆå…·ä½“ä¸»é¢˜ï¼‰ï¼šå…·ä½“ä¸»é¢˜ç±»å®ç°äº†ä¸»é¢˜æ¥å£ï¼Œç»´æŠ¤äº†è§‚å¯Ÿè€…åˆ—è¡¨ï¼Œå¹¶åœ¨çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥è§‚å¯Ÿè€…ã€‚</li><li>å®ç°è§‚å¯Ÿè€…ç±»ï¼ˆå…·ä½“è§‚å¯Ÿè€…ï¼‰ï¼šå…·ä½“è§‚å¯Ÿè€…ç±»å®ç°äº†è§‚å¯Ÿè€…æ¥å£ï¼Œå®šä¹‰äº†æ›´æ–°çš„æ–¹æ³•ï¼Œç”¨äºæ¥æ”¶ä¸»é¢˜çš„é€šçŸ¥å¹¶æ›´æ–°è‡ªèº«çŠ¶æ€ã€‚</li></ol><p>è§‚å¯Ÿè€…æ¨¡å¼çš„ä¼˜ç‚¹åŒ…æ‹¬äº†æ¾è€¦åˆã€å¯æ‰©å±•æ€§å’Œæ˜“ç»´æŠ¤æ€§ã€‚å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°å¯¹è±¡ä¹‹é—´çš„ä¸€ç§åŠ¨æ€å…³ç³»ï¼Œä»¥åº”å¯¹å¤æ‚çš„ä¸šåŠ¡éœ€æ±‚ã€‚</p><h4 id="ä¼˜ç‚¹-18" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-18"><span>ä¼˜ç‚¹</span></a></h4><ul><li>è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ä¹‹é—´æ˜¯æŠ½è±¡è€¦åˆ</li><li>å»ºç«‹ä¸€å¥—è§¦å‘æœºåˆ¶</li></ul><h4 id="ä½¿ç”¨åœºæ™¯-4" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-4"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li>å…³è”è¡Œä¸ºåœºæ™¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…³è”è¡Œä¸ºæ˜¯å¯æ‹†åˆ†çš„ï¼Œè€Œä¸æ˜¯â€œç»„åˆâ€å…³ç³»ã€‚</li><li>äº‹ä»¶å¤šçº§è§¦å‘åœºæ™¯ã€‚</li><li>è·¨ç³»ç»Ÿçš„æ¶ˆæ¯äº¤æ¢åœºæ™¯ï¼Œå¦‚æ¶ˆæ¯é˜Ÿåˆ—çš„å¤„ç†æœºåˆ¶ã€‚</li></ul><h4 id="ç¼ºç‚¹-9" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹-9"><span>ç¼ºç‚¹</span></a></h4><p>è§‚å¯Ÿè€…æ¨¡å¼éœ€è¦è€ƒè™‘ä¸€ä¸‹å¼€å‘æ•ˆç‡å’Œè¿è¡Œæ•ˆç‡é—®é¢˜ï¼Œä¸€ä¸ªè¢«è§‚å¯Ÿè€…ï¼Œå¤šä¸ªè§‚å¯Ÿè€…ï¼Œå¼€å‘å’Œè°ƒè¯•å°±ä¼šæ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”åœ¨Javaä¸­æ¶ˆæ¯çš„é€šçŸ¥é»˜è®¤æ˜¯é¡ºåºæ‰§è¡Œï¼Œä¸€ä¸ªè§‚å¯Ÿè€…å¡å£³ï¼Œä¼šå½±å“æ•´ä½“çš„æ‰§è¡Œæ•ˆç‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€èˆ¬è€ƒè™‘é‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼ã€‚</p><p>å¤šçº§è§¦å‘æ—¶çš„æ•ˆç‡æ›´æ˜¯è®©äººæ‹…å¿§ï¼Œå¤§å®¶åœ¨è®¾è®¡æ—¶æ³¨æ„è€ƒè™‘ã€‚</p><h4 id="å®ç°-15" tabindex="-1"><a class="header-anchor" href="#å®ç°-15"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/Observer.png" alt="è§‚å¯Ÿè€…æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">observer</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ä¸»é¢˜æ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">addObserver</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">removeObserver</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è§‚å¯Ÿè€…æ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“ä¸»é¢˜ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteSubject</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">&gt;</span></span> observers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addObserver</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        observers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeObserver</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        observers<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Observer</span> observer <span class="token operator">:</span> observers<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“è§‚å¯Ÿè€…ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteObserver</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ¥æ”¶åˆ°ä¸»é¢˜çš„é€šçŸ¥ï¼Œè¿›è¡Œæ›´æ–°æ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleObserver</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// åˆ›å»ºä¸»é¢˜å’Œè§‚å¯Ÿè€…å¯¹è±¡</span></span>
<span class="line">        <span class="token class-name">ConcreteSubject</span> subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">ConcreteObserver</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// å°†è§‚å¯Ÿè€…æ·»åŠ åˆ°ä¸»é¢˜ä¸­</span></span>
<span class="line">        subject<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// ä¸»é¢˜çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé€šçŸ¥è§‚å¯Ÿè€…</span></span>
<span class="line">        subject<span class="token punctuation">.</span><span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä½¿ç”¨JDKçš„Observerå’ŒObservable</li></ul><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">observer<span class="token punctuation">.</span>java</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Observable</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Observer</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ä¸»é¢˜ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Subject</span> <span class="token keyword">extends</span> <span class="token class-name">Observable</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">int</span> state<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> state<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token string">&quot;æ­£åœ¨å¯†è°‹ã€‚ã€‚ã€‚ã€‚&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è§‚å¯Ÿè€…ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteObserver</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Observable</span> o<span class="token punctuation">,</span> <span class="token class-name">Object</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;æ¥æ”¶åˆ°ä¸»é¢˜çš„é€šçŸ¥ï¼š&quot;</span><span class="token operator">+</span>o<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JavaObserver</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// åˆ›å»ºä¸»é¢˜å’Œè§‚å¯Ÿè€…å¯¹è±¡</span></span>
<span class="line">        <span class="token class-name">Subject</span> subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">ConcreteObserver</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// å°†è§‚å¯Ÿè€…æ·»åŠ åˆ°ä¸»é¢˜ä¸­</span></span>
<span class="line">        subject<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// ä¸»é¢˜çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé€šçŸ¥è§‚å¯Ÿè€…</span></span>
<span class="line">        subject<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é—¨é¢æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#é—¨é¢æ¨¡å¼"><span>é—¨é¢æ¨¡å¼</span></a></h3><p>è¦æ±‚ä¸€ä¸ªå­ç³»ç»Ÿçš„å¤–éƒ¨ä¸å…¶å†…éƒ¨çš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¯¹è±¡è¿›è¡Œã€‚é—¨é¢æ¨¡å¼æä¾›ä¸€ä¸ªé«˜å±‚æ¬¡çš„æ¥å£ï¼Œä½¿å¾—å­ç³»ç»Ÿæ›´æ˜“äºä½¿ç”¨ã€‚</p><h4 id="è§£é‡Š-20" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-20"><span>è§£é‡Š</span></a></h4><p>é—¨é¢æ¨¡å¼ï¼ˆFacade Patternï¼‰ä¹Ÿå«åšå¤–è§‚æ¨¡å¼ï¼Œæ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œç”¨äºè®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£ã€‚é—¨é¢æ¨¡å¼éšè—äº†å­ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ç®€å•çš„æ¥å£ä¸å­ç³»ç»Ÿè¿›è¡Œäº¤äº’ï¼Œè€Œæ— éœ€äº†è§£å­ç³»ç»Ÿçš„å†…éƒ¨å®ç°ç»†èŠ‚ã€‚</p><p>é—¨é¢æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†å¤æ‚çš„å­ç³»ç»Ÿå°è£…åœ¨ä¸€ä¸ªé—¨é¢ç±»ä¸­ï¼Œå®¢æˆ·ç«¯åªéœ€è¦ä¸é—¨é¢ç±»è¿›è¡Œäº¤äº’ï¼Œè€Œæ— éœ€ç›´æ¥ä¸å­ç³»ç»Ÿçš„å„ä¸ªç»„ä»¶è¿›è¡Œäº¤äº’ã€‚é—¨é¢ç±»è´Ÿè´£å°†å®¢æˆ·ç«¯çš„è¯·æ±‚è½¬å‘ç»™é€‚å½“çš„å­ç³»ç»Ÿç»„ä»¶ï¼Œå¹¶å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>é—¨é¢æ¨¡å¼çš„ä¼˜ç‚¹åŒ…æ‹¬äº†ç®€åŒ–å®¢æˆ·ç«¯ä¸å­ç³»ç»Ÿä¹‹é—´çš„äº¤äº’ã€é™ä½äº†å®¢æˆ·ç«¯ä¸å­ç³»ç»Ÿä¹‹é—´çš„è€¦åˆåº¦ã€æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ç­‰ã€‚</p><h4 id="ä¼˜ç‚¹-19" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-19"><span>ä¼˜ç‚¹</span></a></h4><ul><li>å‡å°‘ç³»ç»Ÿçš„ç›¸äº’ä¾èµ–</li><li>æé«˜äº†çµæ´»æ€§</li><li>æé«˜å®‰å…¨æ€§</li></ul><h4 id="ä½¿ç”¨åœºæ™¯-5" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-5"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li>ä¸ºä¸€ä¸ªå¤æ‚çš„æ¨¡å—æˆ–å­ç³»ç»Ÿæä¾›ä¸€ä¸ªä¾›å¤–ç•Œè®¿é—®çš„æ¥å£</li><li>å­ç³»ç»Ÿç›¸å¯¹ç‹¬ç«‹--å¤–ç•Œå¯¹å­ç³»ç»Ÿçš„è®¿é—®åªè¦é»‘ç®±æ“ä½œå³å¯</li><li>é¢„é˜²ä½æ°´å¹³äººå‘˜å¸¦æ¥çš„é£é™©æ‰©æ•£</li></ul><h4 id="å®ç°-16" tabindex="-1"><a class="header-anchor" href="#å®ç°-16"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/Facade.png" alt="é—¨é¢æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token comment">// å­ç³»ç»Ÿç»„ä»¶A</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">SubsystemA</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operationA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;SubsystemA: operationA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å­ç³»ç»Ÿç»„ä»¶B</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">SubsystemB</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operationB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;SubsystemB: operationB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// é—¨é¢ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Facade</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">SubsystemA</span> subsystemA<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">SubsystemB</span> subsystemB<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Facade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        subsystemA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubsystemA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        subsystemB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubsystemB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        subsystemA<span class="token punctuation">.</span><span class="token function">operationA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        subsystemB<span class="token punctuation">.</span><span class="token function">operationB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FacadePattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Facade</span> facade <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Facade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        facade<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¤‡å¿˜å½•æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å¤‡å¿˜å½•æ¨¡å¼"><span>å¤‡å¿˜å½•æ¨¡å¼</span></a></h3><p>åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·ä»¥åå°±å¯å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚</p><h4 id="è§£é‡Š-21" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-21"><span>è§£é‡Š</span></a></h4><p>å¤‡å¿˜å½•æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†å¯¹è±¡çš„çŠ¶æ€ä¿å­˜åœ¨å¤‡å¿˜å½•å¯¹è±¡ä¸­ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶å¯ä»¥æ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ã€‚é€šè¿‡å°†çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤å·¥ä½œå§”æ‰˜ç»™å¤‡å¿˜å½•å¯¹è±¡ï¼Œå¯ä»¥é¿å…ç›´æ¥æš´éœ²å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ç»™å…¶ä»–å¯¹è±¡ã€‚</p><h4 id="ä½¿ç”¨åœºæ™¯-6" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-6"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li>éœ€è¦ä¿å­˜å’Œæ¢å¤æ•°æ®çš„ç›¸å…³çŠ¶æ€åœºæ™¯ã€‚</li><li>æä¾›ä¸€ä¸ªå¯å›æ»šï¼ˆrollbackï¼‰çš„æ“ä½œã€‚</li><li>éœ€è¦ç›‘æ§çš„å‰¯æœ¬åœºæ™¯ä¸­ã€‚</li><li>æ•°æ®åº“è¿æ¥çš„äº‹åŠ¡ç®¡ç†å°±æ˜¯ç”¨çš„å¤‡å¿˜å½•æ¨¡å¼</li></ul><h4 id="å®ç°-17" tabindex="-1"><a class="header-anchor" href="#å®ç°-17"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/Memento.png" alt="å¤‡å¿˜å½•æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">memento</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å¤‡å¿˜å½•ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> state<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Memento</span><span class="token punctuation">(</span><span class="token class-name">String</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> state<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å‘èµ·äººç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Originator</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> state<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token class-name">String</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> state<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">createMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Memento</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">restoreMemento</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        state <span class="token operator">=</span> memento<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ç®¡ç†è€…ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Caretaker</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Memento</span> memento<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemento</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>memento <span class="token operator">=</span> memento<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> memento<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MementoPattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Originator</span> originator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Originator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">Caretaker</span> caretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Caretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// è®¾ç½®å‘èµ·äººçš„çŠ¶æ€</span></span>
<span class="line">        originator<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">&quot;State 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Current state: &quot;</span> <span class="token operator">+</span> originator<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// åˆ›å»ºå¤‡å¿˜å½•å¹¶ä¿å­˜å‘èµ·äººçš„çŠ¶æ€</span></span>
<span class="line">        caretaker<span class="token punctuation">.</span><span class="token function">setMemento</span><span class="token punctuation">(</span>originator<span class="token punctuation">.</span><span class="token function">createMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// ä¿®æ”¹å‘èµ·äººçš„çŠ¶æ€</span></span>
<span class="line">        originator<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">&quot;State 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Current state: &quot;</span> <span class="token operator">+</span> originator<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// æ¢å¤å‘èµ·äººçš„çŠ¶æ€</span></span>
<span class="line">        originator<span class="token punctuation">.</span><span class="token function">restoreMemento</span><span class="token punctuation">(</span>caretaker<span class="token punctuation">.</span><span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Restored state: &quot;</span> <span class="token operator">+</span> originator<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>cloneæ–¹å¼ï¼Œå®ç°Cloneableï¼Œé‡å†™clone()ã€‚åŸå‹æ¨¡å¼ä¸­æœ‰ä»‹ç»</li></ul><img src="/mars/images/book/designpattern/CloneableMemento.png" alt="å¤‡å¿˜å½•Cloneæ¨¡å¼ç±»å›¾"><h3 id="è®¿é—®è€…æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è®¿é—®è€…æ¨¡å¼"><span>è®¿é—®è€…æ¨¡å¼</span></a></h3><p>å°è£…ä¸€äº›ä½œç”¨äºæŸç§æ•°æ®ç»“æ„ä¸­çš„å„å…ƒç´ çš„æ“ä½œï¼Œå®ƒå¯ä»¥åœ¨ä¸æ”¹å˜æ•°æ®ç»“æ„çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°çš„æ“ä½œã€‚</p><h4 id="ä¼˜ç‚¹-20" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-20"><span>ä¼˜ç‚¹</span></a></h4><ul><li>ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™</li><li>ä¼˜ç§€çš„æ‰©å±•æ€§</li><li>çµæ´»æ€§éå¸¸é«˜</li></ul><h4 id="ç¼ºç‚¹-10" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹-10"><span>ç¼ºç‚¹</span></a></h4><ul><li>å…·ä½“å…ƒç´ å¯¹è®¿é—®è€…å…¬å¸ƒç»†èŠ‚</li><li>å…·ä½“å…ƒç´ å˜æ›´æ¯”è¾ƒå›°éš¾</li><li>è¿èƒŒäº†ä¾èµ–å€’ç½®è½¬åŸåˆ™</li></ul><h4 id="ä½¿ç”¨åœºæ™¯-7" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-7"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li>ä¸€ä¸ªå¯¹è±¡ç»“æ„åŒ…å«å¾ˆå¤šç±»å¯¹è±¡ï¼Œå®ƒä»¬æœ‰ä¸åŒçš„æ¥å£ï¼Œè€Œä½ æƒ³å¯¹è¿™äº›å¯¹è±¡å®æ–½ä¸€äº›ä¾èµ–äºå…¶å…·ä½“ç±»çš„æ“ä½œï¼Œä¹Ÿå°±è¯´æ˜¯ç”¨è¿­ä»£å™¨æ¨¡å¼å·²ç»ä¸èƒ½èƒœä»»çš„æƒ…æ™¯ã€‚</li><li>éœ€è¦å¯¹ä¸€ä¸ªå¯¹è±¡ç»“æ„ä¸­çš„å¯¹è±¡è¿›è¡Œå¾ˆå¤šä¸åŒå¹¶ä¸”ä¸ç›¸å…³çš„æ“ä½œï¼Œè€Œä½ æƒ³é¿å…è®©è¿™äº›æ“ä½œâ€œæ±¡æŸ“â€è¿™äº›å¯¹è±¡çš„ç±»ã€‚</li></ul><h4 id="å®ç°-18" tabindex="-1"><a class="header-anchor" href="#å®ç°-18"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/Visitor.png" alt="è®¿é—®è€…æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">visitor</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è®¿é—®è€…æ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Visitor</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">ElementA</span> elementA<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">ElementB</span> elementB<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“è®¿é—®è€…å®ç°</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteVisitor</span> <span class="token keyword">implements</span> <span class="token class-name">Visitor</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">ElementA</span> elementA<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è®¿é—®è€…å¯¹å…ƒç´ Aè¿›è¡Œæ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token class-name">ElementB</span> elementB<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è®¿é—®è€…å¯¹å…ƒç´ Bè¿›è¡Œæ“ä½œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…ƒç´ æ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Element</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Visitor</span> visitor<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“å…ƒç´ å®ç°</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ElementA</span> <span class="token keyword">implements</span> <span class="token class-name">Element</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Visitor</span> visitor<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        visitor<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ElementB</span> <span class="token keyword">implements</span> <span class="token class-name">Element</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Visitor</span> visitor<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        visitor<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å¯¹è±¡ç»“æ„</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ObjectStructure</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">&gt;</span></span> elements <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addElement</span><span class="token punctuation">(</span><span class="token class-name">Element</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        elements<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Visitor</span> visitor<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element <span class="token operator">:</span> elements<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            element<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>visitor<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VisitorPattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">ObjectStructure</span> objectStructure <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectStructure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        objectStructure<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ElementA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        objectStructure<span class="token punctuation">.</span><span class="token function">addElement</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ElementB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Visitor</span> visitor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteVisitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        objectStructure<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>visitor<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="çŠ¶æ€æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#çŠ¶æ€æ¨¡å¼"><span>çŠ¶æ€æ¨¡å¼</span></a></h3><p>å½“ä¸€ä¸ªå¯¹è±¡å†…åœ¨çŠ¶æ€æ”¹å˜æ—¶å…è®¸å…¶æ”¹å˜è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹èµ·æ¥åƒæ”¹å˜äº†å…¶ç±»ã€‚</p><h4 id="è§£é‡Š-22" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-22"><span>è§£é‡Š</span></a></h4><p>çŠ¶æ€æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºã€‚çŠ¶æ€æ¨¡å¼é€šè¿‡å°†å¯¹è±¡çš„çŠ¶æ€å°è£…æˆä¸åŒçš„ç±»ï¼Œå¹¶å°†å¯¹è±¡çš„è¡Œä¸ºå§”æ‰˜ç»™è¿™äº›çŠ¶æ€ç±»ä¹‹ä¸€æ¥å®ç°ã€‚å½“å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šæ”¹å˜å§”æ‰˜çš„çŠ¶æ€ç±»ï¼Œä»è€Œæ”¹å˜å®ƒçš„è¡Œä¸ºã€‚</p><p>çŠ¶æ€æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä¸åŒçš„çŠ¶æ€å°è£…æˆç‹¬ç«‹çš„ç±»ï¼Œè¿™äº›çŠ¶æ€ç±»éƒ½å®ç°äº†ç›¸åŒçš„æ¥å£æˆ–ç»§æ‰¿äº†ç›¸åŒçš„æŠ½è±¡ç±»ã€‚åœ¨ä½¿ç”¨çŠ¶æ€æ¨¡å¼æ—¶ï¼Œå¯ä»¥é€šè¿‡æ”¹å˜å¯¹è±¡çš„çŠ¶æ€ç±»æ¥æ”¹å˜å¯¹è±¡çš„è¡Œä¸ºï¼Œè€Œä¸éœ€è¦åœ¨å¯¹è±¡çš„æ–¹æ³•ä¸­ä½¿ç”¨å¤§é‡çš„æ¡ä»¶åˆ¤æ–­è¯­å¥ã€‚</p><h4 id="ä¼˜ç‚¹-21" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-21"><span>ä¼˜ç‚¹</span></a></h4><ul><li>ç»“æ„æ¸…æ™°ã€‚é¿å…äº†è¿‡å¤šçš„switch...caseæˆ–è€…if...elseè¯­å¥çš„ä½¿ç”¨ï¼Œé¿å…äº†ç¨‹åºçš„å¤æ‚æ€§,æé«˜ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚</li><li>éµå¾ªè®¾è®¡åŸåˆ™ã€‚å¾ˆå¥½åœ°ä½“ç°äº†å¼€é—­åŸåˆ™å’Œå•ä¸€èŒè´£åŸåˆ™ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½æ˜¯ä¸€ä¸ªå­ç±»ï¼Œä½ è¦å¢åŠ çŠ¶æ€å°±è¦å¢åŠ å­ç±»ï¼Œä½ è¦ä¿®æ”¹çŠ¶æ€ï¼Œä½ åªä¿®æ”¹ä¸€ä¸ªå­ç±»å°±å¯ä»¥äº†ã€‚</li><li>å°è£…æ€§éå¸¸å¥½ã€‚</li></ul><h4 id="ç¼ºç‚¹-11" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹-11"><span>ç¼ºç‚¹</span></a></h4><p>å­ç±»ä¼šå¤ªå¤šï¼Œä¹Ÿå°±æ˜¯ç±»è†¨èƒ€ ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>åœ¨æ•°æ®åº“ä¸­å»ºç«‹ä¸€ä¸ªçŠ¶æ€è¡¨ï¼Œç„¶åæ ¹æ®çŠ¶æ€æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</li></ul><h4 id="ä½¿ç”¨åœºæ™¯-8" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-8"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li>è¡Œä¸ºéšçŠ¶æ€æ”¹å˜è€Œæ”¹å˜çš„åœºæ™¯ã€‚</li><li>æ¡ä»¶ã€åˆ†æ”¯åˆ¤æ–­è¯­å¥çš„æ›¿ä»£è€…ã€‚</li></ul><h4 id="æ³¨æ„-10" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-10"><span>æ³¨æ„</span></a></h4><ul><li>æŠŠçŠ¶æ€å¯¹è±¡å£°æ˜ä¸ºé™æ€å¸¸é‡ï¼Œæœ‰å‡ ä¸ªçŠ¶æ€å¯¹è±¡å°±å£°æ˜å‡ ä¸ªé™æ€å¸¸é‡ã€‚</li><li>ç¯å¢ƒè§’è‰²å…·æœ‰çŠ¶æ€æŠ½è±¡è§’è‰²å®šä¹‰çš„æ‰€æœ‰è¡Œä¸ºï¼Œå…·ä½“æ‰§è¡Œä½¿ç”¨å§”æ‰˜æ–¹å¼ã€‚</li></ul><h4 id="å®ç°-19" tabindex="-1"><a class="header-anchor" href="#å®ç°-19"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/State.png" alt="çŠ¶æ€æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">state</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//æŠ½è±¡çŠ¶æ€è§’è‰²</span></span>
<span class="line"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">State</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//å®šä¹‰ä¸€ä¸ªç¯å¢ƒè§’è‰²ï¼Œæä¾›å­ç±»è®¿é—®</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//è®¾ç½®ç¯å¢ƒè§’è‰²</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setContext</span><span class="token punctuation">(</span><span class="token class-name">Context</span> _context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> _context<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//è¡Œä¸º1</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//è¡Œä¸º2</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//å…·ä½“çŠ¶æ€è§’è‰²</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteState1</span> <span class="token keyword">extends</span> <span class="token class-name">State</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">//æœ¬çŠ¶æ€ä¸‹å¿…é¡»å¤„ç†çš„é€»è¾‘</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;å¿…é¡»åšçš„äº‹æƒ…&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">//è®¾ç½®å½“å‰çŠ¶æ€ä¸ºstat2</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setCurrentState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span><span class="token constant">STATE2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">//è¿‡æ¸¡åˆ°state2çŠ¶æ€ï¼Œç”±Contextå®ç°</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteState2</span> <span class="token keyword">extends</span> <span class="token class-name">State</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">//è®¾ç½®å½“å‰çŠ¶æ€ä¸ºstate1</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setCurrentState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span><span class="token constant">STATE1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">//è¿‡æ¸¡åˆ°state1çŠ¶æ€ï¼Œç”±Contextå®ç°</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">//æœ¬çŠ¶æ€ä¸‹å¿…é¡»å¤„ç†çš„é€»è¾‘</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;å¿…é¡»åšçš„äº‹æƒ…&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//å®šä¹‰çŠ¶æ€</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">State</span> <span class="token constant">STATE1</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteState1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">State</span> <span class="token constant">STATE2</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteState2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">//å½“å‰çŠ¶æ€</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">State</span> currentState<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//è·å¾—å½“å‰çŠ¶æ€</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">State</span> <span class="token function">getCurrentState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> currentState<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//è®¾ç½®å½“å‰çŠ¶æ€</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCurrentState</span><span class="token punctuation">(</span><span class="token class-name">State</span> currentState<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>currentState <span class="token operator">=</span> currentState<span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">//åˆ‡æ¢çŠ¶æ€ æ³¨æ„è¿™ä¸ªåœ°æ–¹çš„ this </span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>currentState<span class="token punctuation">.</span><span class="token function">setContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//è¡Œä¸ºå§”æ‰˜</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>currentState<span class="token punctuation">.</span><span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>currentState<span class="token punctuation">.</span><span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">//å…·ä½“ç¯å¢ƒè§’è‰²</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StatePattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">//å®šä¹‰ç¯å¢ƒè§’è‰²</span></span>
<span class="line">        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">//åˆå§‹åŒ–çŠ¶æ€</span></span>
<span class="line">        context<span class="token punctuation">.</span><span class="token function">setCurrentState</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConcreteState1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">//è¡Œä¸ºæ‰§è¡Œ</span></span>
<span class="line">        context<span class="token punctuation">.</span><span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        context<span class="token punctuation">.</span><span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        context<span class="token punctuation">.</span><span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        context<span class="token punctuation">.</span><span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// è¿è¡Œç»“æœ</span></span>
<span class="line"><span class="token comment">// ConcreteState1å¿…é¡»åšçš„äº‹æƒ…</span></span>
<span class="line"><span class="token comment">// ConcreteState2å¿…é¡»åšçš„äº‹æƒ…</span></span>
<span class="line"><span class="token comment">// ConcreteState2å¿…é¡»åšçš„äº‹æƒ…</span></span>
<span class="line"><span class="token comment">// ConcreteState1å¿…é¡»åšçš„äº‹æƒ…</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è§£é‡Šå™¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è§£é‡Šå™¨æ¨¡å¼"><span>è§£é‡Šå™¨æ¨¡å¼</span></a></h3><p>ç»™å®šä¸€é—¨è¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•çš„ä¸€ç§è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¯¥è§£é‡Šå™¨ä½¿ç”¨è¯¥è¡¨ç¤ºæ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚</p><h4 id="è§£é‡Š-23" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-23"><span>è§£é‡Š</span></a></h4><p>è§£é‡Šå™¨æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå®ƒç”¨äºå®šä¹‰ä¸€ä¸ªè¯­è¨€çš„è¯­æ³•ï¼Œå¹¶è§£æè¯¥è¯­è¨€ä¸­çš„è¡¨è¾¾å¼ã€‚è¯¥æ¨¡å¼å°†æ¯ä¸ªè¯­æ³•è§„åˆ™è¡¨ç¤ºä¸ºä¸€ä¸ªç±»ï¼Œå¹¶å®šä¹‰äº†è§£é‡Šæ–¹æ³•æ¥è§£æè¡¨è¾¾å¼ã€‚é€šè¿‡ä½¿ç”¨è§£é‡Šå™¨æ¨¡å¼ï¼Œå¯ä»¥è½»æ¾åœ°æ‰©å±•å’Œä¿®æ”¹è¯­è¨€çš„è¯­æ³•ï¼ŒåŒæ—¶ä½¿è§£æè¿‡ç¨‹æ›´åŠ çµæ´»å’Œå¯å®šåˆ¶ã€‚</p><p>åœ¨è§£é‡Šå™¨æ¨¡å¼ä¸­ï¼Œé€šå¸¸æœ‰ä¸¤ç§ç±»å‹çš„ç±»ï¼šç»ˆç»“ç¬¦è¡¨è¾¾å¼å’Œéç»ˆç»“ç¬¦è¡¨è¾¾å¼ã€‚ç»ˆç»“ç¬¦è¡¨è¾¾å¼ä»£è¡¨è¯­è¨€ä¸­çš„åŸºæœ¬å…ƒç´ ï¼Œè€Œéç»ˆç»“ç¬¦è¡¨è¾¾å¼ç”±å¤šä¸ªç»ˆç»“ç¬¦è¡¨è¾¾å¼å’Œå…¶ä»–éç»ˆç»“ç¬¦è¡¨è¾¾å¼ç»„æˆã€‚</p><h4 id="ä¼˜ç‚¹-22" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-22"><span>ä¼˜ç‚¹</span></a></h4><p>è§£é‡Šå™¨æ˜¯ä¸€ä¸ªç®€å•è¯­æ³•åˆ†æå·¥å…·ï¼Œå®ƒæœ€æ˜¾è‘—çš„ä¼˜ç‚¹å°±æ˜¯æ‰©å±•æ€§ï¼Œä¿®æ”¹è¯­æ³•è§„åˆ™åªè¦ä¿®æ”¹ç›¸åº”çš„éç»ˆç»“ç¬¦è¡¨è¾¾å¼å°±å¯ä»¥äº†ï¼Œè‹¥æ‰©å±•è¯­æ³•ï¼Œåˆ™åªè¦å¢åŠ éç»ˆç»“ç¬¦ç±»å°±å¯ä»¥äº†ã€‚</p><h4 id="ç¼ºç‚¹-12" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹-12"><span>ç¼ºç‚¹</span></a></h4><ul><li>è§£é‡Šå™¨æ¨¡å¼ä¼šå¼•èµ·ç±»è†¨èƒ€</li><li></li></ul><p>è§£é‡Šå™¨æ¨¡å¼é‡‡ç”¨é€’å½’è°ƒç”¨æ–¹æ³•ã€‚æ¯ä¸ªéç»ˆç»“ç¬¦è¡¨è¾¾å¼åªå…³å¿ƒä¸è‡ªå·±æœ‰å…³çš„è¡¨è¾¾å¼ï¼Œæ¯ä¸ªè¡¨è¾¾å¼éœ€è¦çŸ¥é“æœ€ç»ˆçš„ç»“æœï¼Œå¿…é¡»ä¸€å±‚ä¸€å±‚åœ°å‰¥èŒ§ï¼Œæ— è®ºæ˜¯é¢å‘è¿‡ç¨‹çš„è¯­è¨€è¿˜æ˜¯é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œé€’å½’éƒ½æ˜¯åœ¨å¿…è¦æ¡ä»¶ä¸‹ä½¿ç”¨çš„ï¼Œå®ƒå¯¼è‡´è°ƒè¯•éå¸¸å¤æ‚ã€‚æƒ³æƒ³çœ‹ï¼Œå¦‚æœè¦æ’æŸ¥ä¸€ä¸ªè¯­æ³•é”™è¯¯ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯è¦ä¸€ä¸ªæ–­ç‚¹ä¸€ä¸ªæ–­ç‚¹åœ°è°ƒè¯•ä¸‹å»ï¼Œç›´åˆ°æœ€å°çš„è¯­æ³•å•å…ƒã€‚</p><ul><li>æ•ˆç‡é—®é¢˜</li></ul><h4 id="ä½¿ç”¨åœºæ™¯-9" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-9"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li>é‡å¤å‘ç”Ÿçš„é—®é¢˜å¯ä»¥ä½¿ç”¨è§£é‡Šå™¨æ¨¡å¼</li><li>ä¸€ä¸ªç®€å•è¯­æ³•éœ€è¦è§£é‡Šçš„åœºæ™¯</li></ul><h4 id="å®ç°-20" tabindex="-1"><a class="header-anchor" href="#å®ç°-20"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/Interpreter.png" alt="è§£é‡Šå™¨æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">interpreter</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// æŠ½è±¡è¡¨è¾¾å¼ç±»</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Expression</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ç»ˆç»“ç¬¦è¡¨è¾¾å¼ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">NumberExpression</span> <span class="token keyword">implements</span> <span class="token class-name">Expression</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">int</span> number<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">NumberExpression</span><span class="token punctuation">(</span><span class="token keyword">int</span> number<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>number <span class="token operator">=</span> number<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> number<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// éç»ˆç»“ç¬¦è¡¨è¾¾å¼ç±» åŠ æ³•</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">AddExpression</span> <span class="token keyword">implements</span> <span class="token class-name">Expression</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Expression</span> leftExpression<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Expression</span> rightExpression<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">AddExpression</span><span class="token punctuation">(</span><span class="token class-name">Expression</span> leftExpression<span class="token punctuation">,</span> <span class="token class-name">Expression</span> rightExpression<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>leftExpression <span class="token operator">=</span> leftExpression<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>rightExpression <span class="token operator">=</span> rightExpression<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> leftExpression<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> rightExpression<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// éç»ˆç»“ç¬¦è¡¨è¾¾å¼ç±» å‡æ³•</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">SubtractExpression</span> <span class="token keyword">implements</span> <span class="token class-name">Expression</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Expression</span> leftExpression<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Expression</span> rightExpression<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">SubtractExpression</span><span class="token punctuation">(</span><span class="token class-name">Expression</span> leftExpression<span class="token punctuation">,</span> <span class="token class-name">Expression</span> rightExpression<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>leftExpression <span class="token operator">=</span> leftExpression<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>rightExpression <span class="token operator">=</span> rightExpression<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> leftExpression<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> rightExpression<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Interpreter</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// æ„å»ºè§£é‡Šå™¨è¡¨è¾¾å¼ï¼š(5 + 2) - (4 - 1)</span></span>
<span class="line">        <span class="token class-name">Expression</span> expression <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubtractExpression</span><span class="token punctuation">(</span></span>
<span class="line">                <span class="token keyword">new</span> <span class="token class-name">AddExpression</span><span class="token punctuation">(</span></span>
<span class="line">                        <span class="token keyword">new</span> <span class="token class-name">NumberExpression</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token keyword">new</span> <span class="token class-name">NumberExpression</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token keyword">new</span> <span class="token class-name">SubtractExpression</span><span class="token punctuation">(</span></span>
<span class="line">                        <span class="token keyword">new</span> <span class="token class-name">NumberExpression</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">                        <span class="token keyword">new</span> <span class="token class-name">NumberExpression</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// è§£æå¹¶è®¡ç®—è¡¨è¾¾å¼çš„ç»“æœ</span></span>
<span class="line">        <span class="token keyword">int</span> result <span class="token operator">=</span> expression<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è§£é‡Šå™¨æ¨¡å¼è®¡ç®—ç»“æœï¼š&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="äº«å…ƒæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#äº«å…ƒæ¨¡å¼"><span>äº«å…ƒæ¨¡å¼</span></a></h3><p>ä½¿ç”¨å…±äº«å¯¹è±¡å¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡çš„ç»†ç²’åº¦çš„å¯¹è±¡ã€‚</p><h4 id="ä¼˜ç‚¹-23" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-23"><span>ä¼˜ç‚¹</span></a></h4><p>å¯ä»¥å¤§å¤§å‡å°‘åº”ç”¨ç¨‹åºåˆ›å»ºçš„å¯¹è±¡ï¼Œé™ä½ç¨‹åºå†…å­˜çš„å ç”¨ï¼Œå¢å¼ºç¨‹åºçš„æ€§èƒ½</p><h4 id="ç¼ºç‚¹-13" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹-13"><span>ç¼ºç‚¹</span></a></h4><p>æé«˜äº†ç³»ç»Ÿå¤æ‚æ€§ï¼Œéœ€è¦åˆ†ç¦»å‡ºå¤–éƒ¨çŠ¶æ€å’Œå†…éƒ¨çŠ¶æ€ï¼Œè€Œä¸”å¤–éƒ¨çŠ¶æ€å…·æœ‰å›ºåŒ–ç‰¹æ€§ï¼Œä¸åº”è¯¥éšå†…éƒ¨çŠ¶æ€æ”¹å˜è€Œæ”¹å˜ï¼Œå¦åˆ™å¯¼è‡´ç³»ç»Ÿçš„é€»è¾‘æ··ä¹±ã€‚</p><h4 id="ä½¿ç”¨åœºæ™¯-10" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-10"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li>ç³»ç»Ÿä¸­å­˜åœ¨å¤§é‡çš„ç›¸ä¼¼å¯¹è±¡ã€‚</li><li>ç»†ç²’åº¦çš„å¯¹è±¡éƒ½å…·å¤‡è¾ƒæ¥è¿‘çš„å¤–éƒ¨çŠ¶æ€ï¼Œè€Œä¸”å†…éƒ¨çŠ¶æ€ä¸ç¯å¢ƒæ— å…³ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹è±¡æ²¡æœ‰ç‰¹å®šèº«ä»½ã€‚</li><li>éœ€è¦ç¼“å†²æ± çš„åœºæ™¯ã€‚</li></ul><h4 id="æ³¨æ„-11" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„-11"><span>æ³¨æ„</span></a></h4><p>å…³äºçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œåœ¨éœ€è¦çš„åœ°æ–¹è€ƒè™‘ä¸€ä¸‹çº¿ç¨‹å®‰å…¨ï¼Œåœ¨å¤§éƒ¨åˆ†çš„åœºæ™¯ä¸‹éƒ½ä¸ç”¨è€ƒè™‘ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨äº«å…ƒæ¨¡å¼æ—¶ï¼Œå¯¹</p><p>è±¡æ± ä¸­çš„äº«å…ƒå¯¹è±¡å°½é‡å¤šï¼Œå¤šåˆ°è¶³å¤Ÿæ»¡è¶³ä¸šåŠ¡ä¸ºæ­¢ã€‚</p><h4 id="å®ç°-21" tabindex="-1"><a class="header-anchor" href="#å®ç°-21"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/Flyweight.png" alt="äº«å…ƒæ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">flyweight</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// äº«å…ƒæ¥å£</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Flyweight</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å…·ä½“äº«å…ƒç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteFlyweight</span> <span class="token keyword">implements</span> <span class="token class-name">Flyweight</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">String</span> intrinsicState<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">ConcreteFlyweight</span><span class="token punctuation">(</span><span class="token class-name">String</span> intrinsicState<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>intrinsicState <span class="token operator">=</span> intrinsicState<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å…·ä½“äº«å…ƒå¯¹è±¡æ“ä½œï¼Œå†…éƒ¨çŠ¶æ€ä¸ºï¼š&quot;</span> <span class="token operator">+</span> intrinsicState<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// äº«å…ƒå·¥å‚ç±»</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">FlyweightFactory</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Flyweight</span><span class="token punctuation">&gt;</span></span> flyweights <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Flyweight</span> <span class="token function">getFlyweight</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>flyweights<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> flyweights<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">Flyweight</span> flyweight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteFlyweight</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            flyweights<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> flyweight<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">return</span> flyweight<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// å®¢æˆ·ç«¯ä»£ç </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FlyweightPattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">FlyweightFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FlyweightFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Flyweight</span> flyweight1 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getFlyweight</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        flyweight1<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Flyweight</span> flyweight2 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getFlyweight</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        flyweight2<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token class-name">Flyweight</span> flyweight3 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getFlyweight</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        flyweight3<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ¡¥æ¢æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#æ¡¥æ¢æ¨¡å¼"><span>æ¡¥æ¢æ¨¡å¼</span></a></h3><p>å°†æŠ½è±¡å’Œå®ç°è§£è€¦ï¼Œä½¿å¾—ä¸¤è€…å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚</p><h4 id="ä¼˜ç‚¹-24" tabindex="-1"><a class="header-anchor" href="#ä¼˜ç‚¹-24"><span>ä¼˜ç‚¹</span></a></h4><ul><li>æŠ½è±¡å’Œå®ç°åˆ†ç¦»ã€‚è¿™ä¹Ÿæ˜¯æ¡¥æ¢æ¨¡å¼çš„ä¸»è¦ç‰¹ç‚¹ï¼Œå®ƒå®Œå…¨æ˜¯ä¸ºäº†è§£å†³ç»§æ‰¿çš„ç¼ºç‚¹è€Œæå‡ºçš„è®¾è®¡æ¨¡å¼ã€‚åœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œå®ç°å¯ä»¥ä¸å—æŠ½è±¡çš„çº¦æŸï¼Œä¸ç”¨å†ç»‘å®šåœ¨ä¸€ä¸ªå›ºå®šçš„æŠ½è±¡å±‚æ¬¡ä¸Šã€‚</li><li>ä¼˜ç§€çš„æ‰©å……èƒ½åŠ›</li><li>å®ç°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜</li></ul><h4 id="ä½¿ç”¨åœºæ™¯-11" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-11"><span>ä½¿ç”¨åœºæ™¯</span></a></h4><ul><li>ä¸å¸Œæœ›æˆ–ä¸é€‚ç”¨ä½¿ç”¨ç»§æ‰¿çš„åœºæ™¯</li><li>æ¥å£æˆ–æŠ½è±¡ç±»ä¸ç¨³å®šçš„åœºæ™¯</li><li>é‡ç”¨æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯</li></ul><h4 id="è§£é‡Š-24" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-24"><span>è§£é‡Š</span></a></h4><p>æ¡¥æ¢æ¨¡å¼ï¼ˆBridge Patternï¼‰æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œç”¨äºå°†æŠ½è±¡éƒ¨åˆ†ä¸å…¶å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚è¯¥æ¨¡å¼é€šè¿‡å°†æŠ½è±¡å’Œå®ç°è§£è€¦ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°è¿›è¡Œæ‰©å±•å’Œä¿®æ”¹ã€‚</p><p>æ¡¥æ¢æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä¸€ä¸ªç±»çš„æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚æŠ½è±¡éƒ¨åˆ†é€šå¸¸ç”±ä¸€ä¸ªæŠ½è±¡ç±»æˆ–æ¥å£è¡¨ç¤ºï¼Œå®ƒå®šä¹‰äº†æŠ½è±¡ç±»å’Œå®ç°ç±»ä¹‹é—´çš„æ¥å£ã€‚å®ç°éƒ¨åˆ†ç”±å…·ä½“å®ç°ç±»è¡¨ç¤ºï¼Œå®ƒå®ç°äº†æŠ½è±¡ç±»æˆ–æ¥å£å®šä¹‰çš„æ–¹æ³•ã€‚</p><p>é€šè¿‡æ¡¥æ¢æ¨¡å¼ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°é€‰æ‹©å’Œç»„åˆæŠ½è±¡ç±»å’Œå®ç°ç±»ï¼Œä»è€Œå®ç°ä¸åŒçš„åŠŸèƒ½ç»„åˆã€‚è¿™ç§çµæ´»æ€§ä½¿å¾—æ¡¥æ¢æ¨¡å¼ç‰¹åˆ«é€‚ç”¨äºéœ€è¦åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢å’Œç»„åˆä¸åŒå®ç°çš„æƒ…å†µã€‚</p><h4 id="å®ç°-22" tabindex="-1"><a class="header-anchor" href="#å®ç°-22"><span>å®ç°</span></a></h4><img src="/mars/images/book/designpattern/Bridge.PNG" alt="æ¡¥æ¢æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">bridge</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//å®ç°åŒ–è§’è‰²  å®ƒæ²¡æœ‰ä»»ä½•ç‰¹æ®Šçš„åœ°æ–¹ï¼Œå°±æ˜¯ä¸€ä¸ªä¸€èˆ¬çš„æ¥å£ï¼Œå®šä¹‰è¦å®ç°çš„æ–¹æ³•ã€‚</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Implementor</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//åŸºæœ¬æ–¹æ³•</span></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">void</span> <span class="token function">doAnything</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//å…·ä½“å®ç°åŒ–è§’è‰²  å®šä¹‰äº†ä¸¤ä¸ªå…·ä½“å®ç°åŒ–è§’è‰²â€”â€”ä»£è¡¨ä¸¤ä¸ªä¸åŒçš„ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteImplementor1</span> <span class="token keyword">implements</span> <span class="token class-name">Implementor</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">//ä¸šåŠ¡é€»è¾‘å¤„ç†</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;3.&quot;</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;æ­£åœ¨åšä¸€äº›åŸºç¡€çš„äº‹æƒ…&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doAnything</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">//ä¸šåŠ¡é€»è¾‘å¤„ç†</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;5.&quot;</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;æ­£åœ¨åšä¸€äº›è‡ªå·±æƒ³åšçš„äº‹æƒ…!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteImplementor2</span> <span class="token keyword">implements</span> <span class="token class-name">Implementor</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">//ä¸šåŠ¡é€»è¾‘å¤„ç†</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;æ­£åœ¨åšä¸€äº›åŸºç¡€çš„äº‹æƒ…&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doAnything</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">//ä¸šåŠ¡é€»è¾‘å¤„ç†</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;æ­£åœ¨åšä¸€äº›è‡ªå·±æƒ³åšçš„äº‹æƒ…!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//æŠ½è±¡åŒ–è§’è‰²  ä¸ºä»€ä¹ˆè¦å¢åŠ ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Ÿç­”æ¡ˆæ˜¯ä¸ºäº†æé†’å­ç±»ï¼Œä½ å¿…é¡»åšè¿™é¡¹å·¥ ä½œï¼ŒæŒ‡å®šå®ç°è€…ï¼Œç‰¹åˆ«æ˜¯å·²ç»æ˜ç¡®äº†å®ç°è€…ï¼Œåˆ™å°½é‡æ¸…æ™°æ˜ç¡®åœ°å®šä¹‰å‡ºæ¥ã€‚</span></span>
<span class="line"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Abstraction</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//å®šä¹‰å¯¹å®ç°åŒ–è§’è‰²çš„å¼•ç”¨</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Implementor</span> imp<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//çº¦æŸå­ç±»å¿…é¡»å®ç°è¯¥æ„é€ å‡½æ•°</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Abstraction</span><span class="token punctuation">(</span><span class="token class-name">Implementor</span> _imp<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>imp <span class="token operator">=</span> _imp<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//è‡ªèº«çš„è¡Œä¸ºå’Œå±æ€§</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;2.æŠ½è±¡çˆ¶ç±»æ¥æ”¶åˆ°äº†è¯·æ±‚ï¼Œæ­£åœ¨é€šçŸ¥å­ç±»å¹²æ´»&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>imp<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//è·å¾—å®ç°åŒ–è§’è‰²</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">Implementor</span> <span class="token function">getImp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> imp<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//å…·ä½“æŠ½è±¡åŒ–è§’è‰² å¦‚æœæˆ‘ä»¬çš„å®ç°åŒ–è§’è‰²æœ‰å¾ˆå¤šçš„å­æ¥å£ï¼Œç„¶åæ˜¯ä¸€å †çš„å­å®ç°ã€‚å¦‚æœåœ¨æ„é€ å‡½æ•°ä¸­ä¸ä¼ é€’ä¸€ä¸ªå°½é‡æ˜ç¡®çš„å®ç°è€…ï¼Œä»£ç å°±å¾ˆä¸æ¸…æ™°ã€‚</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">RefinedAbstraction</span> <span class="token keyword">extends</span> <span class="token class-name">Abstraction</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//è¦†å†™æ„é€ å‡½æ•°</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">RefinedAbstraction</span><span class="token punctuation">(</span><span class="token class-name">Implementor</span> _imp<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">(</span>_imp<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//ä¿®æ­£çˆ¶ç±»çš„è¡Œä¸º</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;1.å­ç±»é‡å†™äº†çˆ¶ç±»æ–¹æ³•&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">/* * ä¸šåŠ¡å¤„ç†... */</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;4.å­ç±»é€šè¿‡çˆ¶ç±»æä¾›çš„å®ç°åŒ–è§’è‰²é¢å¤–åšäº†ä¸€äº›äº‹æƒ…&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getImp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doAnything</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//åœºæ™¯ç±»</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BridgePattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">//å®šä¹‰ä¸€ä¸ªå®ç°åŒ–è§’è‰²</span></span>
<span class="line">        <span class="token class-name">Implementor</span> imp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteImplementor1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">//å®šä¹‰ä¸€ä¸ªæŠ½è±¡åŒ–è§’è‰²</span></span>
<span class="line">        <span class="token class-name">Abstraction</span> abs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RefinedAbstraction</span><span class="token punctuation">(</span>imp<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">//æ‰§è¡Œè¡Œæ–‡</span></span>
<span class="line">        abs<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è®¾è®¡æ¨¡å¼pk" tabindex="-1"><a class="header-anchor" href="#è®¾è®¡æ¨¡å¼pk"><span>è®¾è®¡æ¨¡å¼PK</span></a></h2><h3 id="è®¾è®¡æ¨¡å¼åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#è®¾è®¡æ¨¡å¼åˆ†ç±»"><span>è®¾è®¡æ¨¡å¼åˆ†ç±»</span></a></h3><h4 id="åˆ›å»ºå‹æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå‹æ¨¡å¼"><span>åˆ›å»ºå‹æ¨¡å¼</span></a></h4><p>è¯¥æ¨¡å¼æä¾›äº†ä¸€ç§åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶éšè—åˆ›å»ºé€»è¾‘çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨<code>new</code>è¿ç®—ç¬¦ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡ï¼Œå®ƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯å°†å¯¹è±¡çš„åˆ›å»ºä¸ä½¿ç”¨åˆ†ç¦»ã€‚</p><table><thead><tr><th style="text-align:center;">æ¨¡å¼</th><th style="text-align:center;">åŠŸèƒ½</th><th style="text-align:center;">ç†è§£</th></tr></thead><tbody><tr><td style="text-align:center;">å•ä¾‹æ¨¡å¼</td><td style="text-align:center;">æŸä¸ªç±»åªèƒ½ç”Ÿæˆä¸€ä¸ªå®ä¾‹ï¼Œè¯¥ç±»æä¾›äº†ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ä¾›å¤–éƒ¨è·å–è¯¥å®ä¾‹</td><td style="text-align:center;">æŸä¸ªç±»èƒ½è‡ªè¡Œç”Ÿæˆå…¨å±€å”¯ä¸€å®ä¾‹ã€‚</td></tr><tr><td style="text-align:center;">å·¥å‚æ–¹æ³•æ¨¡å¼</td><td style="text-align:center;">å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºï¼ˆä¸€ç±»ï¼‰äº§å“çš„æ¥å£ï¼Œç”±å­ç±»å†³å®šç”Ÿäº§ä»€ä¹ˆäº§å“</td><td style="text-align:center;">ç”±å®ç°å·¥å‚æ¥å£çš„å…·ä½“å­ç±»å·¥å‚å†³å®šç”Ÿäº§ä»€ä¹ˆäº§å“ï¼Œåªèƒ½ç”Ÿäº§ä¸€ç±»äº§å“ã€‚</td></tr><tr><td style="text-align:center;">æŠ½è±¡å·¥å‚æ¨¡å¼</td><td style="text-align:center;">æä¾›ä¸€ä¸ªåˆ›å»ºäº§å“æ—çš„æ¥å£ï¼Œå…¶æ¯ä¸ªå­ç±»å¯ä»¥ç”Ÿäº§ä¸€ç³»åˆ—ç›¸å…³çš„äº§å“</td><td style="text-align:center;">å·¥å‚ä¹ŸæŠ½è±¡ï¼Œäº§å“ä¹ŸæŠ½è±¡ï¼Œå¯ä»¥ç”Ÿäº§å¤šç±»äº§å“ã€‚</td></tr><tr><td style="text-align:center;">å»ºé€ è€…ï¼ˆåˆ›å»ºè€…ï¼‰æ¨¡å¼</td><td style="text-align:center;">å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡åˆ†è§£æˆå¤šä¸ªç›¸å¯¹ç®€å•çš„éƒ¨åˆ†ï¼Œç„¶åæ ¹æ®ä¸åŒéœ€è¦åˆ†åˆ«åˆ›å»ºå®ƒä»¬ï¼Œæœ€åæ„å»ºæˆè¯¥å¤æ‚å¯¹è±¡ã€‚å¯ç®€å•ç†è§£ä¸ºå¯¹å¤æ‚å¯¹è±¡è¿›è¡Œåˆ†æ¨¡å—åˆ›å»º</td><td style="text-align:center;">å°†å¤æ‚çš„å¯¹è±¡åˆ†è§£ä¸ºå¤šä¸ªç®€å•çš„å¯¹è±¡ï¼Œç„¶ååˆ†æ­¥éª¤æ„å»ºã€‚</td></tr><tr><td style="text-align:center;">åŸå‹æ¨¡å¼</td><td style="text-align:center;">å°†ä¸€ä¸ªå¯¹è±¡ä½œä¸ºåŸå‹ï¼Œé€šè¿‡å¯¹å…¶è¿›è¡Œå¤åˆ¶è€Œå…‹éš†å‡ºå¤šä¸ªå’ŒåŸå‹ç±»ä¼¼çš„æ–°å®ä¾‹</td><td style="text-align:center;">åˆ©ç”¨ç°æœ‰å¯¹è±¡ä½œä¸ºâ€œåŸå‹â€ï¼Œé€šè¿‡å…‹éš†ï¼Œåˆ›å»ºç›¸åŒæˆ–ç›¸ä¼¼å¯¹è±¡ã€‚</td></tr></tbody></table><h4 id="ç»“æ„å‹æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ç»“æ„å‹æ¨¡å¼"><span>ç»“æ„å‹æ¨¡å¼</span></a></h4><p>è¯¥æ¨¡å¼å…³æ³¨ç±»å’Œå¯¹è±¡çš„ç»„åˆï¼Œå³å¦‚ä½•å°†ç±»æˆ–å¯¹è±¡æŒ‰æŸç§å¸ƒå±€ç»„æˆæ›´å¤§çš„ç»“æ„ã€‚</p><table><thead><tr><th style="text-align:center;">æ¨¡å¼</th><th style="text-align:center;">åŠŸèƒ½</th><th style="text-align:center;">ç†è§£</th></tr></thead><tbody><tr><td style="text-align:center;">é€‚é…å™¨æ¨¡å¼</td><td style="text-align:center;">å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œï¼Œè¯´ç™½äº†å°±æ˜¯æ¥å£è½¬æ¢</td><td style="text-align:center;">åœ¨å¼€å‘è€…è°ƒç”¨çš„æ¥å£å’Œç°æœ‰æ¥å£ä¸ä¸€è‡´æ—¶ï¼Œå¢åŠ ä¸€ä¸ª&quot;è½¬æ¢æ¥å£&quot;ã€‚</td></tr><tr><td style="text-align:center;">æ¡¥æ¢ï¼ˆæ¡¥æ¥ï¼‰æ¨¡å¼</td><td style="text-align:center;">å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼ˆè¿™ä¸ªè¯´æ³•ä¸å¤ªç›´è§‚ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºä»æŠ½è±¡ç±»å’Œæ¥å£ä¸¤ä¸ªç»´åº¦æ¥ç»„åˆæƒ³è¦çš„å¯¹è±¡ï¼‰ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–</td><td style="text-align:center;">ç”¨æŠ½è±¡ç±»å’Œæ¥å£å®šä¹‰ä¸¤ä¸ªå¯å˜ç»´åº¦ï¼Œåˆ†åˆ«å¯¹å…¶è¿›è¡Œä¸åŒçš„å®ç°ï¼Œä»è€Œç»„æˆå¤šç§ä¸åŒå¯¹è±¡ã€‚</td></tr><tr><td style="text-align:center;">ç»„åˆæ¨¡å¼</td><td style="text-align:center;">å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤º&quot;éƒ¨åˆ†-æ•´ä½“&quot;çš„å±‚æ¬¡ç»“æ„ï¼Œä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§</td><td style="text-align:center;">å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œè®©æ ‘æå¯¹è±¡å’Œæ ‘å¶å¯¹è±¡éƒ½å®ç°è¯¥æ¥å£ï¼Œå¹¶å…·æœ‰ä¸åŒçš„å®ç°ï¼Œè¿›è€Œè¡¨ç°æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ã€‚å¤šç”¨äºæ ‘å½¢ç»“æ„ã€‚</td></tr><tr><td style="text-align:center;">è£…é¥°æ¨¡å¼</td><td style="text-align:center;">å‘ç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ï¼Œå³åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£</td><td style="text-align:center;">ä¸æ”¹å˜ç°æœ‰å¯¹è±¡çš„ç»“æ„ï¼ŒåŠ¨æ€åœ°å¢åŠ ä¸€äº›åŠŸèƒ½ã€‚ç»§æ‰¿è£…é¥°ã€‚</td></tr><tr><td style="text-align:center;">é—¨é¢ï¼ˆå¤–è§‚ï¼‰æ¨¡å¼</td><td style="text-align:center;">éšè—ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œå¹¶å‘å®¢æˆ·ç«¯æä¾›äº†ä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥è®¿é—®ç³»ç»Ÿçš„æ¥å£ï¼Œä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨</td><td style="text-align:center;">åœ¨å¤æ‚çš„ç³»ç»Ÿä¸Šï¼Œæä¾›ä¸€ä¸ªå¯¹å¤–çš„ä¸€è‡´æ€§æ¥å£ï¼ˆå¤–è§‚ï¼‰ã€‚ç±»ä¼¼äºç»Ÿä¸€å…¥å£ã€‚</td></tr><tr><td style="text-align:center;">äº«å…ƒæ¨¡å¼</td><td style="text-align:center;">è¿ç”¨å…±äº«æŠ€æœ¯æ¥æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡çš„å¤ç”¨</td><td style="text-align:center;">å¤ç”¨éœ€è¦å¤§é‡ä½¿ç”¨çš„ã€åŠŸèƒ½è¾ƒä¸ºç®€å•çš„å¯¹è±¡ã€‚æ¯”å¦‚å¯¹è±¡æ± ã€‚</td></tr><tr><td style="text-align:center;">ä»£ç†æ¨¡å¼</td><td style="text-align:center;">ä¸ºæŸå¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¯¥å¯¹è±¡çš„è®¿é—®ã€‚å³å®¢æˆ·ç«¯é€šè¿‡ä»£ç†é—´æ¥åœ°è®¿é—®è¯¥å¯¹è±¡ï¼Œä»è€Œé™åˆ¶ã€å¢å¼ºæˆ–ä¿®æ”¹è¯¥å¯¹è±¡çš„ä¸€äº›ç‰¹æ€§</td><td style="text-align:center;">ç”¨ä»£ç†å¯¹è±¡æ¥æ§åˆ¶å¯¹åŸæœ‰å¯¹è±¡çš„è®¿é—®æƒé™ã€‚å¯ä»¥æ·»åŠ å‰ç½®å’Œåç½®å¤„ç†ã€‚ç®€å•ç†è§£ä¸ºæœ‰äº‹æ‰¾ä»£ç†ï¼Œä»£ç†å†æ‰¾çœŸå®çš„å®ç°</td></tr></tbody></table><h4 id="è¡Œä¸ºå‹æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è¡Œä¸ºå‹æ¨¡å¼"><span>è¡Œä¸ºå‹æ¨¡å¼</span></a></h4><p>è¯¥æ¨¡å¼ç”¨äºæè¿°ç±»æˆ–å¯¹è±¡ä¹‹é—´æ€æ ·é€šä¿¡ã€åä½œå…±åŒå®Œæˆä»»åŠ¡ï¼Œä»¥åŠæ€æ ·åˆ†é…èŒè´£ã€‚</p><table><thead><tr><th style="text-align:center;">æ¨¡å¼</th><th style="text-align:center;">åŠŸèƒ½</th><th style="text-align:center;">ç†è§£</th></tr></thead><tbody><tr><td style="text-align:center;">è®¿é—®è€…æ¨¡å¼</td><td style="text-align:center;">åœ¨ä¸æ”¹å˜æ•°æ®ç»“æ„å…ƒç´ çš„å‰æä¸‹ï¼Œä¸ºä¸€ä¸ªæ•°æ®ç»“æ„ä¸­çš„æ¯ä¸ªå…ƒç´ æä¾›å¤šç§è®¿é—®æ–¹å¼</td><td style="text-align:center;">å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥åœ¨ä¸æ”¹å˜å¤æ‚å¯¹è±¡çš„æ•°æ®ç»“æ„çš„å‰æä¸‹ï¼Œè®¿é—®æ•°æ®ç»“æ„ä¸­çš„å„å…ƒç´ ã€‚</td></tr><tr><td style="text-align:center;">æ¨¡æ¿æ¨¡å¼</td><td style="text-align:center;">å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•éª¨æ¶ï¼Œè€Œå°†ç®—æ³•çš„ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼Œä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜è¯¥ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤</td><td style="text-align:center;">çˆ¶ç±»å®šä¹‰å›ºå®šçš„æ¡†æ¶å’Œå…¬å…±éƒ¨åˆ†ï¼Œå­ç±»å®ç°å¯å˜éƒ¨åˆ†/æ­¥éª¤ã€‚</td></tr><tr><td style="text-align:center;">ç­–ç•¥æ¨¡å¼</td><td style="text-align:center;">å®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå°†æ¯ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ï¼ˆåŒä¸€ä¸ªåŠŸèƒ½çš„ä¸åŒå®ç°ï¼‰</td><td style="text-align:center;">æœ‰å¤šç§ç‹¬ç«‹çš„ç®—æ³•ï¼Œä¾›å®¢æˆ·ç«¯æ›¿æ¢ä½¿ç”¨ã€‚</td></tr><tr><td style="text-align:center;">çŠ¶æ€æ¨¡å¼</td><td style="text-align:center;">å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶æ”¹å˜å…¶è¡Œä¸ºèƒ½åŠ›ï¼Œå¸¸è§åœºæ™¯ä¸ºï¼šä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºå®ƒçš„çŠ¶æ€</td><td style="text-align:center;">å¯¹è±¡çš„è¡Œä¸ºä¾èµ–äºå…¶çŠ¶æ€ï¼Œå°†çŠ¶æ€æå–ä¸ºçŠ¶æ€å¯¹è±¡ï¼Œå°†å¯¹è±¡ä¹‹é—´çš„ç›´æ¥äº¤äº’æ”¹æˆå¯¹è±¡å’ŒçŠ¶æ€å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œé™ä½å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ã€‚</td></tr><tr><td style="text-align:center;">è§‚å¯Ÿè€…æ¨¡å¼</td><td style="text-align:center;">å¤šä¸ªå¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šå…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒæŠŠè¿™ç§æ”¹å˜é€šçŸ¥ç»™å…¶ä»–å¤šä¸ªå¯¹è±¡ï¼Œä»è€Œå½±å“å…¶ä»–å¯¹è±¡çš„è¡Œä¸ºï¼Œå¸¸è§çš„æ˜¯ï¼šå‘å¸ƒ-è®¢é˜…</td><td style="text-align:center;">ä¸€ä¸ªå¯¹è±¡å˜åŒ–äº†ï¼Œè¦é€šçŸ¥åˆ°åˆ«çš„å¯¹è±¡ï¼Œä»¥ä¾¿å¤„ç†è¿™ç§å˜åŒ–ã€‚</td></tr><tr><td style="text-align:center;">å¤‡å¿˜å½•æ¨¡å¼</td><td style="text-align:center;">åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œè·å–å¹¶ä¿å­˜ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œä»¥ä¾¿ä»¥åæ¢å¤å®ƒï¼Œæ’¤é”€-æ¢å¤</td><td style="text-align:center;">å¯ä»¥ä¿å­˜å’Œæ’¤é”€å¯¹è±¡çš„è¡Œä¸ºã€‚</td></tr><tr><td style="text-align:center;">ä¸­ä»‹ï¼ˆè°ƒåœï¼‰è€…æ¨¡å¼</td><td style="text-align:center;">å®šä¹‰ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥ç®€åŒ–åŸæœ‰å¯¹è±¡ä¹‹é—´çš„äº¤äº’å…³ç³»ï¼Œé™ä½ç³»ç»Ÿä¸­å¯¹è±¡é—´çš„è€¦åˆåº¦ï¼Œä½¿åŸæœ‰å¯¹è±¡ä¹‹é—´ä¸å¿…ç›¸äº’äº†è§£</td><td style="text-align:center;">ç¦æ­¢å¤šä¸ªå¯¹è±¡ä¹‹é—´ç›¸äº’&quot;é€šä¿¡&quot;ï¼Œäº¤ç»™ä¸­ä»‹è€…å»è¿›è¡Œï¼Œæ‰€æœ‰å¯¹è±¡å’Œäº¤äº’è€…&quot;é€šä¿¡&quot;å³å¯ã€‚æœ‰äº‹éƒ½æ‰¾ä¸­ä»‹ï¼Œä¸­ä»‹å¸®ä½ å¹²</td></tr><tr><td style="text-align:center;">è¿­ä»£å™¨æ¨¡å¼</td><td style="text-align:center;">æä¾›ä¸€ç§æ–¹æ³•æ¥é¡ºåºè®¿é—®ï¼ˆéå†ï¼‰èšåˆå¯¹è±¡ä¸­çš„ä¸€ç³»åˆ—æ•°æ®ï¼Œè€Œä¸æš´éœ²èšåˆå¯¹è±¡çš„å†…éƒ¨è¡¨ç¤º</td><td style="text-align:center;">å¦‚ä½•éå†å¯¹è±¡ã€‚</td></tr><tr><td style="text-align:center;">è§£é‡Šå™¨æ¨¡å¼</td><td style="text-align:center;">æä¾›å¦‚ä½•å®šä¹‰è¯­è¨€çš„æ–‡æ³•ï¼Œä»¥åŠå¯¹è¯­è¨€å¥å­çš„è§£é‡Šæ–¹æ³•ï¼Œå³è§£é‡Šå™¨</td><td style="text-align:center;">è§£é‡Šå¸¦æœ‰ç‰¹å®šè¯­æ³•çš„å¥å­ã€‚</td></tr><tr><td style="text-align:center;">å‘½ä»¤æ¨¡å¼</td><td style="text-align:center;">å°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å‘å‡ºè¯·æ±‚çš„è´£ä»»å’Œæ‰§è¡Œè¯·æ±‚çš„è´£ä»»åˆ†å‰²å¼€</td><td style="text-align:center;">å°†å‘½ä»¤/è¯·æ±‚å°è£…ä¸ºå¯¹è±¡ï¼Œåœ¨å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´ä¼ é€’ä¿¡æ¯ï¼Œé™ä½å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ã€‚</td></tr><tr><td style="text-align:center;">è´£ä»»ï¼ˆèŒè´£ï¼‰é“¾æ¨¡å¼</td><td style="text-align:center;">å°†æ‰€æœ‰è¯·æ±‚çš„å¤„ç†è€…é€šè¿‡å‰ä¸€å¯¹è±¡è®°ä½å…¶ä¸‹ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è€Œè¿æˆä¸€æ¡é“¾ï¼Œç›´åˆ°è¯·æ±‚è¢«å¤„ç†ä¸ºæ­¢</td><td style="text-align:center;">å¤šä¸ªè¯·æ±‚å¤„ç†è€…è®°å½•å¯¹ä¸‹ä¸€ä¸ªå¤„ç†è€…çš„å¼•ç”¨ï¼Œé™ä½è¯·æ±‚å‘èµ·è€…å’Œå¤šä¸ªå¤„ç†è€…ä¹‹é—´çš„è€¦åˆåº¦ã€‚</td></tr></tbody></table><h3 id="åˆ›å»ºå‹æ¨¡å¼pk" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå‹æ¨¡å¼pk"><span>åˆ›å»ºå‹æ¨¡å¼PK</span></a></h3><h4 id="å·¥å‚æ¨¡å¼vså»ºé€ è€…æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å·¥å‚æ¨¡å¼vså»ºé€ è€…æ¨¡å¼"><span>å·¥å‚æ¨¡å¼VSå»ºé€ è€…æ¨¡å¼</span></a></h4><p>å·¥å‚æ–¹æ³•æ¨¡å¼æ³¨é‡çš„æ˜¯æ•´ä½“å¯¹è±¡çš„åˆ›å»ºæ–¹æ³•ï¼Œè€Œå»ºé€ è€…æ¨¡å¼æ³¨é‡çš„æ˜¯éƒ¨ä»¶æ„å»ºçš„è¿‡ç¨‹ï¼Œæ—¨åœ¨é€šè¿‡ä¸€æ­¥ä¸€æ­¥åœ°ç²¾ç¡®æ„é€ åˆ›å»ºå‡ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚</p><ul><li>æ„å›¾ä¸åŒã€‚</li></ul><p>åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼é‡Œï¼Œæˆ‘ä»¬å…³æ³¨çš„æ˜¯ä¸€ä¸ªäº§å“æ•´ä½“ï¼Œä½†åœ¨å»ºé€ è€…æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªå…·ä½“äº§å“çš„äº§ç”Ÿæ˜¯ä¾èµ–å„ä¸ªéƒ¨ä»¶çš„äº§ç”Ÿä»¥åŠè£…é…é¡ºåºï¼Œå®ƒå…³æ³¨çš„æ˜¯â€œç”±é›¶ä»¶ä¸€æ­¥ä¸€æ­¥åœ°ç»„è£…å‡ºäº§å“å¯¹è±¡â€ã€‚ç®€å•åœ°è¯´ï¼Œå·¥å‚æ¨¡å¼æ˜¯ä¸€ä¸ªå¯¹è±¡åˆ›å»ºçš„ç²—çº¿æ¡åº”ç”¨ï¼Œå»ºé€ è€…æ¨¡å¼åˆ™æ˜¯é€šè¿‡ç»†çº¿æ¡å‹¾å‹’å‡ºä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼Œå…³æ³¨çš„æ˜¯äº§å“ç»„æˆéƒ¨åˆ†çš„åˆ›å»ºè¿‡ç¨‹ã€‚</p><ul><li>äº§å“çš„å¤æ‚åº¦ä¸åŒã€‚</li></ul><p>å·¥å‚æ–¹æ³•æ¨¡å¼åˆ›å»ºçš„äº§å“ä¸€èˆ¬éƒ½æ˜¯å•ä¸€æ€§è´¨äº§å“ï¼Œè€Œå»ºé€ è€…æ¨¡å¼åˆ›å»ºçš„åˆ™æ˜¯ä¸€ä¸ªå¤åˆäº§å“ï¼Œå®ƒç”±å„ä¸ªéƒ¨ä»¶å¤åˆè€Œæˆï¼Œéƒ¨ä»¶ä¸åŒäº§å“å¯¹è±¡å½“ç„¶ä¸åŒã€‚è¿™ä¸æ˜¯è¯´å·¥å‚æ–¹æ³•æ¨¡å¼åˆ›å»ºçš„å¯¹è±¡ç®€å•ï¼Œè€Œæ˜¯æŒ‡å®ƒä»¬çš„ç²’åº¦å¤§å°ä¸åŒã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼çš„å¯¹è±¡ç²’åº¦æ¯”è¾ƒç²—ï¼Œå»ºé€ è€…æ¨¡å¼çš„äº§å“å¯¹è±¡ç²’åº¦æ¯”è¾ƒç»†ã€‚</p><p><strong>åœ¨å…·ä½“çš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ</strong></p><p>æ˜¯ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼æ¥åˆ›å»ºå¯¹è±¡ï¼Œè¿˜æ˜¯ç”¨å»ºé€ è€…æ¨¡å¼æ¥åˆ›å»ºå¯¹è±¡ï¼Œè¿™å®Œå…¨å–å†³äºæˆ‘ä»¬åœ¨åšç³»ç»Ÿè®¾è®¡æ—¶çš„æ„å›¾ï¼Œå¦‚æœéœ€è¦è¯¦ç»†å…³æ³¨ä¸€ä¸ªäº§å“éƒ¨ä»¶çš„ç”Ÿäº§ã€å®‰è£…æ­¥éª¤ï¼Œåˆ™é€‰æ‹©å»ºé€ è€…ï¼Œå¦åˆ™é€‰æ‹©å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚</p><h4 id="æŠ½è±¡å·¥å‚æ¨¡å¼vså»ºé€ è€…æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#æŠ½è±¡å·¥å‚æ¨¡å¼vså»ºé€ è€…æ¨¡å¼"><span>æŠ½è±¡å·¥å‚æ¨¡å¼VSå»ºé€ è€…æ¨¡å¼</span></a></h4><p>æŠ½è±¡å·¥å‚æ¨¡å¼å®ç°å¯¹äº§å“å®¶æ—çš„åˆ›å»ºï¼Œä¸€ä¸ªäº§å“å®¶æ—æ˜¯è¿™æ ·çš„ä¸€ç³»åˆ—äº§å“ï¼šå…·æœ‰ä¸åŒåˆ†ç±»ç»´åº¦çš„äº§å“ç»„åˆï¼Œé‡‡ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼åˆ™æ˜¯ä¸éœ€è¦å…³å¿ƒæ„å»ºè¿‡ç¨‹ï¼Œåªå…³å¿ƒä»€ä¹ˆäº§å“ç”±ä»€ä¹ˆå·¥å‚ç”Ÿäº§å³å¯ã€‚è€Œå»ºé€ è€…æ¨¡å¼åˆ™æ˜¯è¦æ±‚æŒ‰ç…§æŒ‡å®šçš„è“å›¾å»ºé€ äº§å“ï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯é€šè¿‡ç»„è£…é›¶é…ä»¶è€Œäº§ç”Ÿä¸€ä¸ªæ–°äº§å“ã€‚</p><h3 id="ç»“æ„ç±»æ¨¡å¼pk" tabindex="-1"><a class="header-anchor" href="#ç»“æ„ç±»æ¨¡å¼pk"><span>ç»“æ„ç±»æ¨¡å¼PK</span></a></h3><h4 id="ä»£ç†æ¨¡å¼vsè£…é¥°æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ä»£ç†æ¨¡å¼vsè£…é¥°æ¨¡å¼"><span>ä»£ç†æ¨¡å¼VSè£…é¥°æ¨¡å¼</span></a></h4><p>ä»£ç†æ¨¡å¼æ§åˆ¶å¯¹è±¡è®¿é—®æƒé™ï¼›è£…é¥°æ¨¡å¼ç”¨äºå‘å¯¹è±¡æ·»åŠ èŒè´£</p><p>è£…é¥°æ¨¡å¼å°±æ˜¯ä»£ç†æ¨¡å¼çš„ä¸€ä¸ªç‰¹æ®Šåº”ç”¨ï¼Œä¸¤è€…çš„å…±åŒç‚¹æ˜¯éƒ½å…·æœ‰ç›¸åŒçš„æ¥å£ï¼Œä¸åŒç‚¹åˆ™æ˜¯ä»£ç†æ¨¡å¼ç€é‡å¯¹ä»£ç†è¿‡ç¨‹çš„æ§åˆ¶ï¼Œè€Œè£…é¥°æ¨¡å¼åˆ™æ˜¯å¯¹ç±»çš„åŠŸèƒ½è¿›è¡ŒåŠ å¼ºæˆ–å‡å¼±ï¼Œå®ƒç€é‡ç±»çš„åŠŸèƒ½å˜åŒ–</p><ul><li>ç›¸åŒç‚¹ã€‚</li></ul><p>éƒ½æ˜¯ä¸ºè¢«ä»£ç†(è¢«è£…é¥°)çš„ç±»æ‰©å……æ–°çš„åŠŸèƒ½ã€‚</p><ul><li>ä¸åŒç‚¹ã€‚</li></ul><p>ä»£ç†æ¨¡å¼å…·æœ‰æ§åˆ¶è¢«ä»£ç†ç±»çš„è®¿é—®ç­‰æ€§è´¨ï¼Œè€Œè£…é¥°æ¨¡å¼ç´§ç´§æ˜¯å•çº¯çš„æ‰©å……è¢«è£…é¥°çš„ç±»ã€‚æ‰€ä»¥åŒºåˆ«ä»…ä»…åœ¨æ˜¯å¦å¯¹è¢«ä»£ç†/è¢«è£…é¥°çš„ç±»è¿›è¡Œäº†æ§åˆ¶è€Œå·²ã€‚</p><p>ä»£ç†æ¨¡å¼ä½¿ç”¨åˆ°æè‡´å¼€å‘å°±æ˜¯AOP</p><h4 id="è£…é¥°æ¨¡å¼vsé€‚é…å™¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è£…é¥°æ¨¡å¼vsé€‚é…å™¨æ¨¡å¼"><span>è£…é¥°æ¨¡å¼VSé€‚é…å™¨æ¨¡å¼</span></a></h4><p>è£…é¥°å™¨æ¨¡å¼æ˜¯ä¸ºäº†ç»™ç°æœ‰å¯¹è±¡å¢åŠ åŠŸèƒ½ï¼Œä¸€èˆ¬æ¥å£ä¸å˜æˆ–æ¥å£å¢åŠ ï¼›é€‚é…å™¨æ¨¡å¼æ˜¯ä¸ºäº†æ”¹å˜å…¶æ¥å£ï¼ŒåŠŸèƒ½ä¿æŒä¸å˜ã€‚</p><ul><li>æ„å›¾ä¸åŒã€‚</li></ul><p>è£…é¥°æ¨¡å¼çš„æ„å›¾æ˜¯åŠ å¼ºå¯¹è±¡çš„åŠŸèƒ½ï¼›è€Œé€‚é…å™¨æ¨¡å¼å…³æ³¨çš„åˆ™æ˜¯è½¬åŒ–ï¼Œå®ƒçš„ä¸»è¦æ„å›¾æ˜¯ä¸¤ä¸ªä¸åŒå¯¹è±¡ä¹‹é—´çš„è½¬åŒ–ã€‚</p><ul><li>æ–½ä¸å¯¹è±¡ä¸åŒã€‚</li></ul><p>è£…é¥°æ¨¡å¼è£…é¥°çš„å¯¹è±¡å¿…é¡»æ˜¯è‡ªå·±çš„åŒå®—ï¼Œä¹Ÿå°±æ˜¯ç›¸åŒçš„æ¥å£æˆ–çˆ¶ç±»åªè¦åœ¨å…·æœ‰ç›¸åŒçš„å±æ€§å’Œè¡Œä¸ºçš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½æ¯”è¾ƒè¡Œä¸ºæ˜¯å¢åŠ è¿˜æ˜¯å‡å¼±ï¼›é€‚é…å™¨æ¨¡å¼åˆ™å¿…é¡»æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œå› ä¸ºå®ƒç€é‡äºè½¬æ¢ï¼Œåªæœ‰ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡æ‰æœ‰è½¬æ¢çš„å¿…è¦ï¼Œå¦‚æœæ˜¯ç›¸åŒå¯¹è±¡è¿˜è½¬æ¢ä»€ä¹ˆï¼</p><ul><li>åœºæ™¯ä¸åŒã€‚</li></ul><p>è£…é¥°æ¨¡å¼åœ¨ä»»ä½•æ—¶å€™éƒ½å¯ä»¥ä½¿ç”¨ï¼Œåªè¦æ˜¯æƒ³å¢å¼ºç±»çš„åŠŸèƒ½ï¼Œè€Œé€‚é…å™¨æ¨¡å¼åˆ™æ˜¯ä¸€ä¸ªè¡¥æ•‘æ¨¡å¼ï¼Œä¸€èˆ¬å‡ºç°åœ¨ç³»ç»Ÿæˆç†Ÿæˆ–å·²ç»æ„å»ºå®Œæ¯•çš„é¡¹ç›®ä¸­ï¼Œä½œä¸ºä¸€ä¸ªç´§æ€¥å¤„ç†æ‰‹æ®µé‡‡ç”¨ã€‚</p><ul><li>æ‰©å±•æ€§ä¸åŒã€‚</li></ul><p>è£…é¥°æ¨¡å¼å¾ˆå®¹æ˜“æ‰©å±•ã€‚ä½†æ˜¯é€‚é…å™¨æ¨¡å¼å°±ä¸åŒäº†ï¼Œå®ƒåœ¨ä¸¤ä¸ªä¸åŒå¯¹è±¡ä¹‹é—´æ¶èµ·äº†ä¸€åº§æ²Ÿé€šçš„æ¡¥æ¢ï¼Œå»ºç«‹å®¹æ˜“ï¼Œå»æ‰å°±æ¯”è¾ƒå›°éš¾äº†ï¼Œéœ€è¦ä»ç³»ç»Ÿæ•´ä½“è€ƒè™‘æ˜¯å¦èƒ½å¤Ÿæ’¤é”€ã€‚</p><h3 id="è¡Œä¸ºç±»æ¨¡å¼pk" tabindex="-1"><a class="header-anchor" href="#è¡Œä¸ºç±»æ¨¡å¼pk"><span>è¡Œä¸ºç±»æ¨¡å¼PK</span></a></h3><h4 id="å‘½ä»¤æ¨¡å¼vsç­–ç•¥æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å‘½ä»¤æ¨¡å¼vsç­–ç•¥æ¨¡å¼"><span>å‘½ä»¤æ¨¡å¼VSç­–ç•¥æ¨¡å¼</span></a></h4><p>å‘½ä»¤æ¨¡å¼å’Œç­–ç•¥æ¨¡å¼çš„ç±»å›¾ç¡®å®å¾ˆç›¸ä¼¼ï¼Œåªæ˜¯å‘½ä»¤æ¨¡å¼å¤šäº†ä¸€ä¸ªæ¥æ”¶è€…ï¼ˆReceiverï¼‰è§’è‰²ã€‚ç­–ç•¥æ¨¡å¼çš„æ„å›¾æ˜¯å°è£…ç®—æ³•ï¼Œå®ƒè®¤ä¸ºâ€œç®—æ³•â€å·²ç»æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€ä¸å¯æ‹†åˆ†çš„åŸå­ä¸šåŠ¡ï¼ˆæ³¨æ„è¿™é‡Œæ˜¯åŸå­ä¸šåŠ¡ï¼Œè€Œä¸æ˜¯åŸå­å¯¹è±¡ï¼‰ï¼Œå³å…¶æ„å›¾æ˜¯è®©è¿™äº›ç®—æ³•ç‹¬ç«‹ï¼Œå¹¶ä¸”å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œè®©è¡Œä¸ºçš„å˜åŒ–ç‹¬ç«‹äºæ‹¥æœ‰è¡Œä¸ºçš„å®¢æˆ·ï¼›è€Œå‘½ä»¤æ¨¡å¼åˆ™æ˜¯å¯¹åŠ¨ä½œçš„è§£è€¦ï¼ŒæŠŠä¸€ä¸ªåŠ¨ä½œçš„æ‰§è¡Œåˆ†ä¸ºæ‰§è¡Œå¯¹è±¡ï¼ˆæ¥æ”¶è€…è§’è‰²ï¼‰ã€æ‰§è¡Œè¡Œä¸ºï¼ˆå‘½ä»¤è§’è‰²ï¼‰ï¼Œè®©ä¸¤è€…ç›¸äº’ç‹¬ç«‹è€Œä¸ç›¸äº’å½±å“ã€‚</p><p>ç­–ç•¥æ¨¡å¼å’Œå‘½ä»¤æ¨¡å¼ç›¸ä¼¼ï¼Œç‰¹åˆ«æ˜¯å‘½ä»¤æ¨¡å¼é€€åŒ–æ—¶ï¼Œæ¯”å¦‚æ— æ¥æ”¶è€…ï¼ˆæ¥æ”¶è€…éå¸¸ç®€å•æˆ–è€…æ¥æ”¶è€…æ˜¯ä¸€ä¸ªJavaçš„åŸºç¡€æ“ä½œï¼Œæ— éœ€ä¸“é—¨ç¼–å†™ä¸€ä¸ªæ¥æ”¶è€…ï¼‰ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‘½ä»¤æ¨¡å¼å’Œç­–ç•¥æ¨¡å¼çš„ç±»å›¾å®Œå…¨ä¸€æ ·ï¼Œä»£ç å®ç°ä¹Ÿæ¯”è¾ƒç±»ä¼¼ï¼Œä½†æ˜¯ä¸¤è€…è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚</p><ul><li>å…³æ³¨ç‚¹ä¸åŒã€‚</li></ul><p>ç­–ç•¥æ¨¡å¼å…³æ³¨çš„æ˜¯ç®—æ³•æ›¿æ¢çš„é—®é¢˜ï¼Œä¸€ä¸ªæ–°çš„ç®—æ³•æŠ•äº§ï¼Œæ—§ç®—æ³•é€€ä¼‘ï¼Œæˆ–è€…æä¾›å¤šç§ç®—æ³•ç”±è°ƒç”¨è€…è‡ªå·±é€‰æ‹©ä½¿ç”¨ï¼Œç®—æ³•çš„è‡ªç”±æ›´æ›¿æ˜¯å®ƒå®ç°çš„è¦ç‚¹ã€‚æ¢å¥è¯è¯´ï¼Œç­–ç•¥æ¨¡å¼å…³æ³¨çš„æ˜¯ç®—æ³•çš„å®Œæ•´æ€§ã€å°è£…æ€§ï¼Œåªæœ‰å…·å¤‡äº†è¿™ä¸¤ä¸ªæ¡ä»¶æ‰èƒ½ä¿è¯å…¶å¯ä»¥è‡ªç”±åˆ‡æ¢ã€‚</p><p>å‘½ä»¤æ¨¡å¼åˆ™å…³æ³¨çš„æ˜¯è§£è€¦é—®é¢˜ï¼Œå¦‚ä½•è®©è¯·æ±‚è€…å’Œæ‰§è¡Œè€…è§£è€¦æ˜¯å®ƒéœ€è¦é¦–å…ˆè§£å†³çš„ï¼Œè§£è€¦çš„è¦æ±‚å°±æ˜¯æŠŠè¯·æ±‚çš„å†…å®¹å°è£…ä¸ºä¸€ä¸ªä¸€ä¸ªçš„å‘½ä»¤ï¼Œç”±æ¥æ”¶è€…æ‰§è¡Œã€‚ç”±äºå°è£…æˆäº†å‘½ä»¤ï¼Œå°±åŒæ—¶å¯ä»¥å¯¹å‘½ä»¤è¿›è¡Œå¤šç§å¤„ç†ï¼Œä¾‹å¦‚æ’¤é”€ã€è®°å½•ç­‰ã€‚</p><ul><li>èŒè´£ä¸åŒã€‚</li></ul><p>ç­–ç•¥æ¨¡å¼ä¸­çš„å…·ä½“ç®—æ³•æ˜¯è´Ÿè´£ä¸€ä¸ªå®Œæ•´ç®—æ³•é€»è¾‘ï¼Œå®ƒæ˜¯ä¸å¯å†æ‹†åˆ†çš„åŸå­ä¸šåŠ¡å•å…ƒï¼Œä¸€æ—¦å˜æ›´å°±æ˜¯å¯¹ç®—æ³•æ•´ä½“çš„å˜æ›´ã€‚è€Œå‘½ä»¤æ¨¡å¼åˆ™ä¸åŒï¼Œå®ƒå…³æ³¨å‘½ä»¤çš„å®ç°ï¼Œä¹Ÿå°±æ˜¯åŠŸèƒ½çš„å®ç°ã€‚æ³¨æ„ï¼Œå¦‚æœåœ¨å‘½ä»¤æ¨¡å¼ä¸­éœ€è¦æŒ‡å®šæ¥æ”¶è€…ï¼Œåˆ™éœ€è¦è€ƒè™‘æ¥æ”¶è€…çš„å˜åŒ–å’Œå°è£…ï¼Œä¹Ÿå°±æ˜¯æ¥æ”¶è€…çš„æŠ½è±¡åŒ–é—®é¢˜ã€‚</p><ul><li>è§’è‰²åŠŸèƒ½ä¸åŒã€‚</li></ul><p>ç­–ç•¥æ¨¡å¼é€‚ç”¨äºç®—æ³•è¦æ±‚å˜æ¢çš„åœºæ™¯ï¼Œè€Œå‘½ä»¤æ¨¡å¼é€‚ç”¨äºè§£è€¦ä¸¤ä¸ªæœ‰ç´§è€¦åˆå…³ç³»çš„å¯¹è±¡åœºåˆæˆ–è€…å¤šå‘½ä»¤å¤šæ’¤é”€çš„åœºæ™¯ã€‚</p><h4 id="ç­–ç•¥æ¨¡å¼vsçŠ¶æ€æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ç­–ç•¥æ¨¡å¼vsçŠ¶æ€æ¨¡å¼"><span>ç­–ç•¥æ¨¡å¼VSçŠ¶æ€æ¨¡å¼</span></a></h4><img src="/mars/images/book/designpattern/StrategyVsState.png" alt="ç­–ç•¥æ¨¡å¼VSçŠ¶æ€æ¨¡å¼ç±»å›¾"><p>åœ¨è¡Œä¸ºç±»è®¾è®¡æ¨¡å¼ä¸­ï¼ŒçŠ¶æ€æ¨¡å¼å’Œç­–ç•¥æ¨¡å¼æ˜¯äº²å…„å¼Ÿï¼Œä¸¤è€…éå¸¸ç›¸ä¼¼ã€‚ç­–ç•¥æ¨¡å¼å°è£…çš„æ˜¯ä¸åŒçš„ç®—æ³•ï¼Œç®—æ³•ä¹‹é—´æ²¡æœ‰äº¤äº’ï¼Œä»¥è¾¾åˆ°ç®—æ³•å¯ä»¥è‡ªç”±åˆ‡æ¢çš„ç›®çš„ï¼›è€ŒçŠ¶æ€æ¨¡å¼å°è£…çš„æ˜¯ä¸åŒçš„çŠ¶æ€ï¼Œä»¥è¾¾åˆ°çŠ¶æ€åˆ‡æ¢è¡Œä¸ºéšä¹‹å‘ç”Ÿæ”¹å˜çš„ç›®çš„ã€‚è¿™ä¸¤ç§æ¨¡å¼è™½ç„¶éƒ½æœ‰å˜æ¢çš„è¡Œä¸ºï¼Œä½†æ˜¯ä¸¤è€…çš„ç›®æ ‡å´æ˜¯ä¸åŒçš„ã€‚</p><p>ç®€å•ç†è§£ä¸ºçŠ¶æ€æ¨¡å¼å…³æ³¨å¯¹è±¡æ‰€å¤„çš„çŠ¶æ€ï¼Œå°è£…äº†ä¾èµ–äºçŠ¶æ€çš„è¡Œä¸ºï¼›ç­–ç•¥æ¨¡å¼å…³æ³¨å¯¹è±¡å¦‚ä½•æ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡ï¼Œå®ƒå°è£…çš„æ˜¯ç®—æ³•ã€‚</p><ul><li>ç¯å¢ƒè§’è‰²çš„èŒè´£ä¸åŒã€‚</li></ul><p>ä¸¤è€…éƒ½æœ‰ä¸€ä¸ªå«åšContextç¯å¢ƒè§’è‰²çš„ç±»ï¼Œä½†æ˜¯ä¸¤è€…çš„åŒºåˆ«å¾ˆå¤§ï¼Œç­–ç•¥æ¨¡å¼çš„ç¯å¢ƒè§’è‰²åªæ˜¯ä¸€ä¸ªå§”æ‰˜ä½œç”¨ï¼Œè´Ÿè´£ç®—æ³•çš„æ›¿æ¢ï¼›è€ŒçŠ¶æ€æ¨¡å¼çš„ç¯å¢ƒè§’è‰²ä¸ä»…ä»…æ˜¯å§”æ‰˜è¡Œä¸ºï¼Œå®ƒè¿˜å…·æœ‰ç™»è®°çŠ¶æ€å˜åŒ–çš„åŠŸèƒ½ï¼Œä¸å…·ä½“çš„çŠ¶æ€ç±»åä½œï¼Œå…±åŒå®ŒæˆçŠ¶æ€åˆ‡æ¢è¡Œä¸ºéšä¹‹åˆ‡æ¢çš„ä»»åŠ¡ã€‚</p><ul><li>è§£å†³é—®é¢˜çš„é‡ç‚¹ä¸åŒã€‚</li></ul><p>ç­–ç•¥æ¨¡å¼æ—¨åœ¨è§£å†³å†…éƒ¨ç®—æ³•å¦‚ä½•æ”¹å˜çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯å°†å†…éƒ¨ç®—æ³•çš„æ”¹å˜å¯¹å¤–ç•Œçš„å½±å“é™ä½åˆ°æœ€å°ï¼Œå®ƒä¿è¯çš„æ˜¯ç®—æ³•å¯ä»¥è‡ªç”±åœ°åˆ‡æ¢ï¼›è€ŒçŠ¶æ€æ¨¡å¼æ—¨åœ¨è§£å†³å†…åœ¨çŠ¶æ€çš„æ”¹å˜è€Œå¼•èµ·è¡Œä¸ºæ”¹å˜çš„é—®é¢˜ï¼Œå®ƒçš„å‡ºå‘ç‚¹æ˜¯äº‹ç‰©çš„çŠ¶æ€ï¼Œå°è£…çŠ¶æ€è€Œæš´éœ²è¡Œä¸ºï¼Œä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œä»å¤–ç•Œæ¥çœ‹å°±å¥½åƒæ˜¯è¡Œä¸ºæ”¹å˜ã€‚</p><ul><li>è§£å†³é—®é¢˜çš„æ–¹æ³•ä¸åŒã€‚</li></ul><p>ç­–ç•¥æ¨¡å¼åªæ˜¯ç¡®ä¿ç®—æ³•å¯ä»¥è‡ªç”±åˆ‡æ¢ï¼Œä½†æ˜¯ä»€ä¹ˆæ—¶å€™ç”¨ä»€ä¹ˆç®—æ³•å®ƒå†³å®šä¸äº†ï¼›è€ŒçŠ¶æ€æ¨¡å¼å¯¹å¤–æš´éœ²çš„æ˜¯è¡Œä¸ºï¼ŒçŠ¶æ€çš„å˜åŒ–ä¸€èˆ¬æ˜¯ç”±ç¯å¢ƒè§’è‰²å’Œå…·ä½“çŠ¶æ€å…±åŒå®Œæˆçš„ï¼Œä¹Ÿå°±æ˜¯è¯´çŠ¶æ€æ¨¡å¼å°è£…äº†çŠ¶æ€çš„å˜åŒ–è€Œæš´éœ²äº†ä¸åŒçš„è¡Œä¸ºæˆ–è¡Œä¸ºç»“æœã€‚</p><ul><li>åº”ç”¨åœºæ™¯ä¸åŒã€‚</li></ul><p>ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç³»åˆ—å¹³è¡Œçš„ã€å¯ç›¸äº’æ›¿æ¢çš„ç®—æ³•å°è£…åçš„ç»“æœï¼Œè¿™å°±é™å®šäº†å®ƒçš„åº”ç”¨åœºæ™¯ï¼šç®—æ³•å¿…é¡»æ˜¯å¹³è¡Œçš„ï¼Œå¦åˆ™ç­–ç•¥æ¨¡å¼å°±å°è£…äº†ä¸€å †åƒåœ¾ï¼Œäº§ç”Ÿäº†â€œåå‘³é“â€ã€‚çŠ¶æ€æ¨¡å¼åˆ™è¦æ±‚æœ‰ä¸€ç³»åˆ—çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„åœºæ™¯ï¼Œå®ƒè¦æ±‚çš„æ˜¯æœ‰çŠ¶æ€ä¸”æœ‰è¡Œä¸ºçš„åœºæ™¯ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯¹è±¡å¿…é¡»å…·æœ‰äºŒç»´ï¼ˆçŠ¶æ€å’Œè¡Œä¸ºï¼‰æè¿°æ‰èƒ½é‡‡ç”¨çŠ¶æ€æ¨¡å¼ï¼Œå¦‚æœåªæœ‰çŠ¶æ€è€Œæ²¡æœ‰è¡Œä¸ºï¼Œåˆ™çŠ¶æ€çš„å˜åŒ–å°±å¤±å»äº†æ„ä¹‰ã€‚</p><ul><li>å¤æ‚åº¦ä¸åŒã€‚</li></ul><p>é€šå¸¸ç­–ç•¥æ¨¡å¼æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œçš„ç®€å•æŒ‡çš„æ˜¯ç»“æ„ç®€å•ï¼Œæ‰©å±•æ¯”è¾ƒå®¹æ˜“ï¼Œè€Œä¸”ä»£ç ä¹Ÿå®¹æ˜“é˜…è¯»ã€‚è€ŒçŠ¶æ€æ¨¡å¼åˆ™é€šå¸¸æ¯”è¾ƒå¤æ‚ï¼Œå› ä¸ºå®ƒè¦ä»ä¸¤ä¸ªè§’è‰²çœ‹åˆ°ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å’Œè¡Œä¸ºçš„æ”¹å˜ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå°è£…çš„æ˜¯å˜åŒ–ï¼Œè¦çŸ¥é“å˜åŒ–æ˜¯æ— ç©·å°½çš„ï¼Œå› æ­¤ç›¸å¯¹æ¥è¯´çŠ¶æ€æ¨¡å¼é€šå¸¸éƒ½æ¯”è¾ƒå¤æ‚ï¼Œæ¶‰åŠé¢å¾ˆå¤šï¼Œè™½ç„¶ä¹Ÿå¾ˆå®¹æ˜“æ‰©å±•ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸ä¼šè¿›è¡Œå¤§è§„æ¨¡çš„æ‰©å¼ å’Œä¿®æ­£ã€‚</p><h4 id="è§‚å¯Ÿè€…æ¨¡å¼vsè´£ä»»é“¾æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è§‚å¯Ÿè€…æ¨¡å¼vsè´£ä»»é“¾æ¨¡å¼"><span>è§‚å¯Ÿè€…æ¨¡å¼VSè´£ä»»é“¾æ¨¡å¼</span></a></h4><ul><li>é“¾ä¸­çš„æ¶ˆæ¯å¯¹è±¡ä¸åŒã€‚</li></ul><p>è´£ä»»é“¾æ¨¡å¼åŸºæœ¬ä¸Šä¸æ”¹å˜æ¶ˆæ¯å¯¹è±¡çš„ç»“æ„ï¼Œä½†æ˜¯åœ¨è§¦å‘é“¾æ¨¡å¼ä¸­æ˜¯å…è®¸çš„ï¼Œé“¾ä¸­ä¼ é€’çš„å¯¹è±¡å¯ä»¥è‡ªç”±å˜åŒ–ï¼Œåªè¦ä¸Šä¸‹çº§èŠ‚ç‚¹å¯¹ä¼ é€’å¯¹è±¡äº†è§£å³å¯ï¼Œå®ƒä¸è¦æ±‚é“¾ä¸­çš„æ¶ˆæ¯å¯¹è±¡ä¸å˜åŒ–ï¼Œå®ƒåªè¦æ±‚é“¾ä¸­ç›¸é‚»ä¸¤ä¸ªèŠ‚ç‚¹çš„æ¶ˆæ¯å¯¹è±¡å›ºå®šã€‚</p><ul><li>ä¸Šä¸‹èŠ‚ç‚¹çš„å…³ç³»ä¸åŒã€‚</li></ul><p>åœ¨è´£ä»»é“¾æ¨¡å¼ä¸­ï¼Œä¸Šä¸‹èŠ‚ç‚¹æ²¡æœ‰å…³ç³»ï¼Œéƒ½æ˜¯æ¥æ”¶åŒæ ·çš„å¯¹è±¡ï¼Œæ‰€æœ‰ä¼ é€’çš„å¯¹è±¡éƒ½æ˜¯ä»é“¾é¦–ä¼ é€’è¿‡æ¥ï¼Œä¸Šä¸€èŠ‚ç‚¹æ˜¯ä»€ä¹ˆæ²¡æœ‰å…³ç³»ï¼Œåªè¦æŒ‰ç…§è‡ªå·±çš„é€»è¾‘å¤„ç†å°±æˆã€‚è€Œè§¦å‘é“¾æ¨¡å¼å°±ä¸åŒäº†ï¼Œå®ƒçš„ä¸Šä¸‹çº§å…³ç³»å¾ˆäº²å¯†ï¼Œä¸‹çº§å¯¹ä¸Šçº§é¡¶ç¤¼è†œæ‹œï¼Œä¸Šçº§å¯¹ä¸‹çº§ç»å¯¹ä¿¡ä»»ï¼Œé“¾ä¸­çš„ä»»æ„ä¸¤ä¸ªç›¸é‚»èŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªç‰¢å›ºçš„ç‹¬ç«‹å›¢ä½“ã€‚</p><ul><li>æ¶ˆæ¯çš„åˆ†é”€æ¸ é“ä¸åŒã€‚</li></ul><p>åœ¨è´£ä»»é“¾æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªæ¶ˆæ¯ä»é“¾é¦–ä¼ é€’è¿›æ¥åï¼Œå°±å¼€å§‹æ²¿ç€é“¾æ¡å‘é“¾å°¾è¿åŠ¨ï¼Œæ–¹å‘æ˜¯å•ä¸€çš„ã€å›ºå®šçš„ï¼›è€Œè§¦å‘é“¾æ¨¡å¼åˆ™ä¸åŒï¼Œç”±äºå®ƒé‡‡ç”¨çš„æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ‰€ä»¥æœ‰éå¸¸å¤§çš„çµæ´»æ€§ï¼Œä¸€ä¸ªæ¶ˆæ¯ä¼ é€’åˆ°é“¾é¦–åï¼Œå…·ä½“æ€ä¹ˆä¼ é€’æ˜¯ä¸å›ºå®šçš„ï¼Œå¯ä»¥ä»¥å¹¿æ’­æ–¹å¼ä¼ é€’ï¼Œä¹Ÿå¯ä»¥ä»¥è·³è·ƒæ–¹å¼ä¼ é€’ï¼Œè¿™å–å†³äºå¤„ç†æ¶ˆæ¯çš„é€»è¾‘ã€‚</p><h3 id="è·¨æˆ˜åŒºpk" tabindex="-1"><a class="header-anchor" href="#è·¨æˆ˜åŒºpk"><span>è·¨æˆ˜åŒºPK</span></a></h3><h4 id="ç­–ç•¥æ¨¡å¼vsæ¡¥æ¢æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ç­–ç•¥æ¨¡å¼vsæ¡¥æ¢æ¨¡å¼"><span>ç­–ç•¥æ¨¡å¼VSæ¡¥æ¢æ¨¡å¼</span></a></h4><img src="/mars/images/book/designpattern/StrategyVsBridge.png" alt="ç­–ç•¥æ¨¡å¼VSæ¡¥æ¢æ¨¡å¼ç±»å›¾"><p>ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ä¸ªè¡Œä¸ºæ¨¡å¼ï¼Œæ—¨åœ¨å°è£…ä¸€ç³»åˆ—çš„è¡Œä¸ºã€‚è€Œæ¡¥æ¢æ¨¡å¼åˆ™æ˜¯è§£å†³åœ¨ä¸ç ´åå°è£…çš„æƒ…å†µä¸‹å¦‚ä½•æŠ½å–å‡ºå®ƒçš„æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†ï¼Œå®ƒçš„å‰ææ˜¯ä¸ç ´åå°è£…ï¼Œè®©æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ï¼Œåªè¦ç»§æ‰¿äº†æŠ½è±¡ç±»å°±å¯ä»¥ç»§ç»­æ‰©å±•ï¼Œå®ƒçš„ä¸»æ—¨æ˜¯å»ºç«‹ä¸€ä¸ªä¸ç ´åå°è£…æ€§çš„å¯æ‰©å±•æ¶æ„ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œç­–ç•¥æ¨¡å¼æ˜¯ä½¿ç”¨ç»§æ‰¿å’Œå¤šæ€å»ºç«‹ä¸€å¥—å¯ä»¥è‡ªç”±åˆ‡æ¢ç®—æ³•çš„æ¨¡å¼ï¼Œæ¡¥æ¢æ¨¡å¼æ˜¯åœ¨ä¸ç ´åå°è£…çš„å‰æä¸‹è§£å†³æŠ½è±¡å’Œå®ç°éƒ½å¯ä»¥ç‹¬ç«‹æ‰©å±•çš„æ¨¡å¼ã€‚æ¡¥æ¢æ¨¡å¼æ›´å¤šçš„æ˜¯å°†æŠ½è±¡å’Œå®ç°è§£è€¦ï¼Œæ¡¥æ¥çš„å®ç°å¯ä»¥ä¸€ç›´é‡å†™å»é€‚åº”æ‰©å±•ï¼Œç­–ç•¥æ›´å¤šçš„æ˜¯å®ç°ï¼ˆç®—æ³•ï¼‰çš„æ›¿æ¢ã€‚</p><h4 id="é—¨é¢æ¨¡å¼vsä¸­ä»‹è€…æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#é—¨é¢æ¨¡å¼vsä¸­ä»‹è€…æ¨¡å¼"><span>é—¨é¢æ¨¡å¼VSä¸­ä»‹è€…æ¨¡å¼</span></a></h4><p>é—¨é¢æ¨¡å¼ä¸ºå¤æ‚çš„å­ç³»ç»Ÿæä¾›ä¸€ä¸ªç»Ÿä¸€çš„è®¿é—®ç•Œé¢ï¼Œå®ƒå®šä¹‰çš„æ˜¯ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¯¥æ¥å£ä½¿å¾—å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ï¼Œé¿å…å¤–éƒ¨æ¨¡å—æ·±å…¥åˆ°å­ç³»ç»Ÿå†…éƒ¨è€Œäº§ç”Ÿä¸å­ç³»ç»Ÿå†…éƒ¨ç»†èŠ‚è€¦åˆçš„é—®é¢˜ã€‚ä¸­ä»‹è€…æ¨¡å¼ä½¿ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—åŒäº‹å¯¹è±¡çš„äº¤äº’è¡Œä¸ºï¼Œå®ƒä½¿å„å¯¹è±¡ä¹‹é—´ä¸å†æ˜¾å¼åœ°å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œå»ºç«‹ä¸€ä¸ªå¯æ‰©å±•çš„åº”ç”¨æ¶æ„ã€‚</p><p>é—¨é¢æ¨¡å¼æ˜¯ä»¥å°è£…å’Œéš”ç¦»ä¸ºä¸»è¦ä»»åŠ¡ï¼Œè€Œä¸­ä»‹è€…æ¨¡å¼åˆ™æ˜¯ä»¥è°ƒå’ŒåŒäº‹ç±»ä¹‹é—´çš„å…³ç³»ä¸ºä¸»ï¼Œå› ä¸ºè¦è°ƒå’Œï¼Œæ‰€ä»¥å…·æœ‰äº†éƒ¨åˆ†çš„ä¸šåŠ¡é€»è¾‘æ§åˆ¶ä¸¤è€…çš„ä¸»è¦åŒºåˆ«å¦‚ä¸‹ï¼š</p><ul><li>åŠŸèƒ½åŒºåˆ«ã€‚</li></ul><p>é—¨é¢æ¨¡å¼åªæ˜¯å¢åŠ äº†ä¸€ä¸ªé—¨é¢ï¼Œå®ƒå¯¹å­ç³»ç»Ÿæ¥è¯´æ²¡æœ‰å¢åŠ ä»»ä½•çš„åŠŸèƒ½ï¼Œå­ç³»ç»Ÿè‹¥è„±ç¦»é—¨é¢æ¨¡å¼æ˜¯å®Œå…¨å¯ä»¥ç‹¬ç«‹è¿è¡Œçš„ã€‚è€Œä¸­ä»‹è€…æ¨¡å¼åˆ™å¢åŠ äº†ä¸šåŠ¡åŠŸèƒ½ï¼Œå®ƒæŠŠå„ä¸ªåŒäº‹ç±»ä¸­çš„åŸæœ‰è€¦åˆå…³ç³»ç§»æ¤åˆ°äº†ä¸­ä»‹è€…ï¼ŒåŒäº‹ç±»ä¸å¯èƒ½è„±ç¦»ä¸­ä»‹è€…è€Œç‹¬ç«‹å­˜åœ¨ï¼Œé™¤éæ˜¯æƒ³å¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§å’Œé™ä½æ‰©å±•æ€§ã€‚</p><ul><li>çŸ¥æ™“çŠ¶æ€ä¸åŒã€‚</li></ul><p>å¯¹é—¨é¢æ¨¡å¼æ¥è¯´ï¼Œå­ç³»ç»Ÿä¸çŸ¥é“æœ‰é—¨é¢å­˜åœ¨ï¼Œè€Œå¯¹ä¸­ä»‹è€…æ¥è¯´ï¼Œæ¯ä¸ªåŒäº‹ç±»éƒ½çŸ¥é“ä¸­ä»‹è€…å­˜åœ¨ï¼Œå› ä¸ºè¦ä¾é ä¸­ä»‹è€…è°ƒå’ŒåŒäº‹ä¹‹é—´çš„å…³ç³»ï¼Œå®ƒä»¬å¯¹ä¸­ä»‹è€…éå¸¸äº†è§£ã€‚</p><ul><li>å°è£…ç¨‹åº¦ä¸åŒ</li></ul><p>é—¨é¢æ¨¡å¼æ˜¯ä¸€ç§ç®€å•çš„å°è£…ï¼Œæ‰€æœ‰çš„è¯·æ±‚å¤„ç†éƒ½å§”æ‰˜ç»™å­ç³»ç»Ÿå®Œæˆï¼Œè€Œä¸­ä»‹è€…æ¨¡å¼åˆ™éœ€è¦æœ‰ä¸€ä¸ªä¸­å¿ƒï¼Œç”±ä¸­å¿ƒåè°ƒåŒäº‹ç±»å®Œæˆï¼Œå¹¶ä¸”ä¸­å¿ƒæœ¬èº«ä¹Ÿå®Œæˆéƒ¨åˆ†ä¸šåŠ¡ï¼Œå®ƒå±äºæ›´è¿›ä¸€æ­¥çš„ä¸šåŠ¡åŠŸèƒ½å°è£…ã€‚</p><h4 id="åŒ…è£…æ¨¡å¼ç¾¤pk" tabindex="-1"><a class="header-anchor" href="#åŒ…è£…æ¨¡å¼ç¾¤pk"><span>åŒ…è£…æ¨¡å¼ç¾¤PK</span></a></h4><p>åŒ…è£…æ¨¡å¼åŒ…æ‹¬ï¼šè£…é¥°æ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼ã€é—¨é¢æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€æ¡¥æ¢æ¨¡å¼ã€‚</p><ul><li>ä»£ç†æ¨¡å¼ï¼šæœ‰äº‹æ‰¾ä»£ç†ï¼Œä»£ç†å»æ‰¾å®ç°ã€‚ä¸»è¦ç”¨åœ¨ä¸å¸Œæœ›å±•ç¤ºä¸€ä¸ªå¯¹è±¡å†…éƒ¨ç»†èŠ‚çš„åœºæ™¯ä¸­ã€‚</li><li>è£…é¥°æ¨¡å¼ï¼šè£…é¥°æ¨¡å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„ä»£ç†æ¨¡å¼ï¼Œå®ƒå€¡å¯¼çš„æ˜¯åœ¨ä¸æ”¹å˜æ¥å£çš„å‰æä¸‹ä¸ºå¯¹è±¡å¢å¼ºåŠŸèƒ½ï¼Œæˆ–è€…åŠ¨æ€æ·»åŠ é¢å¤–èŒè´£ã€‚ï¼ˆæŠ½è±¡+ç»§æ‰¿ï¼ŒæŠ½è±¡å®ç°æ¥å£ï¼Œå®ç°ä¸­ç›´æ¥è°ƒç”¨å¼•ç”¨æ¥å£å®ä¾‹çš„æ–¹æ³•ï¼Œè£…é¥°è€…ç»§æ‰¿æŠ½è±¡çˆ¶ç±»ï¼Œé‡å†™æ–¹æ³•å®Œæˆè£…é¥°åæ‰§è¡Œçˆ¶ç±»æ–¹æ³•ã€‚ï¼‰</li><li>é€‚é…å™¨æ¨¡å¼ï¼šä¸»è¦æ„å›¾æ˜¯æ¥å£è½¬æ¢ã€‚ç»§æ‰¿è¢«é€‚é…è€…å®ç°ç›®æ ‡æ¥å£ï¼Œå¯¹è¢«é€‚é…è€…åŠ å·¥å®ç°ç›®æ ‡ã€‚</li><li></li></ul><p>æ¡¥æ¥æ¨¡å¼ï¼šæŠ½è±¡å’Œå®ç°å‰¥ç¦»ï¼Œå®ç°å¯ä»¥ä¸å—æŠ½è±¡çš„çº¦æŸã€‚åœ¨æŠ½è±¡å±‚äº§ç”Ÿè€¦åˆï¼Œè§£å†³çš„æ˜¯è‡ªè¡Œæ‰©å±•çš„é—®é¢˜ï¼Œå®ƒå¯ä»¥ä½¿ä¸¤ä¸ªæœ‰è€¦åˆå…³ç³»çš„å¯¹è±¡äº’ä¸å½±å“åœ°æ‰©å±•ã€‚æŠ½è±¡å’Œå®ç°çš„æ¡¥æ¢ï¼ŒæŠ½è±¡ä¾èµ–å®ç°ï¼ŒæŠ½è±¡çš„å­ç±»é€šè¿‡é‡å†™è°ƒç”¨å®ç°ç±»çš„æ‰©å±•ã€‚ä¸»è¦è§£å†³æŠ½è±¡å’Œå®ç°çš„è§£è€¦ï¼Œå³æŠ½è±¡å’Œå®ç°å¯ä»¥è‡ªç”±æ‰©å±•è€Œä¸ä¼šå¯¹ç³»ç»Ÿé€ æˆå½±å“ã€‚</p><ul><li>é—¨é¢æ¨¡å¼ï¼šä¸å…·æœ‰ä»»ä½•çš„ä¸šåŠ¡é€»è¾‘ï¼Œä»…ä»…æ˜¯ä¸€ä¸ªè®¿é—®å¤æ‚ç³»ç»Ÿçš„å¿«é€Ÿé€šé“ã€‚å­˜åœ¨ä»…ä»…æ˜¯ä¸ºäº†æ–¹ä¾¿ã€‚</li></ul><h2 id="è®¾è®¡æ¨¡å¼æ··ç¼–" tabindex="-1"><a class="header-anchor" href="#è®¾è®¡æ¨¡å¼æ··ç¼–"><span>è®¾è®¡æ¨¡å¼æ··ç¼–</span></a></h2><h3 id="å‘½ä»¤æ¨¡å¼-è´£ä»»é“¾æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å‘½ä»¤æ¨¡å¼-è´£ä»»é“¾æ¨¡å¼"><span>å‘½ä»¤æ¨¡å¼+è´£ä»»é“¾æ¨¡å¼</span></a></h3><p>å‘½ä»¤æ¨¡å¼ä½œä¸ºè´£ä»»é“¾æ¨¡å¼çš„æ’å¤´å…µï¼Œç”±å‘½ä»¤æ¨¡å¼åˆ†å‘å…·ä½“çš„æ¶ˆæ¯åˆ°è´£ä»»é“¾æ¨¡å¼ã€‚</p><h3 id="å·¥å‚æ–¹æ³•æ¨¡å¼-ç­–ç•¥æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å·¥å‚æ–¹æ³•æ¨¡å¼-ç­–ç•¥æ¨¡å¼"><span>å·¥å‚æ–¹æ³•æ¨¡å¼+ç­–ç•¥æ¨¡å¼</span></a></h3><ul><li>ç­–ç•¥æ¨¡å¼ã€‚ç­–ç•¥æ¨¡å¼è´Ÿè´£å¯¹æ‰£æ¬¾ç­–ç•¥è¿›è¡Œå°è£…ï¼Œä¿è¯ä¸¤ä¸ªç­–ç•¥å¯ä»¥è‡ªç”±åˆ‡æ¢ï¼Œè€Œä¸”æ—¥åå¢åŠ æ‰£æ¬¾ç­–ç•¥ä¹Ÿéå¸¸ç®€å•å®¹æ˜“ã€‚</li><li>å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚ä¿®æ­£ç­–ç•¥æ¨¡å¼å¿…é¡»å¯¹å¤–æš´éœ²å…·ä½“ç­–ç•¥çš„é—®é¢˜ï¼Œç”±å·¥å‚æ–¹æ³•æ¨¡å¼ç›´æ¥äº§ç”Ÿä¸€ä¸ªå…·ä½“ç­–ç•¥å¯¹è±¡ï¼Œè€Œå…¶ä»–æ¨¡å—åˆ™ä¸éœ€è¦ä¾èµ–å…·ä½“çš„ç­–ç•¥ã€‚</li></ul><h3 id="è§‚å¯Ÿè€…æ¨¡å¼-ä¸­ä»‹è€…æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è§‚å¯Ÿè€…æ¨¡å¼-ä¸­ä»‹è€…æ¨¡å¼"><span>è§‚å¯Ÿè€…æ¨¡å¼+ä¸­ä»‹è€…æ¨¡å¼</span></a></h3><ul><li>è§‚å¯Ÿè€…æ¨¡å¼è§£å†³äº†äº‹ä»¶å¦‚ä½•é€šçŸ¥å¤„ç†è€…çš„é—®é¢˜ï¼Œè€Œä¸”è§‚å¯Ÿè€…æ¨¡å¼è¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹æ˜¯å¯ä»¥æœ‰å¤šä¸ªè§‚å¯Ÿè€…ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„æ¶æ„æ˜¯å¯ä»¥æœ‰å¤šå±‚çº§ã€å¤šåˆ†ç±»çš„å¤„ç†è€…ã€‚</li><li>ä¸­ä»‹è€…æ¨¡å¼ï¼Œè§£è€¦ã€‚</li></ul><h2 id="æ‰©å±•ç¯‡" tabindex="-1"><a class="header-anchor" href="#æ‰©å±•ç¯‡"><span>æ‰©å±•ç¯‡</span></a></h2><h3 id="è§„æ ¼æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#è§„æ ¼æ¨¡å¼"><span>è§„æ ¼æ¨¡å¼</span></a></h3><p>è§„æ ¼æ¨¡å¼æ˜¯ç»„åˆæ¨¡å¼çš„ä¸€ç§ç‰¹æ®Šåº”ç”¨ï¼Œå®ƒå…è®¸æ‚¨å®šä¹‰ä¸€ç»„æ¡ä»¶æˆ–è§„æ ¼æ¥è¯„ä¼°å¯¹è±¡ã€‚å®ƒæä¾›äº†ä¸€ç§å°†ä¸šåŠ¡è§„åˆ™æˆ–æ¡ä»¶å°è£…åˆ°ç‹¬ç«‹çš„è§„æ ¼ç±»ä¸­çš„æ–¹å¼ï¼Œå¯ä»¥å°†è¿™äº›è§„æ ¼ç»„åˆå¹¶å¯¹å¯¹è±¡è¿›è¡Œè¯„ä¼°ï¼Œä»¥ç¡®å®šå®ƒä»¬æ˜¯å¦æ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ã€‚</p><img src="/mars/images/book/designpattern/Rule.png" alt="è§„åˆ™æ¨¡å¼ç±»å›¾"><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p><p>å¤šä¸ªå¯¹è±¡ä¸­ç­›é€‰æŸ¥æ‰¾ï¼Œæˆ–è€…ä¸šåŠ¡è§„åˆ™ä¸é€‚äºæ”¾åœ¨ä»»ä½•å·²æœ‰å®ä½“æˆ–å€¼å¯¹è±¡ä¸­ï¼Œè€Œä¸”è§„åˆ™çš„å˜åŒ–å’Œç»„åˆä¼šæ©ç›–é‚£äº›é¢†åŸŸå¯¹è±¡çš„åŸºæœ¬å«ä¹‰ï¼Œæˆ–è€…æ˜¯æƒ³è‡ªå·±ç¼–å†™ä¸€ä¸ªç±»ä¼¼LINQçš„è¯­è¨€å·¥å…·çš„æ—¶å€™ å°±å¯ä»¥ç…§æ¬è¿™éƒ¨åˆ†ä»£ç ã€‚</p><h3 id="å¯¹è±¡æ± æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å¯¹è±¡æ± æ¨¡å¼"><span>å¯¹è±¡æ± æ¨¡å¼</span></a></h3><p>é€šè¿‡å¾ªç¯ä½¿ç”¨å¯¹è±¡ï¼Œå‡å°‘èµ„æºåœ¨åˆå§‹åŒ–å’Œé‡Šæ”¾æ—¶çš„æ˜‚è´µæŸè€—ã€‚</p><p>ç®€å•åœ°è¯´ï¼Œåœ¨éœ€è¦æ—¶ï¼Œä»æ± ä¸­æå–ï¼›ä¸ç”¨æ—¶ï¼Œæ”¾å›æ± ä¸­ï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚å…¸å‹ä¾‹å­æ˜¯è¿æ¥æ± å’Œçº¿ç¨‹æ± ã€‚</p><img src="/mars/images/book/designpattern/ObjectPool.png" alt="å¯¹è±¡æ± æ¨¡å¼ç±»å›¾"><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">ObjectPool</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token comment">//å®¹å™¨ï¼Œå®¹çº³å¯¹è±¡</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">Hashtable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">ObjectStatus</span><span class="token punctuation">&gt;</span></span> pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hashtable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">ObjectStatus</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//åˆå§‹åŒ–æ—¶åˆ›å»ºå¯¹è±¡ï¼Œå¹¶æ”¾å…¥åˆ°æ± ä¸­</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token class-name">ObjectPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    pool<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ObjectStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">//ä»Hashtableä¸­å–å‡ºç©ºé—²å…ƒç´ </span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token class-name">T</span> <span class="token function">checkOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//è¿™æ˜¯æœ€ç®€å•çš„ç­–ç•¥</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">T</span> t <span class="token operator">:</span> pool<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>pool<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            pool<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setUsing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">return</span> t<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">//å½’è¿˜å¯¹è±¡</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">checkIn</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    pool<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setFree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ObjectStatus</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//å ç”¨</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUsing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token comment">//é‡Šæ”¾</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFree</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//æ³¨æ„ï¼šè‹¥Tæ˜¯æœ‰çŠ¶æ€ï¼Œåˆ™éœ€è¦å›å½’åˆ°åˆå§‹åŒ–çŠ¶æ€</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token comment">//æ£€æŸ¥æ˜¯å¦å¯ç”¨</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">//åˆ›å»ºæ± åŒ–å¯¹è±¡</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">T</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å®é™…åº”ç”¨ä¸­è¿˜éœ€è¦è€ƒè™‘æ± çš„æœ€å°å€¼ã€æœ€å¤§å€¼ã€æ± åŒ–å¯¹è±¡çŠ¶æ€ï¼ˆè‹¥æœ‰çš„è¯ï¼Œéœ€è¦é‡ç‚¹è€ƒè™‘ï¼‰ã€å¼‚å¸¸å¤„ç†ï¼ˆå¦‚æ»¡æ± æƒ…å†µï¼‰ç­‰æ–¹é¢ï¼Œç‰¹åˆ«æ˜¯æ± åŒ–å¯¹è±¡çŠ¶æ€ï¼Œè‹¥æ˜¯æœ‰çŠ¶æ€çš„ä¸šåŠ¡å¯¹è±¡åˆ™éœ€è¦é‡ç‚¹å…³æ³¨ã€‚</p><h3 id="é›‡å·¥æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#é›‡å·¥æ¨¡å¼"><span>é›‡å·¥æ¨¡å¼</span></a></h3><p>é›‡å·¥æ¨¡å¼ä¹Ÿå«åšä»†äººæ¨¡å¼ï¼ˆServant Design Patternï¼‰ã€‚</p><p>é›‡å·¥æ¨¡å¼æ˜¯è¡Œä¸ºæ¨¡å¼çš„ä¸€ç§ï¼Œå®ƒä¸ºä¸€ç»„ç±»æä¾›é€šç”¨çš„åŠŸèƒ½ï¼Œè€Œä¸éœ€è¦ç±»å®ç°è¿™äº›åŠŸèƒ½ï¼Œå®ƒæ˜¯å‘½ä»¤æ¨¡å¼çš„ä¸€ç§æ‰©å±•ã€‚</p><p>æ ¸å¿ƒæ˜¯æ¥å£å®ä¾‹çš„ä¼ é€’</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">package</span> <span class="token namespace">employee</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * é€šç”¨åŠŸèƒ½</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">IServiced</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//å…·æœ‰çš„ç‰¹è´¨æˆ–åŠŸèƒ½</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">serviced</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * å…·ä½“åŠŸèƒ½</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteServiced1</span> <span class="token keyword">implements</span> <span class="token class-name">IServiced</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">serviced</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Serviced 1 doing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ConcreteServiced2</span> <span class="token keyword">implements</span> <span class="token class-name">IServiced</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">serviced</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Serviced 2 doing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * é›‡å·¥ç±»</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Servant</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//æœåŠ¡å†…å®¹</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">IServiced</span> serviceFuture<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        serviceFuture<span class="token punctuation">.</span><span class="token function">serviced</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmployeePattern</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">Servant</span> servant <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Servant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        servant<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConcreteServiced1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        servant<span class="token punctuation">.</span><span class="token function">service</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConcreteServiced2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é»‘æ¿æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#é»‘æ¿æ¨¡å¼"><span>é»‘æ¿æ¨¡å¼</span></a></h3><p>å…è®¸æ¶ˆæ¯çš„è¯»å†™åŒæ—¶è¿›è¡Œï¼Œå¹¿æ³›åœ°äº¤äº’æ¶ˆæ¯ã€‚</p><p>ä¸»è¦è§£å†³çš„é—®é¢˜æ˜¯æ¶ˆæ¯çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„è€¦åˆé—®é¢˜ï¼Œå®ƒçš„æ ¸å¿ƒæ˜¯æ¶ˆæ¯å­˜å‚¨ï¼ˆé»‘æ¿ï¼‰ï¼Œå®ƒå­˜å‚¨æ‰€æœ‰æ¶ˆæ¯ï¼Œå¹¶å¯ä»¥éšæ—¶è¢«è¯»å–ã€‚</p><ul><li>æ‹‰æ¨¡å¼ã€‚ä½¿ç”¨æ•°æ®åº“ã€‚</li><li>æ¨æ¨¡å¼ã€‚ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ã€‚</li></ul><h3 id="ç©ºå¯¹è±¡æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ç©ºå¯¹è±¡æ¨¡å¼"><span>ç©ºå¯¹è±¡æ¨¡å¼</span></a></h3><p>é€šè¿‡å®ç°ä¸€ä¸ªé»˜è®¤çš„æ— æ„ä¹‰å¯¹è±¡æ¥é¿å…nullå€¼å‡ºç°ï¼Œç®€å•åœ°è¯´ï¼Œå°±æ˜¯ä¸ºäº†é¿å…åœ¨ç¨‹åºä¸­å‡ºç°nullå€¼åˆ¤æ–­è€Œè¯ç”Ÿçš„ä¸€ç§å¸¸ç”¨è®¾è®¡æ–¹æ³•ã€‚</p><p>ç©ºå¯¹è±¡æ¨¡å¼æ˜¯é€šè¿‡ç©ºä»£ç å®ç°ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œä»¥æ»¡è¶³å¼€å‘éœ€æ±‚ï¼Œç®€åŒ–ç¨‹åºã€‚</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/Marswxq/mars/edit/main/docs/book/01-è®¾è®¡æ¨¡å¼ä¹‹ç¦….md" aria-label="Edit this page" rel="noopener noreferrer" target="_blank"><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->Edit this page<!----></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: wxq">wangxiaoquan</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><!----><a class="route-link auto-link next" href="/mars/docs/book/02-%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1.html" aria-label="02-é¢†åŸŸé©±åŠ¨è®¾è®¡"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>02-é¢†åŸŸé©±åŠ¨è®¾è®¡</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/mars/assets/app-CKtXyHQO.js" defer></script>
  </body>
</html>
