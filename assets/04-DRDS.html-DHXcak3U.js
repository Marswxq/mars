import{_ as t,c as l,a as n,b as p,w as e,d as r,r as c,o as k,e as o}from"./app-CKtXyHQO.js";const i={},u={class:"table-of-contents"};function d(_,s){const a=c("router-link");return k(),l("div",null,[s[31]||(s[31]=n("h1",{id:"drds",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#drds"},[n("span",null,"DRDS")])],-1)),s[32]||(s[32]=n("p",null,[n("strong",null,"目录")],-1)),n("nav",u,[n("ul",null,[n("li",null,[p(a,{to:"#show-help"},{default:e(()=>s[0]||(s[0]=[o("SHOW HELP")])),_:1})]),n("li",null,[p(a,{to:"#explain"},{default:e(()=>s[1]||(s[1]=[o("EXPLAIN")])),_:1}),n("ul",null,[n("li",null,[p(a,{to:"#语法"},{default:e(()=>s[2]||(s[2]=[o("语法")])),_:1})]),n("li",null,[p(a,{to:"#explain语句"},{default:e(()=>s[3]||(s[3]=[o("EXPLAIN语句")])),_:1})]),n("li",null,[p(a,{to:"#explain-logicalview语句"},{default:e(()=>s[4]||(s[4]=[o("EXPLAIN LOGICALVIEW语句")])),_:1})]),n("li",null,[p(a,{to:"#explain-execute语句"},{default:e(()=>s[5]||(s[5]=[o("EXPLAIN EXECUTE语句")])),_:1})]),n("li",null,[p(a,{to:"#explain-sharding语句"},{default:e(()=>s[6]||(s[6]=[o("EXPLAIN SHARDING语句")])),_:1})]),n("li",null,[p(a,{to:"#explain-cost语句"},{default:e(()=>s[7]||(s[7]=[o("EXPLAIN COST语句")])),_:1})]),n("li",null,[p(a,{to:"#explain-analyze语句"},{default:e(()=>s[8]||(s[8]=[o("EXPLAIN ANALYZE语句")])),_:1})]),n("li",null,[p(a,{to:"#explain-physical语句"},{default:e(()=>s[9]||(s[9]=[o("EXPLAIN PHYSICAL语句")])),_:1})]),n("li",null,[p(a,{to:"#explain-advisor语句"},{default:e(()=>s[10]||(s[10]=[o("EXPLAIN ADVISOR语句")])),_:1})])])]),n("li",null,[p(a,{to:"#check-table"},{default:e(()=>s[11]||(s[11]=[o("CHECK TABLE")])),_:1}),n("ul",null,[n("li",null,[p(a,{to:"#语法-1"},{default:e(()=>s[12]||(s[12]=[o("语法")])),_:1})]),n("li",null,[p(a,{to:"#示例"},{default:e(()=>s[13]||(s[13]=[o("示例")])),_:1})])])]),n("li",null,[p(a,{to:"#逻辑表的拓扑分布"},{default:e(()=>s[14]||(s[14]=[o("逻辑表的拓扑分布")])),_:1}),n("ul",null,[n("li",null,[p(a,{to:"#语法-2"},{default:e(()=>s[15]||(s[15]=[o("语法")])),_:1})]),n("li",null,[p(a,{to:"#示例-1"},{default:e(()=>s[16]||(s[16]=[o("示例")])),_:1})])])]),n("li",null,[p(a,{to:"#分库分表键集合"},{default:e(()=>s[17]||(s[17]=[o("分库分表键集合")])),_:1})]),n("li",null,[p(a,{to:"#广播表列表"},{default:e(()=>s[18]||(s[18]=[o("广播表列表")])),_:1})]),n("li",null,[p(a,{to:"#show-datasources"},{default:e(()=>s[19]||(s[19]=[o("SHOW DATASOURCES")])),_:1})]),n("li",null,[p(a,{to:"#show-node"},{default:e(()=>s[20]||(s[20]=[o("SHOW NODE")])),_:1})]),n("li",null,[p(a,{to:"#慢sql相关"},{default:e(()=>s[21]||(s[21]=[o("慢SQL相关")])),_:1}),n("ul",null,[n("li",null,[p(a,{to:"#语法-3"},{default:e(()=>s[22]||(s[22]=[o("语法")])),_:1})])])]),n("li",null,[p(a,{to:"#统计信息"},{default:e(()=>s[23]||(s[23]=[o("统计信息")])),_:1}),n("ul",null,[n("li",null,[p(a,{to:"#show-full-stats"},{default:e(()=>s[24]||(s[24]=[o("SHOW [FULL] STATS")])),_:1})]),n("li",null,[p(a,{to:"#show-db-status"},{default:e(()=>s[25]||(s[25]=[o("SHOW DB STATUS")])),_:1})]),n("li",null,[p(a,{to:"#show-table-status"},{default:e(()=>s[26]||(s[26]=[o("SHOW TABLE STATUS")])),_:1})]),n("li",null,[p(a,{to:"#show-table-info-name"},{default:e(()=>s[27]||(s[27]=[o("SHOW TABLE INFO [name]")])),_:1})])])]),n("li",null,[p(a,{to:"#分析数据分布不均衡"},{default:e(()=>s[28]||(s[28]=[o("分析数据分布不均衡")])),_:1}),n("ul",null,[n("li",null,[p(a,{to:"#分库级别的数据倾斜"},{default:e(()=>s[29]||(s[29]=[o("分库级别的数据倾斜")])),_:1})])])]),n("li",null,[p(a,{to:"#索引触发全表代价"},{default:e(()=>s[30]||(s[30]=[o("索引触发全表代价")])),_:1})])])]),s[33]||(s[33]=r(`<h2 id="show-help" tabindex="-1"><a class="header-anchor" href="#show-help"><span>SHOW HELP</span></a></h2><table><thead><tr><th>STATEMENT</th><th>DESCRIPTION_CN</th><th>DESCRIPTION</th><th>EXAMPLE</th></tr></thead><tbody><tr><td>show rule</td><td>查看所有表分片信息</td><td>Report all table rule</td><td></td></tr><tr><td>show rule from TABLE</td><td>查看具体表分片信息</td><td>Report table rule</td><td>show rule from user</td></tr><tr><td>show full rule from TABLE</td><td>查看具体表详细分片信息</td><td>Report table full rule</td><td>show full rule from user</td></tr><tr><td>show topology from TABLE</td><td>查看具体物理库表</td><td>Report table physical topology</td><td>show topology from user</td></tr><tr><td>show partitions from TABLE</td><td>查看具体表分片列</td><td>Report table dbPartition or tbPartition columns</td><td>show partitions from user</td></tr><tr><td>show broadcasts</td><td>查看所有广播表</td><td>Report all broadcast tables</td><td></td></tr><tr><td>show datasources</td><td>查看所有分库连接池信息</td><td>Report all partition db threadPool info</td><td></td></tr><tr><td>show node</td><td>查看所有分库主从读信息</td><td>Report master/slave read status</td><td></td></tr><tr><td>show slow</td><td>查看DRDS监控下的慢SQL</td><td>Report top 100 slow sql</td><td></td></tr><tr><td>show physical_slow</td><td>查看RDS监控下的慢SQL</td><td>Report top 100 physical slow sql</td><td></td></tr><tr><td>clear slow</td><td>清空慢SQL</td><td>Clear slow data</td><td></td></tr><tr><td>trace SQL</td><td>跟踪慢SQL不执行</td><td>Start trace sql, use show trace to print profiling data</td><td>trace select count(*) from user; show trace</td></tr><tr><td>show trace</td><td>显示跟踪</td><td>Report sql execute profiling info</td><td></td></tr><tr><td>explain SQL</td><td>执行计划</td><td>Report sql plan info</td><td>explain select count(*) from user</td></tr><tr><td>explain detail SQL</td><td>详细执行计划</td><td>Report sql detail plan info</td><td>explain detail select count(*) from user</td></tr><tr><td>explain execute SQL</td><td>物理节点执行计划</td><td>Report sql on physical db plan info</td><td>explain execute select count(*) from user</td></tr><tr><td>show sequences</td><td></td><td>Report all sequences status</td><td></td></tr><tr><td>create sequence NAME [start with COUNT]</td><td></td><td>Create sequence</td><td>create sequence test start with 0</td></tr><tr><td>alter sequence NAME [start with COUNT]</td><td></td><td>Alter sequence</td><td>alter sequence test start with 100000</td></tr><tr><td>drop sequence NAME</td><td></td><td>Drop sequence</td><td>drop sequence test</td></tr><tr><td>show db status</td><td>查看物理节点空间信息</td><td>Report size of each physical database</td><td>show db status</td></tr><tr><td>show full db status</td><td>查看物理节点表占用空间信息</td><td>Report size of each physical table, support like</td><td>show full db status like user</td></tr><tr><td>show ds</td><td>查看简单分库信息</td><td>Report simple partition db info</td><td>show ds</td></tr><tr><td>show connection</td><td>查看所有连接信息</td><td>Report all connections info</td><td>show connection</td></tr><tr><td>show trans</td><td>查看所有事物信息</td><td>Report trans info</td><td>show trans/show trans limit 2</td></tr><tr><td>show full trans</td><td>查看所有事物详细信息</td><td>Report all trans info</td><td>show full trans/show full trans limit 2</td></tr><tr><td>show stats</td><td>查看请求信息的统计信息</td><td>Report all requst stats</td><td>show stats</td></tr><tr><td>show stc</td><td>查看所有分库的请求信息</td><td>Report all requst stats by partition</td><td>show stc</td></tr><tr><td>show htc</td><td>查看所有分库的CPU/内存信息</td><td>Report the CPU/LOAD/MEM/NET/GC stats</td><td>show htc</td></tr><tr><td>show outlines</td><td></td><td>Report outlines</td><td>show outlines</td></tr></tbody></table><h2 id="explain" tabindex="-1"><a class="header-anchor" href="#explain"><span>EXPLAIN</span></a></h2><h3 id="语法" tabindex="-1"><a class="header-anchor" href="#语法"><span>语法</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">EXPLAIN</span></span>
<span class="line">{LOGICALVIEW <span class="token operator">|</span> LOGIC <span class="token operator">|</span> <span class="token keyword">SIMPLE</span> <span class="token operator">|</span> DETAIL <span class="token operator">|</span> <span class="token keyword">EXECUTE</span> <span class="token operator">|</span> PHYSICAL <span class="token operator">|</span> OPTIMIZER <span class="token operator">|</span> SHARDING</span>
<span class="line"> <span class="token operator">|</span> COST <span class="token operator">|</span> <span class="token keyword">ANALYZE</span> <span class="token operator">|</span> BASELINE <span class="token operator">|</span> JSON_PLAN <span class="token operator">|</span> ADVISOR} </span>
<span class="line"> {<span class="token keyword">SELECT</span> statement <span class="token operator">|</span> <span class="token keyword">DELETE</span> statement <span class="token operator">|</span> <span class="token keyword">INSERT</span> statement <span class="token operator">|</span> <span class="token keyword">REPLACE</span> statement<span class="token operator">|</span> <span class="token keyword">UPDATE</span> statement}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="explain语句" tabindex="-1"><a class="header-anchor" href="#explain语句"><span>EXPLAIN语句</span></a></h3><p>展示基本的SQL执行计划，该执行计划是算子组成，主要体现SQL在CN上的整个执行过程。</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">EXPLAIN</span> <span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> lineitem <span class="token keyword">group</span> <span class="token keyword">by</span> L_ORDERKEY<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span>
<span class="line"><span class="token operator">|</span> LOGICAL EXECUTIONPLAN                                                                                                                                                              <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span>
<span class="line"><span class="token operator">|</span> Project<span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;count(*)&quot;</span><span class="token punctuation">)</span>                                                                                                                                                       <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   HashAgg<span class="token punctuation">(</span><span class="token keyword">group</span><span class="token operator">=</span><span class="token string">&quot;L_ORDERKEY&quot;</span><span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;SUM(count(*))&quot;</span><span class="token punctuation">)</span>                                                                                                                            <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>     Gather<span class="token punctuation">(</span>concurrent<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span>                                                                                                                                                        <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>       LogicalView<span class="token punctuation">(</span><span class="token keyword">tables</span><span class="token operator">=</span><span class="token string">&quot;[000000-000003].lineitem_[00-15]&quot;</span><span class="token punctuation">,</span> shardCount<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token keyword">sql</span><span class="token operator">=</span><span class="token string">&quot;SELECT \`L_ORDERKEY\`, COUNT(*) AS \`count(*)\` FROM \`lineitem\` AS \`lineitem\` GROUP BY \`L_ORDERKEY\`&quot;</span><span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> HitCache:<span class="token boolean">false</span>                                                                                                                                                                     <span class="token operator">|</span>                                                                                                                                                               <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> TemplateId: <span class="token number">5819</span>c807                                                                                                                                                               <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中，HitCache标记该查询是否命中PlanCache，取值为falseortrue；TemplateId表示对该计划的标识，具有全局唯一性。</p><h3 id="explain-logicalview语句" tabindex="-1"><a class="header-anchor" href="#explain-logicalview语句"><span>EXPLAIN LOGICALVIEW语句</span></a></h3><p>展示基本的SQL执行计划，该执行计划是算子组成，主要体现SQL在CN上的整个执行过程。</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">EXPLAIN</span> LOGICALVIEW <span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> lineitem <span class="token keyword">group</span> <span class="token keyword">by</span> L_ORDERKEY<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">----------------------------------------------------------+</span></span>
<span class="line"><span class="token operator">|</span> LOGICAL EXECUTIONPLAN                                    <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">----------------------------------------------------------+</span></span>
<span class="line"><span class="token operator">|</span> Project<span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;count(*)&quot;</span><span class="token punctuation">)</span>                             <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   HashAgg<span class="token punctuation">(</span><span class="token keyword">group</span><span class="token operator">=</span><span class="token string">&quot;L_ORDERKEY&quot;</span><span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;SUM(count(*))&quot;</span><span class="token punctuation">)</span>  <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>     Gather<span class="token punctuation">(</span>concurrent<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span>                              <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>       LogicalView                                        <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>         MysqlAgg<span class="token punctuation">(</span><span class="token keyword">group</span><span class="token operator">=</span><span class="token string">&quot;L_ORDERKEY&quot;</span><span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;COUNT()&quot;</span><span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>           MysqlTableScan<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token punctuation">[</span>ads<span class="token punctuation">,</span> lineitem<span class="token punctuation">]</span><span class="token punctuation">)</span>           <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> HitCache:<span class="token boolean">true</span>                                            <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> Source:PLAN_CACHE                                        <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> TemplateId: <span class="token number">5819</span>c807</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="explain-execute语句" tabindex="-1"><a class="header-anchor" href="#explain-execute语句"><span>EXPLAIN EXECUTE语句</span></a></h3><p>表示下推SQL在MySQL的执行情况，这个语句和MySQL的explain语句同义。通过该语句可以查看下推SQL在DN上有没有使用索引，有没有做全表扫描。</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">EXPLAIN</span> <span class="token keyword">EXECUTE</span> <span class="token keyword">select</span>  <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> lineitem <span class="token keyword">group</span> <span class="token keyword">by</span> L_ORDERKEY<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">----+-------------+----------+------------+-------+---------------+---------+---------+-----+------+----------+----------------------------------------------+</span></span>
<span class="line"><span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span>    <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>     <span class="token operator">|</span> key_len <span class="token operator">|</span> ref <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra                                        <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">----+-------------+----------+------------+-------+---------------+---------+---------+-----+------+----------+----------------------------------------------+</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">1</span>  <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> lineitem <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">index</span> <span class="token operator">|</span> <span class="token keyword">PRIMARY</span>       <span class="token operator">|</span> <span class="token keyword">PRIMARY</span> <span class="token operator">|</span> <span class="token number">8</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> <span class="token number">100</span>      <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span><span class="token punctuation">;</span> <span class="token keyword">Using</span> <span class="token keyword">temporary</span><span class="token punctuation">;</span> <span class="token keyword">Using</span> filesort <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">----+-------------+----------+------------+-------+---------------+---------+---------+-----+------+----------+----------------------------------------------+</span></span>
<span class="line"><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.24</span> sec<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="explain-sharding语句" tabindex="-1"><a class="header-anchor" href="#explain-sharding语句"><span>EXPLAIN SHARDING语句</span></a></h3><p>展示当前查询在DN上扫描的物理分片情况。</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">EXPLAIN</span> SHARDING  <span class="token keyword">select</span>  <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> lineitem <span class="token keyword">group</span> <span class="token keyword">by</span> L_ORDERKEY<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">---------------+----------------------------------+-------------+-----------+-----------+</span></span>
<span class="line"><span class="token operator">|</span> LOGICAL_TABLE <span class="token operator">|</span> SHARDING                         <span class="token operator">|</span> SHARD_COUNT <span class="token operator">|</span> BROADCAST <span class="token operator">|</span> CONDITION <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">---------------+----------------------------------+-------------+-----------+-----------+</span></span>
<span class="line"><span class="token operator">|</span> lineitem      <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token number">000000</span><span class="token operator">-</span><span class="token number">000003</span><span class="token punctuation">]</span><span class="token punctuation">.</span>lineitem_<span class="token punctuation">[</span><span class="token number">00</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token number">16</span>          <span class="token operator">|</span> <span class="token boolean">false</span>     <span class="token operator">|</span>           <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">---------------+----------------------------------+-------------+-----------+-----------+</span></span>
<span class="line"><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.04</span> sec<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="explain-cost语句" tabindex="-1"><a class="header-anchor" href="#explain-cost语句"><span>EXPLAIN COST语句</span></a></h3><p>相对于EXPLAIN语句，除了展示执行计划以外，还会显示各个算子基于统计信息估算的代价，以及这条查询被优化器识别的WORKLOAD。</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">EXPLAIN</span> COST <span class="token keyword">select</span>  <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> lineitem <span class="token keyword">group</span> <span class="token keyword">by</span> L_ORDERKEY<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span>
<span class="line"><span class="token operator">|</span> LOGICAL EXECUTIONPLAN                                                                                                                                                                                                                                                                                            <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span>
<span class="line"><span class="token operator">|</span> Project<span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;count(*)&quot;</span><span class="token punctuation">)</span>: <span class="token keyword">rowcount</span> <span class="token operator">=</span> <span class="token number">2508.0</span><span class="token punctuation">,</span> cumulative cost <span class="token operator">=</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">2.4867663</span>E7<span class="token punctuation">,</span> cpu <span class="token operator">=</span> <span class="token number">112574.0</span><span class="token punctuation">,</span> memory <span class="token operator">=</span> <span class="token number">88984.0</span><span class="token punctuation">,</span> io <span class="token operator">=</span> <span class="token number">201.0</span><span class="token punctuation">,</span> net <span class="token operator">=</span> <span class="token number">4.75</span><span class="token punctuation">,</span> id <span class="token operator">=</span> <span class="token number">182</span>                                                                                                                                                       <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   HashAgg<span class="token punctuation">(</span><span class="token keyword">group</span><span class="token operator">=</span><span class="token string">&quot;L_ORDERKEY&quot;</span><span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;SUM(count(*))&quot;</span><span class="token punctuation">)</span>: <span class="token keyword">rowcount</span> <span class="token operator">=</span> <span class="token number">2508.0</span><span class="token punctuation">,</span> cumulative cost <span class="token operator">=</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">2.4867662</span>E7<span class="token punctuation">,</span> cpu <span class="token operator">=</span> <span class="token number">112573.0</span><span class="token punctuation">,</span> memory <span class="token operator">=</span> <span class="token number">88984.0</span><span class="token punctuation">,</span> io <span class="token operator">=</span> <span class="token number">201.0</span><span class="token punctuation">,</span> net <span class="token operator">=</span> <span class="token number">4.75</span><span class="token punctuation">,</span> id <span class="token operator">=</span> <span class="token number">180</span>                                                                                                                            <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>     Gather<span class="token punctuation">(</span>concurrent<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span>: <span class="token keyword">rowcount</span> <span class="token operator">=</span> <span class="token number">2508.0</span><span class="token punctuation">,</span> cumulative cost <span class="token operator">=</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">2.4860069</span>E7<span class="token punctuation">,</span> cpu <span class="token operator">=</span> <span class="token number">105039.0</span><span class="token punctuation">,</span> memory <span class="token operator">=</span> <span class="token number">29796.0</span><span class="token punctuation">,</span> io <span class="token operator">=</span> <span class="token number">201.0</span><span class="token punctuation">,</span> net <span class="token operator">=</span> <span class="token number">4.75</span><span class="token punctuation">,</span> id <span class="token operator">=</span> <span class="token number">178</span>                                                                                                                                                        <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>       LogicalView<span class="token punctuation">(</span><span class="token keyword">tables</span><span class="token operator">=</span><span class="token string">&quot;[000000-000003].lineitem_[00-15]&quot;</span><span class="token punctuation">,</span> shardCount<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token keyword">sql</span><span class="token operator">=</span><span class="token string">&quot;SELECT \`L_ORDERKEY\`, COUNT(*) AS \`count(*)\` FROM \`lineitem\` AS \`lineitem\` GROUP BY \`L_ORDERKEY\`&quot;</span><span class="token punctuation">)</span>: <span class="token keyword">rowcount</span> <span class="token operator">=</span> <span class="token number">2508.0</span><span class="token punctuation">,</span> cumulative cost <span class="token operator">=</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">2.4860068</span>E7<span class="token punctuation">,</span> cpu <span class="token operator">=</span> <span class="token number">105038.0</span><span class="token punctuation">,</span> memory <span class="token operator">=</span> <span class="token number">29796.0</span><span class="token punctuation">,</span> io <span class="token operator">=</span> <span class="token number">201.0</span><span class="token punctuation">,</span> net <span class="token operator">=</span> <span class="token number">4.75</span><span class="token punctuation">,</span> id <span class="token operator">=</span> <span class="token number">109</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> HitCache:<span class="token boolean">true</span>                                                                                                                                                                                                                                                                                                    <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> Source:PLAN_CACHE                                                                                                                                                                                                                                                                                                <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> WorkloadType: TP                                                                                                                                                                                                                                                                                                 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> TemplateId: <span class="token number">5819</span>c807</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="explain-analyze语句" tabindex="-1"><a class="header-anchor" href="#explain-analyze语句"><span>EXPLAIN ANALYZE语句</span></a></h3><p>相对于explain cost语句，除了显示各个算子基于统计信息估算的代价以外，该语句可以收集真实运行过程中算子输出的rowCount等信息。</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">EXPLAIN</span> <span class="token keyword">ANALYZE</span>  <span class="token keyword">select</span>  <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> lineitem <span class="token keyword">group</span> <span class="token keyword">by</span> L_ORDERKEY<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span>
<span class="line"><span class="token operator">|</span> LOGICAL EXECUTIONPLAN                                                                                                                                                                                                                                                                                                                                                                                    <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span>
<span class="line"><span class="token operator">|</span> Project<span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;count(*)&quot;</span><span class="token punctuation">)</span>: <span class="token keyword">rowcount</span> <span class="token operator">=</span> <span class="token number">2508.0</span><span class="token punctuation">,</span> cumulative cost <span class="token operator">=</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">2.4867663</span>E7<span class="token punctuation">,</span> cpu <span class="token operator">=</span> <span class="token number">112574.0</span><span class="token punctuation">,</span> memory <span class="token operator">=</span> <span class="token number">88984.0</span><span class="token punctuation">,</span> io <span class="token operator">=</span> <span class="token number">201.0</span><span class="token punctuation">,</span> net <span class="token operator">=</span> <span class="token number">4.75</span><span class="token punctuation">,</span> actual <span class="token keyword">time</span> <span class="token operator">=</span> <span class="token number">0.001</span> <span class="token operator">+</span> <span class="token number">0.000</span><span class="token punctuation">,</span> actual <span class="token keyword">rowcount</span> <span class="token operator">=</span> <span class="token number">2506</span><span class="token punctuation">,</span> actual memory <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> instances <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> id <span class="token operator">=</span> <span class="token number">182</span>                                                                                                                                                        <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   HashAgg<span class="token punctuation">(</span><span class="token keyword">group</span><span class="token operator">=</span><span class="token string">&quot;L_ORDERKEY&quot;</span><span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;SUM(count(*))&quot;</span><span class="token punctuation">)</span>: <span class="token keyword">rowcount</span> <span class="token operator">=</span> <span class="token number">2508.0</span><span class="token punctuation">,</span> cumulative cost <span class="token operator">=</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">2.4867662</span>E7<span class="token punctuation">,</span> cpu <span class="token operator">=</span> <span class="token number">112573.0</span><span class="token punctuation">,</span> memory <span class="token operator">=</span> <span class="token number">88984.0</span><span class="token punctuation">,</span> io <span class="token operator">=</span> <span class="token number">201.0</span><span class="token punctuation">,</span> net <span class="token operator">=</span> <span class="token number">4.75</span><span class="token punctuation">,</span> actual <span class="token keyword">time</span> <span class="token operator">=</span> <span class="token number">0.000</span> <span class="token operator">+</span> <span class="token number">0.000</span><span class="token punctuation">,</span> actual <span class="token keyword">rowcount</span> <span class="token operator">=</span> <span class="token number">2506</span><span class="token punctuation">,</span> actual memory <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> instances <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> id <span class="token operator">=</span> <span class="token number">180</span>                                                                                                                             <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>     Gather<span class="token punctuation">(</span>concurrent<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span>: <span class="token keyword">rowcount</span> <span class="token operator">=</span> <span class="token number">2508.0</span><span class="token punctuation">,</span> cumulative cost <span class="token operator">=</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">2.4860069</span>E7<span class="token punctuation">,</span> cpu <span class="token operator">=</span> <span class="token number">105039.0</span><span class="token punctuation">,</span> memory <span class="token operator">=</span> <span class="token number">29796.0</span><span class="token punctuation">,</span> io <span class="token operator">=</span> <span class="token number">201.0</span><span class="token punctuation">,</span> net <span class="token operator">=</span> <span class="token number">4.75</span><span class="token punctuation">,</span> actual <span class="token keyword">time</span> <span class="token operator">=</span> <span class="token number">0.000</span> <span class="token operator">+</span> <span class="token number">0.000</span><span class="token punctuation">,</span> actual <span class="token keyword">rowcount</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> actual memory <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> instances <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> id <span class="token operator">=</span> <span class="token number">178</span>                                                                                                                                                            <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>       LogicalView<span class="token punctuation">(</span><span class="token keyword">tables</span><span class="token operator">=</span><span class="token string">&quot;[000000-000003].lineitem_[00-15]&quot;</span><span class="token punctuation">,</span> shardCount<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token keyword">sql</span><span class="token operator">=</span><span class="token string">&quot;SELECT \`L_ORDERKEY\`, COUNT(*) AS \`count(*)\` FROM \`lineitem\` AS \`lineitem\` GROUP BY \`L_ORDERKEY\`&quot;</span><span class="token punctuation">)</span>: <span class="token keyword">rowcount</span> <span class="token operator">=</span> <span class="token number">2508.0</span><span class="token punctuation">,</span> cumulative cost <span class="token operator">=</span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">2.4860068</span>E7<span class="token punctuation">,</span> cpu <span class="token operator">=</span> <span class="token number">105038.0</span><span class="token punctuation">,</span> memory <span class="token operator">=</span> <span class="token number">29796.0</span><span class="token punctuation">,</span> io <span class="token operator">=</span> <span class="token number">201.0</span><span class="token punctuation">,</span> net <span class="token operator">=</span> <span class="token number">4.75</span><span class="token punctuation">,</span> actual <span class="token keyword">time</span> <span class="token operator">=</span> <span class="token number">0.030</span> <span class="token operator">+</span> <span class="token number">0.025</span><span class="token punctuation">,</span> actual <span class="token keyword">rowcount</span> <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">,</span> actual memory <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> instances <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> id <span class="token operator">=</span> <span class="token number">109</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> HitCache:<span class="token boolean">true</span>                                                                                                                                                                                                                                                                                                                                                                                            <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> Source:PLAN_CACHE                                                                                                                                                                                                                                                                                                                                                                                        <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> TemplateId: <span class="token number">5819</span>c807                                                                                                                                                                                                                                                                                                                                                                                     <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span>
<span class="line"><span class="token number">7</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">1.08</span> sec<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="explain-physical语句" tabindex="-1"><a class="header-anchor" href="#explain-physical语句"><span>EXPLAIN PHYSICAL语句</span></a></h3><p>展示查询在运行过程中执行模式、各个执行片段（Fragment）的依赖关系和并行度。该查询被识别为单机单线程计划模式（TP_LOCAL），执行计划被分为三个片段Fragment-0、Fragment-1和Fragment-2，先做预聚合再做最终的聚合计算，每个片段的执行度可以不同。</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">EXPLAIN</span> PHYSICAL <span class="token keyword">select</span>  <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> lineitem <span class="token keyword">group</span> <span class="token keyword">by</span> L_ORDERKEY<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span>
<span class="line"><span class="token operator">|</span> <span class="token keyword">PLAN</span>                                                                                                                                                                           <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span>
<span class="line"><span class="token operator">|</span> ExecutorMode: TP_LOCAL                                                                                                                                                         <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> Fragment <span class="token number">0</span> dependency: <span class="token punctuation">[</span><span class="token punctuation">]</span> parallelism: <span class="token number">4</span>                                                                                                                                       <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> Gather<span class="token punctuation">(</span>concurrent<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span>                                                                                                                                                        <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   LogicalView<span class="token punctuation">(</span><span class="token keyword">tables</span><span class="token operator">=</span><span class="token string">&quot;[000000-000003].lineitem_[00-15]&quot;</span><span class="token punctuation">,</span> shardCount<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token keyword">sql</span><span class="token operator">=</span><span class="token string">&quot;SELECT \`L_ORDERKEY\`, COUNT(*) AS \`count(*)\` FROM \`lineitem\` AS \`lineitem\` GROUP BY \`L_ORDERKEY\`&quot;</span><span class="token punctuation">)</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> Fragment <span class="token number">1</span> dependency: <span class="token punctuation">[</span><span class="token punctuation">]</span> parallelism: <span class="token number">8</span>                                                                                                                                       <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> LocalBuffer                                                                                                                                                                    <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   RemoteSource<span class="token punctuation">(</span>sourceFragmentIds<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">type</span><span class="token operator">=</span>RecordType<span class="token punctuation">(</span><span class="token keyword">INTEGER</span> L_ORDERKEY<span class="token punctuation">,</span> <span class="token keyword">BIGINT</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                                                                                    <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> Fragment <span class="token number">2</span> dependency: <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> parallelism: <span class="token number">8</span>                                                                                                                                   <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> Project<span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;count(*)&quot;</span><span class="token punctuation">)</span>                                                                                                                                                   <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   HashAgg<span class="token punctuation">(</span><span class="token keyword">group</span><span class="token operator">=</span><span class="token string">&quot;L_ORDERKEY&quot;</span><span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;SUM(count(*))&quot;</span><span class="token punctuation">)</span>                                                                                                                        <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>     RemoteSource<span class="token punctuation">(</span>sourceFragmentIds<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">type</span><span class="token operator">=</span>RecordType<span class="token punctuation">(</span><span class="token keyword">INTEGER</span> L_ORDERKEY<span class="token punctuation">,</span> <span class="token keyword">BIGINT</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                                                                                  <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span>
<span class="line"><span class="token number">11</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.10</span> sec<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="explain-advisor语句" tabindex="-1"><a class="header-anchor" href="#explain-advisor语句"><span>EXPLAIN ADVISOR语句</span></a></h3><p>基于统计信息，分析当前查询的执行计划，给用户推荐可以加速查询的全局二级索引。</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">EXPLAIN</span> ADVISOR <span class="token keyword">select</span>  <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> lineitem <span class="token keyword">group</span> <span class="token keyword">by</span> L_ORDERKEY \\G<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">1.</span> <span class="token keyword">row</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span></span>
<span class="line">IMPROVE_VALUE: <span class="token number">4.4</span><span class="token operator">%</span></span>
<span class="line">  IMPROVE_CPU: <span class="token number">340.8</span><span class="token operator">%</span></span>
<span class="line">  IMPROVE_MEM: <span class="token number">0.0</span><span class="token operator">%</span></span>
<span class="line">   IMPROVE_IO: <span class="token number">1910.0</span><span class="token operator">%</span></span>
<span class="line">  IMPROVE_NET: <span class="token number">0.0</span><span class="token operator">%</span></span>
<span class="line"> BEFORE_VALUE: <span class="token number">2.48676627</span>E7</span>
<span class="line">   BEFORE_CPU: <span class="token number">112573.7</span></span>
<span class="line">   BEFORE_MEM: <span class="token number">88983.8</span></span>
<span class="line">    BEFORE_IO: <span class="token number">201</span></span>
<span class="line">   BEFORE_NET: <span class="token number">4.7</span></span>
<span class="line">  AFTER_VALUE: <span class="token number">2.38256249</span>E7</span>
<span class="line">    AFTER_CPU: <span class="token number">25536</span></span>
<span class="line">    AFTER_MEM: <span class="token number">88983.8</span></span>
<span class="line">     AFTER_IO: <span class="token number">10</span></span>
<span class="line">    AFTER_NET: <span class="token number">4.7</span></span>
<span class="line"> ADVISE_INDEX: <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">\`</span>ads<span class="token punctuation">\`</span></span><span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">\`</span>lineitem<span class="token punctuation">\`</span></span> <span class="token keyword">ADD</span> <span class="token keyword">GLOBAL</span> <span class="token keyword">INDEX</span> <span class="token identifier"><span class="token punctuation">\`</span>__advise_index_gsi_lineitem_L_ORDERKEY<span class="token punctuation">\`</span></span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">\`</span>L_ORDERKEY<span class="token punctuation">\`</span></span><span class="token punctuation">)</span> DBPARTITION <span class="token keyword">BY</span> <span class="token keyword">HASH</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">\`</span>L_ORDERKEY<span class="token punctuation">\`</span></span><span class="token punctuation">)</span> TBPARTITION <span class="token keyword">BY</span> <span class="token keyword">HASH</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">\`</span>L_ORDERKEY<span class="token punctuation">\`</span></span><span class="token punctuation">)</span> TBPARTITIONS <span class="token number">4</span><span class="token punctuation">;</span></span>
<span class="line">     NEW_PLAN:</span>
<span class="line">Project<span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;count(*)&quot;</span><span class="token punctuation">)</span></span>
<span class="line">  HashAgg<span class="token punctuation">(</span><span class="token keyword">group</span><span class="token operator">=</span><span class="token string">&quot;L_ORDERKEY&quot;</span><span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">&quot;SUM(count(*))&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    Gather<span class="token punctuation">(</span>concurrent<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">      IndexScan<span class="token punctuation">(</span><span class="token keyword">tables</span><span class="token operator">=</span><span class="token string">&quot;[000000-000003].lineitem__what_if_gsi_L_ORDERKEY_[00-15]&quot;</span><span class="token punctuation">,</span> shardCount<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token keyword">sql</span><span class="token operator">=</span><span class="token string">&quot;SELECT \`L_ORDERKEY\`, COUNT(*) AS \`count(*)\` FROM \`lineitem__what_if_gsi_L_ORDERKEY\` AS \`lineitem__what_if_gsi_L_ORDERKEY\` GROUP BY \`L_ORDERKEY\`&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">         INFO: GLOBAL_INDEX</span>
<span class="line"><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.13</span> sec<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="check-table" tabindex="-1"><a class="header-anchor" href="#check-table"><span>CHECK TABLE</span></a></h2><p>CHECK TABLE用于对数据表进行检查，主要用于DDL建表失败的情形。</p><ul><li>对于拆分表，检查底层物理分表是否有缺失的情况，底层的物理分表的列和索引是否一致；</li><li>对于单库单表，检查表是否存在。</li></ul><h3 id="语法-1" tabindex="-1"><a class="header-anchor" href="#语法-1"><span>语法</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CHECK</span> <span class="token keyword">TABLE</span> tbl_name</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="示例" tabindex="-1"><a class="header-anchor" href="#示例"><span>示例</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CHECK</span> <span class="token keyword">TABLE</span> tddl_mgr_log<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------------------------+-------+----------+----------+</span></span>
<span class="line"><span class="token operator">|</span> <span class="token keyword">TABLE</span>                  <span class="token operator">|</span> OP    <span class="token operator">|</span> MSG_TYPE <span class="token operator">|</span> MSG_TEXT <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------------------------+-------+----------+----------+</span></span>
<span class="line"><span class="token operator">|</span> TDDL5_APP<span class="token punctuation">.</span>tddl_mgr_log <span class="token operator">|</span> <span class="token keyword">check</span> <span class="token operator">|</span> <span class="token keyword">status</span>   <span class="token operator">|</span> OK       <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------------------------+-------+----------+----------+</span></span>
<span class="line"><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.56</span> sec<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">CHECK</span> <span class="token keyword">TABLE</span> tddl_mg<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">-------------------+-------+----------+----------------------------------------+</span></span>
<span class="line"><span class="token operator">|</span> <span class="token keyword">TABLE</span>             <span class="token operator">|</span> OP    <span class="token operator">|</span> MSG_TYPE <span class="token operator">|</span> MSG_TEXT                               <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">-------------------+-------+----------+----------------------------------------+</span></span>
<span class="line"><span class="token operator">|</span> TDDL5_APP<span class="token punctuation">.</span>tddl_mg <span class="token operator">|</span> <span class="token keyword">check</span> <span class="token operator">|</span> Error    <span class="token operator">|</span> <span class="token keyword">Table</span> <span class="token string">&#39;tddl5_00.tddl_mg&#39;</span> doesn&#39;t exist <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">-------------------+-------+----------+----------------------------------------+</span></span>
<span class="line"><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="逻辑表的拓扑分布" tabindex="-1"><a class="header-anchor" href="#逻辑表的拓扑分布"><span>逻辑表的拓扑分布</span></a></h2><p>查看指定逻辑表的拓扑分布，展示该逻辑表保存在哪些分库中，每个分库下包含哪些分表。</p><h3 id="语法-2" tabindex="-1"><a class="header-anchor" href="#语法-2"><span>语法</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SHOW</span> PARTITIONS <span class="token keyword">FROM</span> tablename</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="示例-1" tabindex="-1"><a class="header-anchor" href="#示例-1"><span>示例</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">mysql<span class="token operator">&gt;</span> SHOW TOPOLOGY FROM test_table<span class="token punctuation">;</span> </span>
<span class="line">+-----+------------------------------------+---------------------+</span>
<span class="line"><span class="token operator">|</span> ID  <span class="token operator">|</span> GROUP_NAME                         <span class="token operator">|</span> TABLE_NAME          <span class="token operator">|</span></span>
<span class="line">+-----+------------------------------------+---------------------+</span>
<span class="line"><span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0000 <span class="token operator">|</span> test_table_Oenl_000 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0000 <span class="token operator">|</span> test_table_Oenl_001 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0000 <span class="token operator">|</span> test_table_Oenl_002 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0000 <span class="token operator">|</span> test_table_Oenl_003 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0000 <span class="token operator">|</span> test_table_Oenl_004 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   <span class="token number">5</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0000 <span class="token operator">|</span> test_table_Oenl_005 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   <span class="token number">6</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0000 <span class="token operator">|</span> test_table_Oenl_006 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   <span class="token number">7</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0000 <span class="token operator">|</span> test_table_Oenl_007 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   <span class="token number">8</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0001 <span class="token operator">|</span> test_table_Oenl_008 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>   <span class="token number">9</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0001 <span class="token operator">|</span> test_table_Oenl_009 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">10</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0001 <span class="token operator">|</span> test_table_Oenl_010 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">11</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0001 <span class="token operator">|</span> test_table_Oenl_011 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">12</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0001 <span class="token operator">|</span> test_table_Oenl_012 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">13</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0001 <span class="token operator">|</span> test_table_Oenl_013 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">14</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0001 <span class="token operator">|</span> test_table_Oenl_014 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">15</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0001 <span class="token operator">|</span> test_table_Oenl_015 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">16</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0002 <span class="token operator">|</span> test_table_Oenl_016 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">17</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0002 <span class="token operator">|</span> test_table_Oenl_017 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">18</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0002 <span class="token operator">|</span> test_table_Oenl_018 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">19</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0002 <span class="token operator">|</span> test_table_Oenl_019 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">20</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0002 <span class="token operator">|</span> test_table_Oenl_020 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">21</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0002 <span class="token operator">|</span> test_table_Oenl_021 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">22</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0002 <span class="token operator">|</span> test_table_Oenl_022 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">23</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0002 <span class="token operator">|</span> test_table_Oenl_023 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">24</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0003 <span class="token operator">|</span> test_table_Oenl_024 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">25</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0003 <span class="token operator">|</span> test_table_Oenl_025 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">26</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0003 <span class="token operator">|</span> test_table_Oenl_026 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">27</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0003 <span class="token operator">|</span> test_table_Oenl_027 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">28</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0003 <span class="token operator">|</span> test_table_Oenl_028 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">29</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0003 <span class="token operator">|</span> test_table_Oenl_029 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">30</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0003 <span class="token operator">|</span> test_table_Oenl_030 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">31</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0003 <span class="token operator">|</span> test_table_Oenl_031 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">32</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0004 <span class="token operator">|</span> test_table_Oenl_032 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">33</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0004 <span class="token operator">|</span> test_table_Oenl_033 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">34</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0004 <span class="token operator">|</span> test_table_Oenl_034 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">35</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0004 <span class="token operator">|</span> test_table_Oenl_035 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">36</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0004 <span class="token operator">|</span> test_table_Oenl_036 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">37</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0004 <span class="token operator">|</span> test_table_Oenl_037 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">38</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0004 <span class="token operator">|</span> test_table_Oenl_038 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">39</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0004 <span class="token operator">|</span> test_table_Oenl_039 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">40</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0005 <span class="token operator">|</span> test_table_Oenl_040 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">41</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0005 <span class="token operator">|</span> test_table_Oenl_041 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">42</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0005 <span class="token operator">|</span> test_table_Oenl_042 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">43</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0005 <span class="token operator">|</span> test_table_Oenl_043 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">44</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0005 <span class="token operator">|</span> test_table_Oenl_044 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">45</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0005 <span class="token operator">|</span> test_table_Oenl_045 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">46</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0005 <span class="token operator">|</span> test_table_Oenl_046 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">47</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0005 <span class="token operator">|</span> test_table_Oenl_047 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">48</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0006 <span class="token operator">|</span> test_table_Oenl_048 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">49</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0006 <span class="token operator">|</span> test_table_Oenl_049 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">50</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0006 <span class="token operator">|</span> test_table_Oenl_050 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">51</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0006 <span class="token operator">|</span> test_table_Oenl_051 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">52</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0006 <span class="token operator">|</span> test_table_Oenl_052 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">53</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0006 <span class="token operator">|</span> test_table_Oenl_053 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">54</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0006 <span class="token operator">|</span> test_table_Oenl_054 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">55</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0006 <span class="token operator">|</span> test_table_Oenl_055 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">56</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0007 <span class="token operator">|</span> test_table_Oenl_056 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">57</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0007 <span class="token operator">|</span> test_table_Oenl_057 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">58</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0007 <span class="token operator">|</span> test_table_Oenl_058 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">59</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0007 <span class="token operator">|</span> test_table_Oenl_059 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">60</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0007 <span class="token operator">|</span> test_table_Oenl_060 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">61</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0007 <span class="token operator">|</span> test_table_Oenl_061 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">62</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0007 <span class="token operator">|</span> test_table_Oenl_062 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">63</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0007 <span class="token operator">|</span> test_table_Oenl_063 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">64</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0008 <span class="token operator">|</span> test_table_Oenl_064 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">65</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0008 <span class="token operator">|</span> test_table_Oenl_065 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">66</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0008 <span class="token operator">|</span> test_table_Oenl_066 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">67</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0008 <span class="token operator">|</span> test_table_Oenl_067 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">68</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0008 <span class="token operator">|</span> test_table_Oenl_068 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">69</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0008 <span class="token operator">|</span> test_table_Oenl_069 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">70</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0008 <span class="token operator">|</span> test_table_Oenl_070 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">71</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0008 <span class="token operator">|</span> test_table_Oenl_071 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">72</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0009 <span class="token operator">|</span> test_table_Oenl_072 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">73</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0009 <span class="token operator">|</span> test_table_Oenl_073 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">74</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0009 <span class="token operator">|</span> test_table_Oenl_074 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">75</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0009 <span class="token operator">|</span> test_table_Oenl_075 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">76</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0009 <span class="token operator">|</span> test_table_Oenl_076 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">77</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0009 <span class="token operator">|</span> test_table_Oenl_077 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">78</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0009 <span class="token operator">|</span> test_table_Oenl_078 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">79</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0009 <span class="token operator">|</span> test_table_Oenl_079 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">80</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0010 <span class="token operator">|</span> test_table_Oenl_080 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">81</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0010 <span class="token operator">|</span> test_table_Oenl_081 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">82</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0010 <span class="token operator">|</span> test_table_Oenl_082 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">83</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0010 <span class="token operator">|</span> test_table_Oenl_083 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">84</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0010 <span class="token operator">|</span> test_table_Oenl_084 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">85</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0010 <span class="token operator">|</span> test_table_Oenl_085 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">86</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0010 <span class="token operator">|</span> test_table_Oenl_086 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">87</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0010 <span class="token operator">|</span> test_table_Oenl_087 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">88</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0011 <span class="token operator">|</span> test_table_Oenl_088 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">89</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0011 <span class="token operator">|</span> test_table_Oenl_089 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">90</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0011 <span class="token operator">|</span> test_table_Oenl_090 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">91</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0011 <span class="token operator">|</span> test_table_Oenl_091 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">92</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0011 <span class="token operator">|</span> test_table_Oenl_092 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">93</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0011 <span class="token operator">|</span> test_table_Oenl_093 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">94</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0011 <span class="token operator">|</span> test_table_Oenl_094 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">95</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0011 <span class="token operator">|</span> test_table_Oenl_095 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">96</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0012 <span class="token operator">|</span> test_table_Oenl_096 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">97</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0012 <span class="token operator">|</span> test_table_Oenl_097 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">98</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0012 <span class="token operator">|</span> test_table_Oenl_098 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">99</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0012 <span class="token operator">|</span> test_table_Oenl_099 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">100</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0012 <span class="token operator">|</span> test_table_Oenl_100 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">101</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0012 <span class="token operator">|</span> test_table_Oenl_101 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">102</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0012 <span class="token operator">|</span> test_table_Oenl_102 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">103</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0012 <span class="token operator">|</span> test_table_Oenl_103 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">104</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0013 <span class="token operator">|</span> test_table_Oenl_104 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">105</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0013 <span class="token operator">|</span> test_table_Oenl_105 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">106</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0013 <span class="token operator">|</span> test_table_Oenl_106 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">107</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0013 <span class="token operator">|</span> test_table_Oenl_107 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">108</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0013 <span class="token operator">|</span> test_table_Oenl_108 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">109</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0013 <span class="token operator">|</span> test_table_Oenl_109 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">110</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0013 <span class="token operator">|</span> test_table_Oenl_110 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">111</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0013 <span class="token operator">|</span> test_table_Oenl_111 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">112</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0014 <span class="token operator">|</span> test_table_Oenl_112 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">113</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0014 <span class="token operator">|</span> test_table_Oenl_113 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">114</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0014 <span class="token operator">|</span> test_table_Oenl_114 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">115</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0014 <span class="token operator">|</span> test_table_Oenl_115 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">116</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0014 <span class="token operator">|</span> test_table_Oenl_116 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">117</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0014 <span class="token operator">|</span> test_table_Oenl_117 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">118</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0014 <span class="token operator">|</span> test_table_Oenl_118 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">119</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0014 <span class="token operator">|</span> test_table_Oenl_119 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">120</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0015 <span class="token operator">|</span> test_table_Oenl_120 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">121</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0015 <span class="token operator">|</span> test_table_Oenl_121 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">122</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0015 <span class="token operator">|</span> test_table_Oenl_122 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">123</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0015 <span class="token operator">|</span> test_table_Oenl_123 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">124</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0015 <span class="token operator">|</span> test_table_Oenl_124 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">125</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0015 <span class="token operator">|</span> test_table_Oenl_125 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">126</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0015 <span class="token operator">|</span> test_table_Oenl_126 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">127</span> <span class="token operator">|</span> DB_1631610412546HSWK_0LNF_0015 <span class="token operator">|</span> test_table_Oenl_127 <span class="token operator">|</span></span>
<span class="line">+-----+------------------------------------+---------------------+</span>
<span class="line"><span class="token number">128</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.28</span> sec<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="分库分表键集合" tabindex="-1"><a class="header-anchor" href="#分库分表键集合"><span>分库分表键集合</span></a></h2><p>查看分库分表键集合，分库键和分表键之间用逗号分割。如果最终结果有两个值，说明是既分库又分表的情形，第一个是分库键，第二个是分表键。如果结果只有一个值，说明是分库不分表的情形，该值是分库键。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">mysql<span class="token operator">&gt;</span> show PARTITIONS from test_table<span class="token punctuation">;</span></span>
<span class="line">+-------------+</span>
<span class="line"><span class="token operator">|</span> KEYS        <span class="token operator">|</span></span>
<span class="line">+-------------+</span>
<span class="line"><span class="token operator">|</span> TESTTABLE_ID <span class="token operator">|</span></span>
<span class="line">+-------------+</span>
<span class="line"><span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.07</span> sec<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="广播表列表" tabindex="-1"><a class="header-anchor" href="#广播表列表"><span>广播表列表</span></a></h2><p>查看广播表列表。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">SHOW BROADCASTS<span class="token punctuation">;</span></span>
<span class="line">+------+------------+</span>
<span class="line"><span class="token operator">|</span> ID   <span class="token operator">|</span> TABLE_NAME <span class="token operator">|</span></span>
<span class="line">+------+------------+</span>
<span class="line"><span class="token operator">|</span>    <span class="token number">0</span> <span class="token operator">|</span> brd2       <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> brd_tbl    <span class="token operator">|</span></span>
<span class="line">+------+------------+</span>
<span class="line"><span class="token number">2</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="show-datasources" tabindex="-1"><a class="header-anchor" href="#show-datasources"><span>SHOW DATASOURCES</span></a></h2><p>查看底层存储信息，包含数据库名、数据库分组名、连接信息、用户名、底层存储类型、读写权重、连接池信息等。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">SHOW DATASOURCES<span class="token punctuation">;</span></span>
<span class="line">+------+----------------------------+------------------------------------------------+--------------------------------------------------+----------------------------------------------------------------------------------+-----------+-------+------+------+------+--------------+----------+--------------+---------------+----------------------------------------------+-------------+--------------+   </span>
<span class="line"><span class="token operator">|</span> ID   <span class="token operator">|</span> SCHEMA                     <span class="token operator">|</span> NAME                                           <span class="token operator">|</span> GROUP                                            <span class="token operator">|</span> URL                                                                              <span class="token operator">|</span> <span class="token environment constant">USER</span>      <span class="token operator">|</span> TYPE  <span class="token operator">|</span> INIT <span class="token operator">|</span> MIN  <span class="token operator">|</span> MAX  <span class="token operator">|</span> IDLE_TIMEOUT <span class="token operator">|</span> MAX_WAIT <span class="token operator">|</span> ACTIVE_COUNT <span class="token operator">|</span> POOLING_COUNT <span class="token operator">|</span> ATOM                                         <span class="token operator">|</span> READ_WEIGHT <span class="token operator">|</span> WRITE_WEIGHT <span class="token operator">|</span></span>
<span class="line">+------+----------------------------+------------------------------------------------+--------------------------------------------------+----------------------------------------------------------------------------------+-----------+-------+------+------+------+--------------+----------+--------------+---------------+----------------------------------------------+-------------+--------------+  </span>
<span class="line"><span class="token operator">|</span>    <span class="token number">0</span> <span class="token operator">|</span> seq_test_1487767780814rgkk <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0000_iiab_1 <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0000_RDS <span class="token operator">|</span> jdbc:mysql://rds1ur80kcv8g3t6p3ol.mysql.rds.aliyuncs.com:3306/seq_test_wnjg_0000 <span class="token operator">|</span> jnkinsea0 <span class="token operator">|</span> xdb   <span class="token operator">|</span> <span class="token number">0</span>    <span class="token operator">|</span> <span class="token number">24</span>   <span class="token operator">|</span> <span class="token number">72</span>   <span class="token operator">|</span> <span class="token number">15</span>           <span class="token operator">|</span> <span class="token number">5000</span>     <span class="token operator">|</span> <span class="token number">0</span>            <span class="token operator">|</span> <span class="token number">1</span>             <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0000_iiab <span class="token operator">|</span> <span class="token number">10</span>          <span class="token operator">|</span> <span class="token number">10</span>           <span class="token operator">|</span>  </span>
<span class="line"><span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> seq_test_1487767780814rgkk <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0001_iiab_2 <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0001_RDS <span class="token operator">|</span> jdbc:mysql://rds1ur80kcv8g3t6p3ol.mysql.rds.aliyuncs.com:3306/seq_test_wnjg_0001 <span class="token operator">|</span> jnkinsea0 <span class="token operator">|</span> xdb   <span class="token operator">|</span> <span class="token number">0</span>    <span class="token operator">|</span> <span class="token number">24</span>   <span class="token operator">|</span> <span class="token number">72</span>   <span class="token operator">|</span> <span class="token number">15</span>           <span class="token operator">|</span> <span class="token number">5000</span>     <span class="token operator">|</span> <span class="token number">0</span>            <span class="token operator">|</span> <span class="token number">1</span>             <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0001_iiab <span class="token operator">|</span> <span class="token number">10</span>          <span class="token operator">|</span> <span class="token number">10</span>           <span class="token operator">|</span>   </span>
<span class="line"><span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> seq_test_1487767780814rgkk <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0002_iiab_3 <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0002_RDS <span class="token operator">|</span> jdbc:mysql://rds1ur80kcv8g3t6p3ol.mysql.rds.aliyuncs.com:3306/seq_test_wnjg_0002 <span class="token operator">|</span> jnkinsea0 <span class="token operator">|</span> xdb   <span class="token operator">|</span> <span class="token number">0</span>    <span class="token operator">|</span> <span class="token number">24</span>   <span class="token operator">|</span> <span class="token number">72</span>   <span class="token operator">|</span> <span class="token number">15</span>           <span class="token operator">|</span> <span class="token number">5000</span>     <span class="token operator">|</span> <span class="token number">0</span>            <span class="token operator">|</span> <span class="token number">1</span>             <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0002_iiab <span class="token operator">|</span> <span class="token number">10</span>          <span class="token operator">|</span> <span class="token number">10</span>           <span class="token operator">|</span> </span>
<span class="line"><span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> seq_test_1487767780814rgkk <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0003_iiab_4 <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0003_RDS <span class="token operator">|</span> jdbc:mysql://rds1ur80kcv8g3t6p3ol.mysql.rds.aliyuncs.com:3306/seq_test_wnjg_0003 <span class="token operator">|</span> jnkinsea0 <span class="token operator">|</span> xdb   <span class="token operator">|</span> <span class="token number">0</span>    <span class="token operator">|</span> <span class="token number">24</span>   <span class="token operator">|</span> <span class="token number">72</span>   <span class="token operator">|</span> <span class="token number">15</span>           <span class="token operator">|</span> <span class="token number">5000</span>     <span class="token operator">|</span> <span class="token number">0</span>            <span class="token operator">|</span> <span class="token number">1</span>             <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0003_iiab <span class="token operator">|</span> <span class="token number">10</span>          <span class="token operator">|</span> <span class="token number">10</span>           <span class="token operator">|</span>   </span>
<span class="line"><span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> seq_test_1487767780814rgkk <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0004_iiab_5 <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0004_RDS <span class="token operator">|</span> jdbc:mysql://rds1ur80kcv8g3t6p3ol.mysql.rds.aliyuncs.com:3306/seq_test_wnjg_0004 <span class="token operator">|</span> jnkinsea0 <span class="token operator">|</span> xdb   <span class="token operator">|</span> <span class="token number">0</span>    <span class="token operator">|</span> <span class="token number">24</span>   <span class="token operator">|</span> <span class="token number">72</span>   <span class="token operator">|</span> <span class="token number">15</span>           <span class="token operator">|</span> <span class="token number">5000</span>     <span class="token operator">|</span> <span class="token number">0</span>            <span class="token operator">|</span> <span class="token number">1</span>             <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0004_iiab <span class="token operator">|</span> <span class="token number">10</span>          <span class="token operator">|</span> <span class="token number">10</span>           <span class="token operator">|</span>   </span>
<span class="line"><span class="token operator">|</span>    <span class="token number">5</span> <span class="token operator">|</span> seq_test_1487767780814rgkk <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0005_iiab_6 <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0005_RDS <span class="token operator">|</span> jdbc:mysql://rds1ur80kcv8g3t6p3ol.mysql.rds.aliyuncs.com:3306/seq_test_wnjg_0005 <span class="token operator">|</span> jnkinsea0 <span class="token operator">|</span> xdb   <span class="token operator">|</span> <span class="token number">0</span>    <span class="token operator">|</span> <span class="token number">24</span>   <span class="token operator">|</span> <span class="token number">72</span>   <span class="token operator">|</span> <span class="token number">15</span>           <span class="token operator">|</span> <span class="token number">5000</span>     <span class="token operator">|</span> <span class="token number">0</span>            <span class="token operator">|</span> <span class="token number">1</span>             <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0005_iiab <span class="token operator">|</span> <span class="token number">10</span>          <span class="token operator">|</span> <span class="token number">10</span>           <span class="token operator">|</span>  </span>
<span class="line"><span class="token operator">|</span>    <span class="token number">6</span> <span class="token operator">|</span> seq_test_1487767780814rgkk <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0006_iiab_7 <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0006_RDS <span class="token operator">|</span> jdbc:mysql://rds1ur80kcv8g3t6p3ol.mysql.rds.aliyuncs.com:3306/seq_test_wnjg_0006 <span class="token operator">|</span> jnkinsea0 <span class="token operator">|</span> xdb   <span class="token operator">|</span> <span class="token number">0</span>    <span class="token operator">|</span> <span class="token number">24</span>   <span class="token operator">|</span> <span class="token number">72</span>   <span class="token operator">|</span> <span class="token number">15</span>           <span class="token operator">|</span> <span class="token number">5000</span>     <span class="token operator">|</span> <span class="token number">0</span>            <span class="token operator">|</span> <span class="token number">1</span>             <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0006_iiab <span class="token operator">|</span> <span class="token number">10</span>          <span class="token operator">|</span> <span class="token number">10</span>           <span class="token operator">|</span>  </span>
<span class="line"><span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span> seq_test_1487767780814rgkk <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0007_iiab_8 <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0007_RDS <span class="token operator">|</span> jdbc:mysql://rds1ur80kcv8g3t6p3ol.mysql.rds.aliyuncs.com:3306/seq_test_wnjg_0007 <span class="token operator">|</span> jnkinsea0 <span class="token operator">|</span> xdb   <span class="token operator">|</span> <span class="token number">0</span>    <span class="token operator">|</span> <span class="token number">24</span>   <span class="token operator">|</span> <span class="token number">72</span>   <span class="token operator">|</span> <span class="token number">15</span>           <span class="token operator">|</span> <span class="token number">5000</span>     <span class="token operator">|</span> <span class="token number">0</span>            <span class="token operator">|</span> <span class="token number">1</span>             <span class="token operator">|</span> rds1ur80kcv8g3t6p3ol_seq_test_wnjg_0007_iiab <span class="token operator">|</span> <span class="token number">10</span>          <span class="token operator">|</span> <span class="token number">10</span>           <span class="token operator">|</span>  </span>
<span class="line">+------+----------------------------+------------------------------------------------+--------------------------------------------------+----------------------------------------------------------------------------------+-----------+-------+------+------+------+--------------+----------+--------------+---------------+----------------------------------------------+-------------+--------------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重要列详解：</p><ul><li><strong>SCHEMA</strong>：数据库名；</li><li><strong>GROUP</strong>：数据库分组名。分组的目标是管理多组数据完全相同的数据库，比如通过 RDS（MySQL）进行数据复制后的主备数据库。主要用来解决读写分离、主备切换的问题；</li><li><strong>URL</strong>：底层RDS（MySQL）的连接信息；</li><li><strong>TYPE</strong>：底层存储类型。</li><li><strong>READ_WEIGHT</strong> ：读权重。在主实例的读压力比较大的时候，可以通过读写分离功能将读流量进行分流，减轻RDS主实例的压力。PolarDB-X会自动识别读写流量，引导写流量进入RDS主实例，读流量则按配置的权重流向所有RDS实例；</li><li><strong>WRITE_WEIGHT</strong>：写权重。</li></ul><h2 id="show-node" tabindex="-1"><a class="header-anchor" href="#show-node"><span>SHOW NODE</span></a></h2><p>查看物理库的读写次数（历史累计数据）、读写权重（历史累计数据）。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">SHOW NODE<span class="token punctuation">;</span></span>
<span class="line">+------+--------------------------------------------------+-------------------+------------------+---------------------+--------------------+</span>
<span class="line"><span class="token operator">|</span> ID   <span class="token operator">|</span> NAME                                             <span class="token operator">|</span> MASTER_READ_COUNT <span class="token operator">|</span> SLAVE_READ_COUNT <span class="token operator">|</span> MASTER_READ_PERCENT <span class="token operator">|</span> SLAVE_READ_PERCENT <span class="token operator">|</span></span>
<span class="line">+------+--------------------------------------------------+-------------------+------------------+---------------------+--------------------+</span>
<span class="line"><span class="token operator">|</span> <span class="token number">0</span>    <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0000_RDS <span class="token operator">|</span>                <span class="token number">12</span> <span class="token operator">|</span>                <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">100</span>%                <span class="token operator">|</span> <span class="token number">0</span>%                 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0001_RDS <span class="token operator">|</span>                 <span class="token number">0</span> <span class="token operator">|</span>                <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">0</span>%                  <span class="token operator">|</span> <span class="token number">0</span>%                 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">2</span>    <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0002_RDS <span class="token operator">|</span>                 <span class="token number">0</span> <span class="token operator">|</span>                <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">0</span>%                  <span class="token operator">|</span> <span class="token number">0</span>%                 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">3</span>    <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0003_RDS <span class="token operator">|</span>                 <span class="token number">0</span> <span class="token operator">|</span>                <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">0</span>%                  <span class="token operator">|</span> <span class="token number">0</span>%                 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">4</span>    <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0004_RDS <span class="token operator">|</span>                 <span class="token number">0</span> <span class="token operator">|</span>                <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">0</span>%                  <span class="token operator">|</span> <span class="token number">0</span>%                 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">5</span>    <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0005_RDS <span class="token operator">|</span>                 <span class="token number">0</span> <span class="token operator">|</span>                <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">0</span>%                  <span class="token operator">|</span> <span class="token number">0</span>%                 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">6</span>    <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0006_RDS <span class="token operator">|</span>                 <span class="token number">0</span> <span class="token operator">|</span>                <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">0</span>%                  <span class="token operator">|</span> <span class="token number">0</span>%                 <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">7</span>    <span class="token operator">|</span> SEQ_TEST_1487767780814RGKKSEQ_TEST_WNJG_0007_RDS <span class="token operator">|</span>                 <span class="token number">0</span> <span class="token operator">|</span>                <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">0</span>%                  <span class="token operator">|</span> <span class="token number">0</span>%                 <span class="token operator">|</span></span>
<span class="line">+------+--------------------------------------------------+-------------------+------------------+---------------------+--------------------+</span>
<span class="line"><span class="token number">8</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重要列详解：</p><ul><li><strong>MASTER_COUNT</strong>：RDS主实例处理的读写查询次数（历史累计数据）；</li><li><strong>SLAVE_COUNT</strong>：RDS备实例处理的只读查询次数（历史累计数据）；</li><li><strong>MASTER_PERCENT</strong>：RDS主实例处理的读写查询占比（注意该列显示的是累计的实际数据占比，并不是用户配置的百分比）；</li><li><strong>SLAVE_PERCENT</strong>：RDS备实例处理的读写查询占比（注意该列显示的是累计的实际数据占比，并不是用户配置的百分比）。</li></ul><h2 id="慢sql相关" tabindex="-1"><a class="header-anchor" href="#慢sql相关"><span>慢SQL相关</span></a></h2><p>执行时间超过1秒的SQL语句是慢SQL，逻辑慢SQL是指应用发送到PolarDB-X的慢SQL。</p><h3 id="语法-3" tabindex="-1"><a class="header-anchor" href="#语法-3"><span>语法</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SHOW</span> <span class="token punctuation">[</span><span class="token keyword">FULL</span><span class="token punctuation">]</span> SLOW <span class="token punctuation">[</span><span class="token keyword">WHERE</span> expr<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">limit</span> expr<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>SHOW SLOW</strong>：查看自PolarDB-X启动或者上次执行<strong>CLEAR SLOW</strong>以来最慢的100条逻辑慢SQL；</li><li><strong>SHOW FULL SLOW</strong>：查看实例启动以来记录的所有逻辑慢SQL（持久化到PolarDB-X的内置数据库中），该记录数默认为100条。</li></ul><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SHOW</span> <span class="token punctuation">[</span><span class="token keyword">FULL</span><span class="token punctuation">]</span> PHYSICAL_SLOW <span class="token punctuation">[</span><span class="token keyword">WHERE</span> expr<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">limit</span> expr<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>SHOW PHYSICAL_SLOW</strong>：查看自PolarDB-X启动或者上次执行<strong>CLEAR SLOW</strong> 以来最慢的100条物理慢SQL（注意，这里记录的是最慢的100个，缓存在PolarDB-X系统中，当实例重启或者执行<strong>CLEAR SLOW</strong>时会丢失）;</li><li><strong>SHOW FULL PHYSICAL_SLOW</strong>：查看实例启动以来记录的所有物理慢SQL（持久化到PolarDB-X的内置数据库中）。该记录数默认为100条。</li></ul><h2 id="统计信息" tabindex="-1"><a class="header-anchor" href="#统计信息"><span>统计信息</span></a></h2><h3 id="show-full-stats" tabindex="-1"><a class="header-anchor" href="#show-full-stats"><span>SHOW [FULL] STATS</span></a></h3><p>查看整体的统计信息，这些信息都是瞬时值。</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SHOW</span> STATS<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------+---------+----------+-------------------+------------------+------------------------+--------------------+--------+------------+--------------+---------------+----------------+---------------+---------------+--------------+</span></span>
<span class="line"><span class="token operator">|</span> QPS  <span class="token operator">|</span> RDS_QPS <span class="token operator">|</span> SLOW_QPS <span class="token operator">|</span> PHYSICAL_SLOW_QPS <span class="token operator">|</span> ERROR_PER_SECOND <span class="token operator">|</span> MERGE_QUERY_PER_SECOND <span class="token operator">|</span> ACTIVE_CONNECTIONS <span class="token operator">|</span> RT<span class="token punctuation">(</span>MS<span class="token punctuation">)</span> <span class="token operator">|</span> RDS_RT<span class="token punctuation">(</span>MS<span class="token punctuation">)</span> <span class="token operator">|</span> NET_IN<span class="token punctuation">(</span>KB<span class="token operator">/</span>S<span class="token punctuation">)</span> <span class="token operator">|</span> NET_OUT<span class="token punctuation">(</span>KB<span class="token operator">/</span>S<span class="token punctuation">)</span> <span class="token operator">|</span> THREAD_RUNNING <span class="token operator">|</span> DDL_JOB_COUNT <span class="token operator">|</span> BACKFILL_ROWS <span class="token operator">|</span> CHECKED_ROWS <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------+---------+----------+-------------------+------------------+------------------------+--------------------+--------+------------+--------------+---------------+----------------+---------------+---------------+--------------+</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">0.00</span> <span class="token operator">|</span>    <span class="token number">0.00</span> <span class="token operator">|</span>     <span class="token number">0.00</span> <span class="token operator">|</span>              <span class="token number">0.00</span> <span class="token operator">|</span>             <span class="token number">0.00</span> <span class="token operator">|</span>                   <span class="token number">0.00</span> <span class="token operator">|</span>                  <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">0.00</span> <span class="token operator">|</span>       <span class="token number">0.00</span> <span class="token operator">|</span>         <span class="token number">0.00</span> <span class="token operator">|</span>          <span class="token number">0.00</span> <span class="token operator">|</span>              <span class="token number">1</span> <span class="token operator">|</span>             <span class="token number">0</span> <span class="token operator">|</span>             <span class="token number">0</span> <span class="token operator">|</span>            <span class="token number">0</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------+---------+----------+-------------------+------------------+------------------------+--------------------+--------+------------+--------------+---------------+----------------+---------------+---------------+--------------+</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">show</span> <span class="token keyword">full</span> stats<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------+---------+----------+-------------------+------------------+----------------------+------------------------+--------------------+------------------------------+--------+------------+--------------+---------------+----------------+----------------------+-----------------+----------------------------+-----------------------+------------------------------+-------------------------+--------------------------+---------------------+-------+---------+-------------+------------+</span></span>
<span class="line"><span class="token operator">|</span> QPS  <span class="token operator">|</span> RDS_QPS <span class="token operator">|</span> SLOW_QPS <span class="token operator">|</span> PHYSICAL_SLOW_QPS <span class="token operator">|</span> ERROR_PER_SECOND <span class="token operator">|</span> VIOLATION_PER_SECOND <span class="token operator">|</span> MERGE_QUERY_PER_SECOND <span class="token operator">|</span> ACTIVE_CONNECTIONS <span class="token operator">|</span> CONNECTION_CREATE_PER_SECOND <span class="token operator">|</span> RT<span class="token punctuation">(</span>MS<span class="token punctuation">)</span> <span class="token operator">|</span> RDS_RT<span class="token punctuation">(</span>MS<span class="token punctuation">)</span> <span class="token operator">|</span> NET_IN<span class="token punctuation">(</span>KB<span class="token operator">/</span>S<span class="token punctuation">)</span> <span class="token operator">|</span> NET_OUT<span class="token punctuation">(</span>KB<span class="token operator">/</span>S<span class="token punctuation">)</span> <span class="token operator">|</span> THREAD_RUNNING <span class="token operator">|</span> HINT_USED_PER_SECOND <span class="token operator">|</span> HINT_USED_COUNT <span class="token operator">|</span> AGGREGATE_QUERY_PER_SECOND <span class="token operator">|</span> AGGREGATE_QUERY_COUNT <span class="token operator">|</span> TEMP_TABLE_CREATE_PER_SECOND <span class="token operator">|</span> TEMP_TABLE_CREATE_COUNT <span class="token operator">|</span> MULTI_DB_JOIN_PER_SECOND <span class="token operator">|</span> MULTI_DB_JOIN_COUNT <span class="token operator">|</span> CPU   <span class="token operator">|</span> FREEMEM <span class="token operator">|</span> FULLGCCOUNT <span class="token operator">|</span> FULLGCTIME <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------+---------+----------+-------------------+------------------+----------------------+------------------------+--------------------+------------------------------+--------+------------+--------------+---------------+----------------+----------------------+-----------------+----------------------------+-----------------------+------------------------------+-------------------------+--------------------------+---------------------+-------+---------+-------------+------------+</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">1.63</span> <span class="token operator">|</span>    <span class="token number">1.68</span> <span class="token operator">|</span>     <span class="token number">0.03</span> <span class="token operator">|</span>              <span class="token number">0.03</span> <span class="token operator">|</span>             <span class="token number">0.02</span> <span class="token operator">|</span>                 <span class="token number">0.00</span> <span class="token operator">|</span>                   <span class="token number">0.00</span> <span class="token operator">|</span>                  <span class="token number">6</span> <span class="token operator">|</span>                         <span class="token number">0.01</span> <span class="token operator">|</span> <span class="token number">157.13</span> <span class="token operator">|</span>      <span class="token number">51.14</span> <span class="token operator">|</span>       <span class="token number">134.33</span> <span class="token operator">|</span>          <span class="token number">1.21</span> <span class="token operator">|</span>              <span class="token number">1</span> <span class="token operator">|</span>                 <span class="token number">0.00</span> <span class="token operator">|</span>              <span class="token number">54</span> <span class="token operator">|</span>                       <span class="token number">0.00</span> <span class="token operator">|</span>                   <span class="token number">663</span> <span class="token operator">|</span>                         <span class="token number">0.00</span> <span class="token operator">|</span>                     <span class="token number">512</span> <span class="token operator">|</span>                     <span class="token number">0.00</span> <span class="token operator">|</span>                 <span class="token number">516</span> <span class="token operator">|</span> <span class="token number">0.09</span><span class="token operator">%</span> <span class="token operator">|</span>   <span class="token number">6.96</span><span class="token operator">%</span> <span class="token operator">|</span>       <span class="token number">76446</span> <span class="token operator">|</span>   <span class="token number">21326906</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------+---------+----------+-------------------+------------------+----------------------+------------------------+--------------------+------------------------------+--------+------------+--------------+---------------+----------------+----------------------+-----------------+----------------------------+-----------------------+------------------------------+-------------------------+--------------------------+---------------------+-------+---------+-------------+------------+</span></span>
<span class="line"><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span></span>
<span class="line">            </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重要列说明：</p><ul><li><strong>QPS</strong>：应用到PolarDB-X的QPS，通常称为逻辑QPS；</li><li><strong>RDS_QPS</strong>：PolarDB-X到RDS的QPS，通常称为物理QPS；</li><li><strong>ERROR_PER_SECOND</strong>：每秒的错误数，包含SQL语法错误，主键冲突，系统错误，连通性错误等各类错误总和；</li><li><strong>VIOLATION_PER_SECOND</strong>：每秒的主键或者唯一键冲突；</li><li><strong>MERGE_QUERY_PER_SECOND</strong>：通过分库分表，从多表中进行的查询；</li><li><strong>ACTIVE_CONNECTIONS</strong>：正在使用的连接；</li><li><strong>CONNECTION_CREATE_PER_SECOND</strong>：每秒创建的连接数；</li><li><strong>RT(MS)</strong>：应用到PolarDB-X的响应时间，通常称为逻辑RT（响应时间）；</li><li><strong>RDS_RT(MS)</strong>：PolarDB-X到RDS/MySQL的响应时间，通常称为物理RT；</li><li><strong>NET_IN(KB/S)</strong>：PolarDB-X收到的网络流量；</li><li><strong>NET_OUT(KB/S)</strong>：PolarDB-X输出的网络流量；</li><li><strong>THREAD_RUNNING</strong>：正在运行的线程数；</li><li><strong>HINT_USED_PER_SECOND</strong>：每秒带HINT的查询的数量；</li><li><strong>HINT_USED_COUNT</strong>：启动到现在带HINT的查询总量；</li><li><strong>AGGREGATE_QUERY_PER_SECOND</strong>：每秒聚合查询的频次；</li><li><strong>AGGREGATE_QUERY_COUNT</strong>：聚合查询总数（历史累计数据）；</li><li><strong>TEMP_TABLE_CREATE_PER_SECOND</strong>：每秒创建的临时表的数量；</li><li><strong>TEMP_TABLE_CREATE_COUNT</strong>：启动到现在创建的临时表总数量；</li><li><strong>MULTI_DB_JOIN_PER_SECOND</strong>：每秒跨库JOIN的数量；</li><li><strong>MULTI_DB_JOIN_COUNT</strong>：启动到现在跨库JOIN的总量。</li></ul><h3 id="show-db-status" tabindex="-1"><a class="header-anchor" href="#show-db-status"><span>SHOW DB STATUS</span></a></h3><p>用于查看物理库容量/性能信息，所有返回值为实时信息。 容量信息通过MySQL系统表获得，与真实容量情况可能有差异。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">SHOW DB STATUS<span class="token punctuation">;</span></span>
<span class="line">+------+---------------------------+--------------------+-------------------+------------+--------+----------------+</span>
<span class="line"><span class="token operator">|</span> ID   <span class="token operator">|</span> NAME                      <span class="token operator">|</span> CONNECTION_STRING  <span class="token operator">|</span> PHYSICAL_DB       <span class="token operator">|</span> SIZE_IN_MB <span class="token operator">|</span> RATIO  <span class="token operator">|</span> THREAD_RUNNING <span class="token operator">|</span></span>
<span class="line">+------+---------------------------+--------------------+-------------------+------------+--------+----------------+</span>
<span class="line"><span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> drds_db_1516187088365daui <span class="token operator">|</span> <span class="token number">100.100</span>.64.1:59077 <span class="token operator">|</span> TOTAL             <span class="token operator">|</span>  <span class="token number">13.109375</span> <span class="token operator">|</span> <span class="token number">100</span>%   <span class="token operator">|</span> <span class="token number">3</span>              <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> drds_db_1516187088365daui <span class="token operator">|</span> <span class="token number">100.100</span>.64.1:59077 <span class="token operator">|</span> drds_db_xzip_0000 <span class="token operator">|</span>   <span class="token number">1.578125</span> <span class="token operator">|</span> <span class="token number">12.04</span>% <span class="token operator">|</span>                <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> drds_db_1516187088365daui <span class="token operator">|</span> <span class="token number">100.100</span>.64.1:59077 <span class="token operator">|</span> drds_db_xzip_0001 <span class="token operator">|</span>     <span class="token number">1.4375</span> <span class="token operator">|</span> <span class="token number">10.97</span>% <span class="token operator">|</span>                <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> drds_db_1516187088365daui <span class="token operator">|</span> <span class="token number">100.100</span>.64.1:59077 <span class="token operator">|</span> drds_db_xzip_0002 <span class="token operator">|</span>     <span class="token number">1.4375</span> <span class="token operator">|</span> <span class="token number">10.97</span>% <span class="token operator">|</span>                <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>    <span class="token number">5</span> <span class="token operator">|</span> drds_db_1516187088365daui <span class="token operator">|</span> <span class="token number">100.100</span>.64.1:59077 <span class="token operator">|</span> drds_db_xzip_0003 <span class="token operator">|</span>     <span class="token number">1.4375</span> <span class="token operator">|</span> <span class="token number">10.97</span>% <span class="token operator">|</span>                <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>    <span class="token number">6</span> <span class="token operator">|</span> drds_db_1516187088365daui <span class="token operator">|</span> <span class="token number">100.100</span>.64.1:59077 <span class="token operator">|</span> drds_db_xzip_0004 <span class="token operator">|</span>   <span class="token number">1.734375</span> <span class="token operator">|</span> <span class="token number">13.23</span>% <span class="token operator">|</span>                <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span> drds_db_1516187088365daui <span class="token operator">|</span> <span class="token number">100.100</span>.64.1:59077 <span class="token operator">|</span> drds_db_xzip_0005 <span class="token operator">|</span>   <span class="token number">1.734375</span> <span class="token operator">|</span> <span class="token number">13.23</span>% <span class="token operator">|</span>                <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>    <span class="token number">8</span> <span class="token operator">|</span> drds_db_1516187088365daui <span class="token operator">|</span> <span class="token number">100.100</span>.64.1:59077 <span class="token operator">|</span> drds_db_xzip_0006 <span class="token operator">|</span>   <span class="token number">2.015625</span> <span class="token operator">|</span> <span class="token number">15.38</span>% <span class="token operator">|</span>                <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>    <span class="token number">9</span> <span class="token operator">|</span> drds_db_1516187088365daui <span class="token operator">|</span> <span class="token number">100.100</span>.64.1:59077 <span class="token operator">|</span> drds_db_xzip_0007 <span class="token operator">|</span>   <span class="token number">1.734375</span> <span class="token operator">|</span> <span class="token number">13.23</span>% <span class="token operator">|</span>                <span class="token operator">|</span></span>
<span class="line">+------+---------------------------+--------------------+-------------------+------------+--------+----------------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重要列说明：</p><ul><li><strong>NAME</strong>：代表一个PolarDB-X DB，此处显示的是PolarDB-X内部标记，与PolarDB-X DB名称不同；</li><li><strong>CONNECTION_STRING</strong>：分库的连接信息；</li><li><strong>PHYSICAL_DB</strong>：分库名称，<strong>TOTAL</strong>行代表一个PolarDB-X DB中所有分库容量的总和；</li><li><strong>SIZE_IN_MB</strong>：分库中数据占用的空间，单位为MB；</li><li><strong>RATIO</strong>：单个分库数据量在当前PolarDB-X DB总数据量中的占比；</li><li><strong>THREAD_RUNNING</strong>：物理数据库实例当前正在执行的线程情况，含义与MySQL语句<strong>SHOW GLOBAL STATUS</strong>返回值的含义相同</li></ul><h3 id="show-table-status" tabindex="-1"><a class="header-anchor" href="#show-table-status"><span>SHOW TABLE STATUS</span></a></h3><p>获取表的信息，该指令聚合了底层各个物理分表的数据。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">SHOW TABLE STATUS<span class="token punctuation">;</span></span>
<span class="line">+---------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+-------------+------------+--------------------+----------+----------------+---------+</span>
<span class="line"><span class="token operator">|</span> NAME    <span class="token operator">|</span> ENGINE <span class="token operator">|</span> VERSION <span class="token operator">|</span> ROW_FORMAT <span class="token operator">|</span> ROWS <span class="token operator">|</span> AVG_ROW_LENGTH <span class="token operator">|</span> DATA_LENGTH <span class="token operator">|</span> MAX_DATA_LENGTH <span class="token operator">|</span> INDEX_LENGTH <span class="token operator">|</span> DATA_FREE <span class="token operator">|</span> AUTO_INCREMENT <span class="token operator">|</span> CREATE_TIME         <span class="token operator">|</span> UPDATE_TIME <span class="token operator">|</span> CHECK_TIME <span class="token operator">|</span> COLLATION          <span class="token operator">|</span> CHECKSUM <span class="token operator">|</span> CREATE_OPTIONS <span class="token operator">|</span> COMMENT <span class="token operator">|</span></span>
<span class="line">+---------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+-------------+------------+--------------------+----------+----------------+---------+</span>
<span class="line"><span class="token operator">|</span> sbtest1 <span class="token operator">|</span> InnoDB <span class="token operator">|</span>      <span class="token number">10</span> <span class="token operator">|</span> Dynamic    <span class="token operator">|</span>    <span class="token number">0</span> <span class="token operator">|</span>              <span class="token number">0</span> <span class="token operator">|</span>     <span class="token number">1310720</span> <span class="token operator">|</span>               <span class="token number">0</span> <span class="token operator">|</span>            <span class="token number">0</span> <span class="token operator">|</span>         <span class="token number">0</span> <span class="token operator">|</span>              <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">2021</span>-07-20 <span class="token number">15</span>:39:37 <span class="token operator">|</span> NULL        <span class="token operator">|</span> NULL       <span class="token operator">|</span> utf8mb4_general_ci <span class="token operator">|</span> NULL     <span class="token operator">|</span>                <span class="token operator">|</span>         <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> t1      <span class="token operator">|</span> InnoDB <span class="token operator">|</span>      <span class="token number">10</span> <span class="token operator">|</span> Dynamic    <span class="token operator">|</span>    <span class="token number">0</span> <span class="token operator">|</span>              <span class="token number">0</span> <span class="token operator">|</span>     <span class="token number">2621440</span> <span class="token operator">|</span>               <span class="token number">0</span> <span class="token operator">|</span>      <span class="token number">2621440</span> <span class="token operator">|</span>         <span class="token number">0</span> <span class="token operator">|</span>         <span class="token number">200000</span> <span class="token operator">|</span> <span class="token number">2021</span>-07-26 <span class="token number">20</span>:11:15 <span class="token operator">|</span> NULL        <span class="token operator">|</span> NULL       <span class="token operator">|</span> utf8mb4_general_ci <span class="token operator">|</span> NULL     <span class="token operator">|</span>                <span class="token operator">|</span>         <span class="token operator">|</span></span>
<span class="line">+---------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+-------------+------------+--------------------+----------+----------------+---------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重要列详解：</p><ul><li><strong>NAME</strong>：表名称；</li><li><strong>ENGINE</strong>：表的存储引擎；</li><li><strong>VERSION</strong>：表的存储引擎的版本；</li><li><strong>ROW_FORMAT</strong> ：行格式，主要是Dynamic、Fixed、Compressed这三种格式。动态（Dynamic）行的行长度可变，例如VARCHAR或BLOB类型字段；固定（Fixed）行是指行长度不变，例如CHAR和INTEGER类型字段；</li><li><strong>ROWS</strong>：表中的行数；</li><li><strong>AVG_ROW_LENGTH</strong>：平均每行包括的字节数；</li><li><strong>DATA_LENGTH</strong>：整个表的数据量（单位：字节）；</li><li><strong>MAX_DATA_LENGTH</strong>：表可以容纳的最大数据量；</li><li><strong>INDEX_LENGTH</strong>：索引占用磁盘的空间大小 ；</li><li><strong>CREATE_TIME</strong>：表的创建时间；</li><li><strong>UPDATE_TIME</strong>：表的最近更新时间；</li><li><strong>COLLATION</strong>：表的默认字符集和字符排序规则；</li><li><strong>CREATE_OPTIONS</strong>：指表创建时的其他所有选项。</li></ul><p>查看具体TABLE的状态可以使用 like 关键字</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">mysql<span class="token operator">&gt;</span> <span class="token keyword">SHOW</span> <span class="token keyword">TABLE</span> <span class="token keyword">STATUS</span> <span class="token operator">like</span> test_table<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------------+--------+---------+------------+---------+----------------+-------------+-----------------+--------------+-----------+----------------+-----------------------+-----------------------+------------+-----------------+----------+----------------+---------+</span></span>
<span class="line"><span class="token operator">|</span> NAME       <span class="token operator">|</span> <span class="token keyword">ENGINE</span> <span class="token operator">|</span> VERSION <span class="token operator">|</span> ROW_FORMAT <span class="token operator">|</span> <span class="token keyword">ROWS</span>    <span class="token operator">|</span> AVG_ROW_LENGTH <span class="token operator">|</span> DATA_LENGTH <span class="token operator">|</span> MAX_DATA_LENGTH <span class="token operator">|</span> INDEX_LENGTH <span class="token operator">|</span> DATA_FREE <span class="token operator">|</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">|</span> CREATE_TIME           <span class="token operator">|</span> UPDATE_TIME           <span class="token operator">|</span> CHECK_TIME <span class="token operator">|</span> COLLATION       <span class="token operator">|</span> CHECKSUM <span class="token operator">|</span> CREATE_OPTIONS <span class="token operator">|</span> <span class="token keyword">COMMENT</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------------+--------+---------+------------+---------+----------------+-------------+-----------------+--------------+-----------+----------------+-----------------------+-----------------------+------------+-----------------+----------+----------------+---------+</span></span>
<span class="line"><span class="token operator">|</span> test_table <span class="token operator">|</span> <span class="token keyword">InnoDB</span> <span class="token operator">|</span>      <span class="token number">10</span> <span class="token operator">|</span> Dynamic    <span class="token operator">|</span> <span class="token number">5701365</span> <span class="token operator">|</span> <span class="token number">2133</span>           <span class="token operator">|</span> <span class="token number">12166168576</span> <span class="token operator">|</span> <span class="token number">0</span>               <span class="token operator">|</span> <span class="token number">1966866432</span>   <span class="token operator">|</span> <span class="token number">7340032</span>   <span class="token operator">|</span>              <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">2022</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">05</span> <span class="token number">04</span>:<span class="token number">42</span>:<span class="token number">18.0</span> <span class="token operator">|</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">07</span> <span class="token number">18</span>:<span class="token number">00</span>:<span class="token number">04.0</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> utf8_general_ci <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span>                <span class="token operator">|</span> 日志表  <span class="token operator">|</span></span>
<span class="line"><span class="token operator">+</span><span class="token comment">------------+--------+---------+------------+---------+----------------+-------------+-----------------+--------------+-----------+----------------+-----------------------+-----------------------+------------+-----------------+----------+----------------+---------+</span></span>
<span class="line"><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.21</span> sec<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="show-table-info-name" tabindex="-1"><a class="header-anchor" href="#show-table-info-name"><span>SHOW TABLE INFO [name]</span></a></h3><p>获取各个分表的数据量信息。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">SHOW TABLE INFO SBTEST1<span class="token punctuation">;</span></span>
<span class="line">+----+--------------+-----------------+------------+</span>
<span class="line"><span class="token operator">|</span> ID <span class="token operator">|</span> GROUP_NAME   <span class="token operator">|</span> TABLE_NAME      <span class="token operator">|</span> SIZE_IN_MB <span class="token operator">|</span></span>
<span class="line">+----+--------------+-----------------+------------+</span>
<span class="line"><span class="token operator">|</span>  <span class="token number">0</span> <span class="token operator">|</span> test1_000000 <span class="token operator">|</span> sbtest1_wo5k_00 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> test1_000000 <span class="token operator">|</span> sbtest1_wo5k_01 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> test1_000005 <span class="token operator">|</span> sbtest1_wo5k_10 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> test1_000005 <span class="token operator">|</span> sbtest1_wo5k_11 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> test1_000010 <span class="token operator">|</span> sbtest1_wo5k_20 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> test1_000010 <span class="token operator">|</span> sbtest1_wo5k_21 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> test1_000015 <span class="token operator">|</span> sbtest1_wo5k_30 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> test1_000015 <span class="token operator">|</span> sbtest1_wo5k_31 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> test1_000020 <span class="token operator">|</span> sbtest1_wo5k_40 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> test1_000020 <span class="token operator">|</span> sbtest1_wo5k_41 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">10</span> <span class="token operator">|</span> test1_000025 <span class="token operator">|</span> sbtest1_wo5k_50 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">11</span> <span class="token operator">|</span> test1_000025 <span class="token operator">|</span> sbtest1_wo5k_51 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">12</span> <span class="token operator">|</span> test1_000030 <span class="token operator">|</span> sbtest1_wo5k_60 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">13</span> <span class="token operator">|</span> test1_000030 <span class="token operator">|</span> sbtest1_wo5k_61 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">14</span> <span class="token operator">|</span> test1_000035 <span class="token operator">|</span> sbtest1_wo5k_70 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span> <span class="token number">15</span> <span class="token operator">|</span> test1_000035 <span class="token operator">|</span> sbtest1_wo5k_71 <span class="token operator">|</span> <span class="token number">0.01562500</span> <span class="token operator">|</span></span>
<span class="line">+----+--------------+-----------------+------------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="分析数据分布不均衡" tabindex="-1"><a class="header-anchor" href="#分析数据分布不均衡"><span>分析数据分布不均衡</span></a></h2><p>当数据分布不均匀，大部分数据集中在一两个节点时，将导致节点负载过高、查询缓慢，甚至造成节点故障</p><h3 id="分库级别的数据倾斜" tabindex="-1"><a class="header-anchor" href="#分库级别的数据倾斜"><span>分库级别的数据倾斜</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">show</span> db <span class="token keyword">status</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="索引触发全表代价" tabindex="-1"><a class="header-anchor" href="#索引触发全表代价"><span>索引触发全表代价</span></a></h2><ul><li>rds索引命中范围超过80%</li><li>drds索引命中范围超过60%</li></ul><p>底层优化逻辑都会触发自动执行全表扫描的。</p>`,94))])}const m=t(i,[["render",d],["__file","04-DRDS.html.vue"]]),v=JSON.parse('{"path":"/docs/database/04-DRDS.html","title":"DRDS","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"SHOW HELP","slug":"show-help","link":"#show-help","children":[]},{"level":2,"title":"EXPLAIN","slug":"explain","link":"#explain","children":[{"level":3,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":3,"title":"EXPLAIN语句","slug":"explain语句","link":"#explain语句","children":[]},{"level":3,"title":"EXPLAIN LOGICALVIEW语句","slug":"explain-logicalview语句","link":"#explain-logicalview语句","children":[]},{"level":3,"title":"EXPLAIN EXECUTE语句","slug":"explain-execute语句","link":"#explain-execute语句","children":[]},{"level":3,"title":"EXPLAIN SHARDING语句","slug":"explain-sharding语句","link":"#explain-sharding语句","children":[]},{"level":3,"title":"EXPLAIN COST语句","slug":"explain-cost语句","link":"#explain-cost语句","children":[]},{"level":3,"title":"EXPLAIN ANALYZE语句","slug":"explain-analyze语句","link":"#explain-analyze语句","children":[]},{"level":3,"title":"EXPLAIN PHYSICAL语句","slug":"explain-physical语句","link":"#explain-physical语句","children":[]},{"level":3,"title":"EXPLAIN ADVISOR语句","slug":"explain-advisor语句","link":"#explain-advisor语句","children":[]}]},{"level":2,"title":"CHECK TABLE","slug":"check-table","link":"#check-table","children":[{"level":3,"title":"语法","slug":"语法-1","link":"#语法-1","children":[]},{"level":3,"title":"示例","slug":"示例","link":"#示例","children":[]}]},{"level":2,"title":"逻辑表的拓扑分布","slug":"逻辑表的拓扑分布","link":"#逻辑表的拓扑分布","children":[{"level":3,"title":"语法","slug":"语法-2","link":"#语法-2","children":[]},{"level":3,"title":"示例","slug":"示例-1","link":"#示例-1","children":[]}]},{"level":2,"title":"分库分表键集合","slug":"分库分表键集合","link":"#分库分表键集合","children":[]},{"level":2,"title":"广播表列表","slug":"广播表列表","link":"#广播表列表","children":[]},{"level":2,"title":"SHOW DATASOURCES","slug":"show-datasources","link":"#show-datasources","children":[]},{"level":2,"title":"SHOW NODE","slug":"show-node","link":"#show-node","children":[]},{"level":2,"title":"慢SQL相关","slug":"慢sql相关","link":"#慢sql相关","children":[{"level":3,"title":"语法","slug":"语法-3","link":"#语法-3","children":[]}]},{"level":2,"title":"统计信息","slug":"统计信息","link":"#统计信息","children":[{"level":3,"title":"SHOW [FULL] STATS","slug":"show-full-stats","link":"#show-full-stats","children":[]},{"level":3,"title":"SHOW DB STATUS","slug":"show-db-status","link":"#show-db-status","children":[]},{"level":3,"title":"SHOW TABLE STATUS","slug":"show-table-status","link":"#show-table-status","children":[]},{"level":3,"title":"SHOW TABLE INFO [name]","slug":"show-table-info-name","link":"#show-table-info-name","children":[]}]},{"level":2,"title":"分析数据分布不均衡","slug":"分析数据分布不均衡","link":"#分析数据分布不均衡","children":[{"level":3,"title":"分库级别的数据倾斜","slug":"分库级别的数据倾斜","link":"#分库级别的数据倾斜","children":[]}]},{"level":2,"title":"索引触发全表代价","slug":"索引触发全表代价","link":"#索引触发全表代价","children":[]}],"git":{"updatedTime":1734338014000,"contributors":[{"name":"wangxiaoquan","email":"wxq","commits":1}]},"filePathRelative":"docs/database/04-DRDS.md"}');export{m as comp,v as data};
