import{_ as i,c as d,a as e,b as a,w as n,d as r,r as p,o,e as s}from"./app-CKtXyHQO.js";const c={},h={class:"table-of-contents"};function u(g,t){const l=p("router-link");return o(),d("div",null,[t[5]||(t[5]=e("h1",{id:"kettle-工具",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#kettle-工具"},[e("span",null,"Kettle 工具")])],-1)),t[6]||(t[6]=e("p",null,[e("strong",null,"目录")],-1)),e("nav",h,[e("ul",null,[e("li",null,[a(l,{to:"#kettle-工具简介"},{default:n(()=>t[0]||(t[0]=[s("Kettle 工具简介")])),_:1})]),e("li",null,[a(l,{to:"#kitchen-和-pan"},{default:n(()=>t[1]||(t[1]=[s("Kitchen 和 Pan")])),_:1}),e("ul",null,[e("li",null,[a(l,{to:"#参数列表"},{default:n(()=>t[2]||(t[2]=[s("参数列表")])),_:1})]),e("li",null,[a(l,{to:"#语法定义"},{default:n(()=>t[3]||(t[3]=[s("语法定义")])),_:1})]),e("li",null,[a(l,{to:"#命令示例"},{default:n(()=>t[4]||(t[4]=[s("命令示例")])),_:1})])])])])]),t[7]||(t[7]=r(`<h2 id="kettle-工具简介" tabindex="-1"><a class="header-anchor" href="#kettle-工具简介"><span>Kettle 工具简介</span></a></h2><p>Kettle 里有不同的工具，用于ETL的不同阶段。主要工具如下：</p><ul><li><p>Spoon：图形化工具，用于快速设计和维护复杂的ETL工作流。</p></li><li><p>Kitchen：运行作业的命令行工具。</p></li><li><p>Pan：运行转换的命令行工具。</p></li><li><p>Carte：轻量级的（大概1MB）Web服务器，用来远程执行转换或作业，一个运行有Carte进程的机器可以作为从服务器，从服务器是Kettle集群的一部分。</p></li></ul><h2 id="kitchen-和-pan" tabindex="-1"><a class="header-anchor" href="#kitchen-和-pan"><span>Kitchen 和 Pan</span></a></h2><p>作业和转换可以在图形界面里执行，但这只是在开发、测试和调试阶段。在开发完成后，需要部署到实际运行环境中，在部署阶段Spoon就很少用到了。部署阶段一般需要通过命令行执行，需要把命令行放到Shell脚本中，并定时调度这个脚本。Kitchen和Pan命令行工具就是用于这个阶段，用于实际的生产环境。Kettle的Kitchen和Pan工具是Kettle的命令行执行程序。实际上，Pan和Kitchen只是在Kettle执行引擎上的封装。它们只是解释命令行参数，调用并把这些参数传递给Kettle引擎。Kitchen和Pan在概念和用法上都非常相近，这两个命令的参数也基本是一样的。唯一不同的是Kitchen用于执行作业，Pan用于执行转换。在使用命令行执行作业或转换时，需要重点考虑网络传输的性能。Kettle数据流将数据作为本地行集缓存。如果数据源和目标之间需要通过网络传输大量数据，将Kettle部署于源或目标服务器上会极大提升性能。Kitchen和Pan都通过脚本的方式启动，在Windows系统下，脚本名称是Kitchen.bat和Pan.bat，在类UNIX系统下，脚本名称是Kitchen.sh和Pan.sh。在执行这些脚本以及Kettle带的其它脚本时，要把Kettle目录切换为控制台的当前目录。类UNIX系统的脚本默认情况下是不能执行的，必须使用chmod目录使脚本可执行。Kettle是用Java语言开发的，因此在使用Kettle命令行时需要注意匹配Java版本。例如Kettle8.2.0版本需要JDK1.8的支持。这样就能在Spoon的图形界面下进行设计开发调试，然后用命令行执行保存的转换或作业（.ktr或.kjb文件），秉承Java程序一次编译到处运行的理念。</p><h3 id="参数列表" tabindex="-1"><a class="header-anchor" href="#参数列表"><span>参数列表</span></a></h3><ul><li>Kitchen 和 Pan 共有参数</li></ul><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">rep</td><td style="text-align:left;">企业或数据库存储库名称</td></tr><tr><td style="text-align:left;">user</td><td style="text-align:left;">用户名</td></tr><tr><td style="text-align:left;">pass</td><td style="text-align:left;">密码</td></tr><tr><td style="text-align:left;">dir</td><td style="text-align:left;">存储库目录</td></tr><tr><td style="text-align:left;">file</td><td style="text-align:left;">如果调用的是本地 KTR 文件，则为文件名，如果不在本地目录中，则包括路径</td></tr><tr><td style="text-align:left;">level</td><td style="text-align:left;">日志级别（基本、详细、调试、行级别、错误、无）(Basic, Detailed, Debug, Rowlevel, Error, Nothing)</td></tr><tr><td style="text-align:left;">logfile</td><td style="text-align:left;">将日志输出写入的本地文件名</td></tr><tr><td style="text-align:left;">listdir</td><td style="text-align:left;">列出指定存储库中的目录</td></tr><tr><td style="text-align:left;">listrep</td><td style="text-align:left;">列出可用的存储库</td></tr><tr><td style="text-align:left;">exprep</td><td style="text-align:left;">将所有存储库对象导出到一个 XML 文件</td></tr><tr><td style="text-align:left;">norep</td><td style="text-align:left;">防止 Pan（Kitchen）登录到存储库。如果您已经设置了 KETTLE_REPOSITORY、KETTLE_USER 和 KETTLE_PASSWORD 环境变量，那么这个选项将使您能够阻止 Pan（ Kitchen）登录到指定的存储库，假设您要执行本地 KTR 文件</td></tr><tr><td style="text-align:left;">version</td><td style="text-align:left;">显示版本、修订和构建日期</td></tr><tr><td style="text-align:left;">param</td><td style="text-align:left;">以name=value 格式设置命名参数 。例如： -param:FOO=bar</td></tr><tr><td style="text-align:left;">listparam</td><td style="text-align:left;">列出有关指定转换中定义的命名参数的信息</td></tr><tr><td style="text-align:left;">maxloglines</td><td style="text-align:left;">PDI 内部保留的最大日志行数。设置为 0 以保留所有行（默认）</td></tr><tr><td style="text-align:left;">maxlogtimeout</td><td style="text-align:left;">由 PDI 内部保留的日志行的最长期限（以分钟为单位）。设置为 0 以无限期地保留所有行（默认）</td></tr></tbody></table><ul><li>Kitchen 特有参数</li></ul><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>jobs</td><td>指定资源库里的一个作业名</td></tr><tr><td>listdir</td><td>列出资源库里的所有作业</td></tr></tbody></table><ul><li>Pan 特有参数</li></ul><table><thead><tr><th style="text-align:left;">参数</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">trans</td><td style="text-align:left;">要启动的转换的名称</td></tr><tr><td style="text-align:left;">listtrans</td><td style="text-align:left;">列出指定存储库目录中的转换</td></tr><tr><td style="text-align:left;">safemode</td><td style="text-align:left;">在安全模式下运行，可以进行额外检查</td></tr></tbody></table><h3 id="语法定义" tabindex="-1"><a class="header-anchor" href="#语法定义"><span>语法定义</span></a></h3><p>windows 系统使用带有正斜杠 (<code>/</code>) 和冒号 (<code>:</code>) 的语法，linux 系统使用中杠<code>-</code>的语法。如果选项值中存在空格，请使用单引号 <code>&#39;&#39;</code> 和双引号 <code>&quot;&quot;</code> 将空格放在一起，例如：<code>“-param:MASTER_HOST=192.168.1.3&quot; &quot;-param:MASTER_PORT=8181”</code></p><ul><li><p>pan 基本语法</p><ul><li><p>linux语法：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">pan.sh <span class="token parameter variable">-option</span><span class="token operator">=</span>value arg1 arg2 </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>windows语法</p><div class="language-bat line-numbers-mode" data-highlighter="prismjs" data-ext="bat" data-title="bat"><pre><code><span class="line">pan.bat /option:value arg1 arg2 </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul></li><li><p>kitchen 基本语法</p><ul><li><p>linux语法：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">  kitchen.sh <span class="token parameter variable">-option</span><span class="token operator">=</span>value arg1 arg2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>windows语法</p><div class="language-bat line-numbers-mode" data-highlighter="prismjs" data-ext="bat" data-title="bat"><pre><code><span class="line">kitchen.bat /option: 值 arg1 arg2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul></li></ul><h3 id="命令示例" tabindex="-1"><a class="header-anchor" href="#命令示例"><span>命令示例</span></a></h3><ul><li><p>pan 示例</p><ul><li>windows :<div class="language-bat line-numbers-mode" data-highlighter="prismjs" data-ext="bat" data-title="bat"><pre><code><span class="line">Pan.bat /file:D:\\project\\pan-mysql-mysql.ktr</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>linux:</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">./pan.sh <span class="token parameter variable">-file</span><span class="token operator">=</span>./pan-mysql-mysql.ktr</span>
<span class="line">./pan.sh /file:./pan-mysql-mysql.ktr</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>kitchen 示例</p><ul><li>windows :<div class="language-bat line-numbers-mode" data-highlighter="prismjs" data-ext="bat" data-title="bat"><pre><code><span class="line">Kitchen.bat /file:D:\\project\\pan_mysql_mysql.kjb</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>linux:</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">./kitchen.sh <span class="token parameter variable">-file</span><span class="token operator">=</span>./pan_mysql_mysql.kjb</span>
<span class="line">./kitchen.sh /file:./pan_mysql_mysql.kjb</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul>`,17))])}const b=i(c,[["render",u],["__file","06-工具.html.vue"]]),v=JSON.parse('{"path":"/docs/kettle/06-%E5%B7%A5%E5%85%B7.html","title":"Kettle 工具","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"Kettle 工具简介","slug":"kettle-工具简介","link":"#kettle-工具简介","children":[]},{"level":2,"title":"Kitchen 和 Pan","slug":"kitchen-和-pan","link":"#kitchen-和-pan","children":[{"level":3,"title":"参数列表","slug":"参数列表","link":"#参数列表","children":[]},{"level":3,"title":"语法定义","slug":"语法定义","link":"#语法定义","children":[]},{"level":3,"title":"命令示例","slug":"命令示例","link":"#命令示例","children":[]}]}],"git":{"updatedTime":1734338014000,"contributors":[{"name":"wangxiaoquan","email":"wxq","commits":1}]},"filePathRelative":"docs/kettle/06-工具.md"}');export{b as comp,v as data};
